<!-- ë¶í´ëŸ½ 3.0 - ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸ -->
<aside class="sidebar" id="main-sidebar">
    <!-- ë¡œê³  (ë“œë¡­ë‹¤ìš´ íŠ¸ë¦¬ê±°) -->
    <div class="px-6 pt-10 pb-4 relative z-20">
        <button onclick="toggleAppMenu()" class="flex items-center gap-2 group" id="logo-btn">
            <h1 class="font-jua text-2xl text-brand-primary tracking-tight">
                ì›…ì§„ë¶í´ëŸ½ <span class="text-gray-400 text-base" id="logo-krs-label">KRS</span>
            </h1>
            <i class="fa-solid fa-chevron-down text-gray-400 text-sm transition-transform duration-300" id="logo-arrow"></i>
        </button>
    </div>

    <!-- ì•± ì„ íƒ ë©”ë‰´ (ë“œë¡­ë‹¤ìš´ - ì˜¤ë²„ë ˆì´) -->
    <div id="app-menu" class="hidden absolute left-0 right-0 top-[72px] bottom-[60px] z-10 px-4 py-2 bg-white/95 backdrop-blur-sm animate-fadeIn overflow-y-auto">
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-2 space-y-1">
            <!-- ì›…ì§„ë¶í´ëŸ½ KRS -->
            <button onclick="selectApp('bookclub-krs')" class="app-item active w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all">
                <div class="w-10 h-10 bg-gradient-to-br from-brand-primary to-brand-dark rounded-xl flex items-center justify-center text-white text-lg shadow-md">
                    ğŸ“–
                </div>
                <div class="text-left flex-1">
                    <p class="font-jua text-sm text-gray-800">ì›…ì§„ë¶í´ëŸ½ KRS</p>
                    <p class="text-[10px] text-gray-400">AI ë…ì„œ í”„ë¡œê·¸ë¨</p>
                </div>
                <i class="fa-solid fa-check text-brand-primary text-sm" id="check-bookclub-krs"></i>
            </button>
            <!-- ì›…ì§„ë¶í´ëŸ½ -->
            <button onclick="selectApp('bookclub')" class="app-item w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white">
                <div class="w-10 h-10 bg-gradient-to-br from-brand-primary to-orange-500 rounded-xl flex items-center justify-center text-white text-lg shadow-md">
                    ğŸ“š
                </div>
                <div class="text-left flex-1">
                    <p class="font-jua text-sm text-gray-800">ì›…ì§„ë¶í´ëŸ½</p>
                    <p class="text-[10px] text-gray-400">ë…ì„œ Â· í•™ìŠµ</p>
                </div>
                <i class="fa-solid fa-check text-brand-primary text-sm hidden" id="check-bookclub"></i>
            </button>
            <!-- ìŠ¤ë§ˆíŠ¸ì”½í¬ë¹… -->
            <button onclick="selectApp('smart-thinkbig')" class="app-item w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white">
                <div class="w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-xl flex items-center justify-center text-white text-lg shadow-md">
                    ğŸ§ 
                </div>
                <div class="text-left flex-1">
                    <p class="font-jua text-sm text-gray-800">ìŠ¤ë§ˆíŠ¸ì”½í¬ë¹…</p>
                    <p class="text-[10px] text-gray-400">ì‚¬ê³ ë ¥ Â· ì°½ì˜ë ¥</p>
                </div>
                <i class="fa-solid fa-check text-brand-primary text-sm hidden" id="check-smart-thinkbig"></i>
            </button>
            <!-- ìŠ¤ë§ˆíŠ¸ì˜¬ -->
            <button onclick="selectApp('smartall')" class="app-item w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white">
                <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center text-white text-lg shadow-md">
                    ğŸ“
                </div>
                <div class="text-left flex-1">
                    <p class="font-jua text-sm text-gray-800">ìŠ¤ë§ˆíŠ¸ì˜¬</p>
                    <p class="text-[10px] text-gray-400">ì „ê³¼ëª© í•™ìŠµ</p>
                </div>
                <i class="fa-solid fa-check text-brand-primary text-sm hidden" id="check-smartall"></i>
            </button>
            <!-- ìŠˆí¼íŒŸ -->
            <button onclick="selectApp('superpot')" class="app-item w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white">
                <div class="w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center text-white text-lg shadow-md">
                    ğŸ®
                </div>
                <div class="text-left flex-1">
                    <p class="font-jua text-sm text-gray-800">ìŠˆí¼íŒŸ</p>
                    <p class="text-[10px] text-gray-400">ê²Œì„ Â· í™œë™</p>
                </div>
                <i class="fa-solid fa-check text-brand-primary text-sm hidden" id="check-superpot"></i>
            </button>
            <!-- ë§ê³ ì‹œí‹° -->
            <button onclick="selectApp('lingocity')" class="app-item w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all hover:bg-white">
                <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-teal-500 rounded-xl flex items-center justify-center text-white text-lg shadow-md">
                    ğŸŒ
                </div>
                <div class="text-left flex-1">
                    <p class="font-jua text-sm text-gray-800">ë§ê³ ì‹œí‹°</p>
                    <p class="text-[10px] text-gray-400">ì˜ì–´ í•™ìŠµ</p>
                </div>
                <i class="fa-solid fa-check text-brand-primary text-sm hidden" id="check-lingocity"></i>
            </button>
        </div>
    </div>

    <!-- í”„ë¡œí•„ ì¹´ë“œ -->
    <div id="profile-section" class="mx-6 mb-4 p-4 bg-gradient-to-br from-brand-bg to-yellow-200 rounded-2xl flex items-center gap-3 shadow-sm transition-all duration-300">
        <div class="relative">
            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-orange-300 to-brand-primary flex items-center justify-center text-2xl border-2 border-white shadow-md">
                ğŸ¿ï¸
            </div>
            <div class="absolute -bottom-1 -right-1 bg-gradient-to-r from-brand-primary to-orange-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full shadow-sm flex items-center gap-0.5">
                <i class="fa-solid fa-star text-yellow-300"></i> Lv.5
            </div>
        </div>
        <div>
            <p class="font-jua text-lg text-gray-800" data-user-name>ì§€í›ˆ</p>
            <p class="text-xs text-gray-500">ë…ì„œ íƒí—˜ê°€</p>
        </div>
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav id="nav-section" class="flex-1 px-4 space-y-1 overflow-y-auto hide-scrollbar transition-all duration-300">
        <!-- ë©”ì¸ ë©”ë‰´ -->
        <a href="home.html" data-page="home" id="nav-home-link" class="nav-link flex items-center gap-4 px-6 py-4 rounded-2xl transition-all">
            <i class="fa-solid fa-house text-xl w-6 text-center"></i>
            <span class="font-jua text-lg tracking-wide">í™ˆ</span>
        </a>
        <a href="library.html" data-page="library" data-krs-only class="nav-link flex items-center gap-4 px-6 py-4 rounded-2xl transition-colors">
            <i class="fa-solid fa-book-open text-xl w-6 text-center"></i>
            <span class="font-jua text-lg tracking-wide">KRS ë¦¬ë”©íŠ¸ë¦¬</span>
        </a>
        <a href="book-library.html" data-page="book-library" class="nav-link flex items-center gap-4 px-6 py-4 rounded-2xl transition-colors">
            <i class="fa-solid fa-layer-group text-xl w-6 text-center"></i>
            <span class="font-jua text-lg tracking-wide">ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
        </a>
        <a href="report.html" data-page="report" class="nav-link flex items-center gap-4 px-6 py-4 rounded-2xl transition-colors">
            <i class="fa-solid fa-chart-pie text-xl w-6 text-center"></i>
            <span class="font-jua text-lg tracking-wide">ë¦¬í¬íŠ¸</span>
        </a>
        <a href="mypage.html" data-page="mypage" class="nav-link flex items-center gap-4 px-6 py-4 rounded-2xl transition-colors">
            <i class="fa-solid fa-user text-xl w-6 text-center"></i>
            <span class="font-jua text-lg tracking-wide">ë§ˆì´í˜ì´ì§€</span>
        </a>
        <a href="starshop.html" data-page="starshop" class="nav-link flex items-center gap-4 px-6 py-4 rounded-2xl transition-colors">
            <i class="fa-solid fa-star text-xl w-6 text-center"></i>
            <span class="font-jua text-lg tracking-wide">ìŠ¤íƒ€ìƒµ</span>
        </a>

        <!-- KRS ì „ìš©: AI ë²„ë”” -->
        <div data-krs-only>
            <div class="pt-4 pb-2 px-2">
                <p class="text-xs font-medium text-gray-400 tracking-wide">AI ë²„ë””</p>
            </div>
            <a href="ai-buddy.html" data-page="ai-buddy" class="w-full flex items-center gap-3 px-5 py-3 rounded-2xl transition-all hover:bg-gradient-to-r hover:from-violet-50 hover:to-purple-50 group" style="text-decoration:none;">
                <div class="relative w-10 h-10 rounded-full bg-gradient-to-br from-violet-400 to-purple-500 flex items-center justify-center text-xl shadow-md group-hover:scale-110 transition-transform">
                    ğŸ¿ï¸
                    <div class="absolute -top-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border-2 border-white"></div>
                </div>
                <div class="flex-1 text-left">
                    <p class="font-jua text-sm text-gray-700 group-hover:text-purple-600 transition-colors">ë‹¤ëŒì´</p>
                    <div class="relative mt-0.5">
                        <div class="bg-gray-100 group-hover:bg-purple-100 rounded-lg px-2.5 py-1 transition-colors">
                            <p class="text-[10px] text-gray-400 group-hover:text-purple-500 truncate">ì•ˆë…•, ë‚˜ë‘ ê°™ì´ ì´ì•¼ê¸°í•˜ì!</p>
                        </div>
                        <div class="absolute -left-1 top-1/2 -translate-y-1/2 w-0 h-0 border-t-[4px] border-t-transparent border-b-[4px] border-b-transparent border-r-[5px] border-r-gray-100 group-hover:border-r-purple-100 transition-colors"></div>
                    </div>
                </div>
            </a>
        </div>
    </nav>

    <!-- í‘¸í„° (z-20ìœ¼ë¡œ ì•± ë©”ë‰´ ìœ„ì— í‘œì‹œ) -->
    <div class="p-6 pt-0 relative z-20 bg-white">
        <div class="flex items-center justify-between text-gray-400 mb-2 px-2">
            <button class="hover:text-brand-primary text-sm font-medium">
                <i class="fa-solid fa-gear mr-2"></i>ì„¤ì •
            </button>
            <button data-logout class="hover:text-red-400 text-sm font-medium">
                <i class="fa-solid fa-right-from-bracket mr-2"></i>ë¡œê·¸ì•„ì›ƒ
            </button>
        </div>
    </div>
</aside>

<style>
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn {
        animation: fadeIn 0.2s ease-out;
    }
    .app-item.active {
        background: white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    #logo-arrow.rotate {
        transform: rotate(180deg);
    }
</style>

