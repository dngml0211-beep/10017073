<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î∂ÅÌÅ¥ÎüΩ 3.0 - ÎßàÏù¥ÌéòÏù¥ÏßÄ</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#FEF3C7', primary: '#FF9F43', dark: '#F368E0', secondary: '#54a0ff', green: '#1dd1a1', paper: '#FDFBF7'
                        }
                    },
                    boxShadow: {
                        'soft': '0 10px 25px -5px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/responsive.css">

    <style>
        .font-noto { font-family: 'Noto Sans KR', sans-serif; }

        /* === ÌÉ≠ Î©îÎâ¥ Ïä§ÌÉÄÏùº === */
        .mypage-tabs {
            display: flex;
            gap: 4px;
            background: #f3f4f6;
            padding: 4px;
            border-radius: 16px;
            margin-bottom: 24px;
        }
        .mypage-tab {
            flex: 1;
            padding: 12px 16px;
            border-radius: 12px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            text-decoration: none;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .mypage-tab:hover {
            color: #374151;
            background: rgba(255,255,255,0.5);
        }
        .mypage-tab.active {
            background: white;
            color: #FF9F43;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        /* === 3Ïó¥ Í∑∏Î¶¨Îìú === */
        .my-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            align-items: start;
        }
        @media (max-width: 1200px) {
            .my-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        @media (max-width: 768px) {
            .my-grid {
                grid-template-columns: 1fr;
            }
        }

        /* === Ïπ¥Îìú Ïä§ÌÉÄÏùº === */
        .my-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.04);
            border: 1px solid #f3f4f6;
        }
        .my-card-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* === ÌîÑÎ°úÌïÑ ÏÑπÏÖò === */
        .profile-photo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF9F43, #F368E0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
            position: relative;
            transition: transform 0.2s;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(255,159,67,0.3);
        }
        .profile-photo:hover {
            transform: scale(1.05);
        }
        .profile-photo-edit {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 28px;
            height: 28px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            color: #6b7280;
            font-size: 12px;
        }

        .level-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            color: #d97706;
        }

        .taste-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: linear-gradient(135deg, #ede9fe, #ddd6fe);
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            color: #7c3aed;
        }

        .setting-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 500;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }
        .setting-btn:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
        }

        .star-count {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 18px;
            background: linear-gradient(135deg, #fef9c3, #fef08a);
            border-radius: 16px;
            border: 1px solid #fde047;
        }
        .star-count-num {
            font-size: 24px;
            font-weight: 800;
            color: #ca8a04;
            font-family: 'Noto Sans KR', sans-serif;
        }
        .star-count-label {
            font-size: 12px;
            color: #a16207;
            font-weight: 500;
        }

        .starshop-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            background: linear-gradient(135deg, #FF9F43, #f59e0b);
            border-radius: 12px;
            color: white;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            box-shadow: 0 4px 12px rgba(255,159,67,0.3);
        }
        .starshop-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255,159,67,0.4);
        }

        /* === Ï∂úÏÑù Îã¨Î†• === */
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .calendar-month {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
        }
        .calendar-nav {
            display: flex;
            gap: 8px;
        }
        .calendar-nav button {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            background: white;
            color: #6b7280;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .calendar-nav button:hover {
            background: #f9fafb;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-bottom: 8px;
        }
        .calendar-weekday {
            text-align: center;
            font-size: 11px;
            font-weight: 600;
            color: #9ca3af;
            padding: 4px;
        }
        .calendar-weekday.sun { color: #ef4444; }
        .calendar-weekday.sat { color: #3b82f6; }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 500;
            color: #374151;
            position: relative;
            background: #fafafa;
            border: 1px solid #f3f4f6;
        }
        .calendar-day.empty {
            background: transparent;
            border: none;
        }
        .calendar-day.stamped {
            background: linear-gradient(135deg, #fff7ed, #ffedd5);
            border-color: #fed7aa;
        }
        .calendar-day.stamped .stamp-icon {
            position: absolute;
            font-size: 18px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .calendar-day.stamped .day-num {
            opacity: 0.4;
            font-size: 10px;
        }
        .calendar-day.today {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid #f59e0b;
            box-shadow: 0 0 0 3px rgba(245,158,11,0.15);
        }
        .calendar-day.future {
            background: #f9fafb;
            color: #d1d5db;
            border: 1px dashed #e5e7eb;
        }

        .attendance-stats {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #f3f4f6;
        }
        .attendance-stat {
            flex: 1;
            text-align: center;
            padding: 12px;
            background: #f9fafb;
            border-radius: 12px;
        }
        .attendance-stat-num {
            font-size: 20px;
            font-weight: 800;
            color: #f97316;
        }
        .attendance-stat-label {
            font-size: 11px;
            color: #6b7280;
            margin-top: 2px;
        }

        /* === ÎèÖÏÑúÎ°ú ÌÇ§Ïû¨Í∏∞ === */
        .height-meter {
            position: relative;
            height: 320px;
            background: linear-gradient(180deg, #e0f2fe 0%, #f0f9ff 50%, #ffffff 100%);
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 20px;
        }
        .height-figure {
            position: relative;
            width: 120px;
            height: 260px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .height-figure-img {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .height-figure-silhouette {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(180deg, #e5e7eb 0%, #d1d5db 100%);
            border-radius: 12px 12px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            filter: grayscale(100%) opacity(0.3);
        }
        .height-figure-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80%;
            background: linear-gradient(180deg, #fef3c7 0%, #fde68a 50%, #fbbf24 100%);
            border-radius: 12px 12px 0 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 20px;
            font-size: 60px;
            overflow: hidden;
        }
        .height-figure-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
        }

        .height-label {
            position: absolute;
            top: 16px;
            left: 16px;
            background: white;
            padding: 8px 14px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .height-label-title {
            font-size: 11px;
            color: #6b7280;
        }
        .height-label-name {
            font-size: 14px;
            font-weight: 700;
            color: #1f2937;
        }

        .height-progress {
            position: absolute;
            top: 16px;
            right: 16px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
            padding: 8px 14px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(245,158,11,0.3);
        }

        .height-books {
            text-align: center;
            margin-top: 16px;
        }
        .height-books-count {
            font-size: 28px;
            font-weight: 800;
            color: #f59e0b;
        }
        .height-books-label {
            font-size: 13px;
            color: #6b7280;
            margin-top: 4px;
        }

        .height-next {
            margin-top: 12px;
            padding: 12px 16px;
            background: #f0f9ff;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .height-next-icon {
            font-size: 24px;
        }
        .height-next-text {
            font-size: 12px;
            color: #0369a1;
        }
        .height-next-name {
            font-weight: 700;
        }

        /* === Î¶¨Ìè¨Ìä∏ ÌÉ≠ Ïä§ÌÉÄÏùº === */
        .report-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        .report-toggle-btn {
            flex: 1;
            padding: 14px 20px;
            border-radius: 14px;
            border: 2px solid #e5e7eb;
            background: white;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
        }
        .report-toggle-btn:hover {
            border-color: #FF9F43;
            color: #FF9F43;
        }
        .report-toggle-btn.active {
            border-color: #FF9F43;
            background: linear-gradient(135deg, #fff7ed, #ffedd5);
            color: #FF9F43;
        }
        .report-period {
            text-align: center;
            margin-bottom: 24px;
            padding: 14px;
            background: #f9fafb;
            border-radius: 12px;
            font-size: 14px;
            color: #6b7280;
        }
        .report-period strong {
            color: #1f2937;
        }
        .report-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        .report-card-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .report-card-title i {
            font-size: 18px;
        }
        .report-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .report-stats-grid { grid-template-columns: repeat(2, 1fr); }
        }
        .report-stat-item {
            background: #f9fafb;
            border-radius: 16px;
            padding: 20px 16px;
            text-align: center;
        }
        .report-stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin: 0 auto 12px;
        }
        .report-stat-value {
            font-size: 24px;
            font-weight: 800;
            color: #1f2937;
        }
        .report-stat-label {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }
        .report-stat-change {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }
        .report-stat-change.up {
            background: #dcfce7;
            color: #16a34a;
        }
        .report-bar-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .report-bar-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .report-bar-label {
            width: 80px;
            font-size: 13px;
            color: #6b7280;
            flex-shrink: 0;
        }
        .report-bar-track {
            flex: 1;
            height: 28px;
            background: #f3f4f6;
            border-radius: 8px;
            overflow: hidden;
        }
        .report-bar-fill {
            height: 100%;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-size: 12px;
            font-weight: 600;
            color: white;
        }
        .report-highlight-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .report-highlight-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px;
            background: #fafafa;
            border-radius: 14px;
        }
        .report-highlight-icon {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }
        .report-highlight-info {
            flex: 1;
        }
        .report-highlight-title {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
        }
        .report-highlight-desc {
            font-size: 12px;
            color: #6b7280;
            margin-top: 3px;
        }
        .report-highlight-badge {
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            flex-shrink: 0;
        }
        .report-badge-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .report-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #f9fafb;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }
        .report-badge-icon {
            font-size: 20px;
        }
        .report-badge-text {
            font-size: 13px;
            font-weight: 600;
            color: #1f2937;
        }
        /* ÏõîÍ∞Ñ Î¶¨Ìè¨Ìä∏ - ÎèÖÏÑúÎ†• & Î†àÎ≤® */
        .report-power-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .report-power-grid { grid-template-columns: 1fr; }
        }
        .report-power-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        .report-power-gauge {
            position: relative;
            width: 100px;
            height: 100px;
            flex-shrink: 0;
        }
        .report-power-gauge svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        .report-power-center {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .report-power-score {
            font-size: 28px;
            font-weight: 800;
            color: #f97316;
        }
        .report-power-unit {
            font-size: 11px;
            color: #9ca3af;
        }
        .report-power-info h4 {
            font-size: 15px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }
        .report-power-rank {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 5px 10px;
            background: #fef3c7;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 700;
            color: #d97706;
        }
        .report-power-info p {
            font-size: 12px;
            color: #6b7280;
            margin-top: 8px;
        }
        .report-level-card {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 20px;
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 20px;
            color: white;
        }
        .report-level-badge {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .report-level-num {
            font-size: 28px;
            font-weight: 800;
        }
        .report-level-label {
            font-size: 10px;
            text-transform: uppercase;
            opacity: 0.8;
        }
        .report-level-info {
            flex: 1;
        }
        .report-level-info h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            opacity: 0.95;
        }
        .report-level-bar {
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        .report-level-fill {
            height: 100%;
            background: white;
            border-radius: 4px;
        }
        .report-level-text {
            font-size: 12px;
            opacity: 0.85;
        }
        /* Îä•Î†• Î∂ÑÏÑù */
        .report-ability-chart {
            display: flex;
            justify-content: center;
            padding: 10px 0;
        }
        .report-ability-chart svg {
            max-width: 260px;
            width: 100%;
        }
        .report-ability-summary {
            text-align: center;
            margin-top: 16px;
            padding: 14px;
            background: #f0fdf4;
            border-radius: 12px;
            font-size: 14px;
            color: #166534;
            font-weight: 500;
        }
        /* AI ÏΩîÏπ≠ */
        .report-ai-card {
            background: linear-gradient(135deg, #fff7ed, #ffedd5);
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
        }
        .report-ai-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        .report-ai-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF9F43, #fb923c);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }
        .report-ai-name {
            font-size: 14px;
            font-weight: 700;
            color: #9a3412;
        }
        .report-ai-message {
            font-size: 14px;
            color: #78350f;
            line-height: 1.7;
        }
        .report-ai-message b {
            color: #c2410c;
        }

        /* === ÎÇ¥ Ï±ÖÏû• ÌÉ≠ Ïä§ÌÉÄÏùº === */
        .bookshelf-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .bookshelf-tab {
            padding: 10px 16px;
            border-radius: 20px;
            border: none;
            background: #f3f4f6;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 13px;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .bookshelf-tab:hover {
            background: #e5e7eb;
        }
        .bookshelf-tab.active {
            background: linear-gradient(135deg, #FF9F43, #f59e0b);
            color: white;
        }
        .bookshelf-tab .count {
            padding: 2px 8px;
            border-radius: 10px;
            background: rgba(0,0,0,0.1);
            font-size: 11px;
        }
        .bookshelf-tab.active .count {
            background: rgba(255,255,255,0.3);
        }
        .bookshelf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 16px;
        }
        @media (max-width: 768px) {
            .bookshelf-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 12px;
            }
        }
        .bookshelf-book {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid #f3f4f6;
            cursor: pointer;
            transition: all 0.2s;
        }
        .bookshelf-book:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        }
        .bookshelf-book-cover {
            aspect-ratio: 3/4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            position: relative;
        }
        .bookshelf-book-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(0,0,0,0.1);
        }
        .bookshelf-book-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
        }
        .bookshelf-book-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 700;
            background: rgba(0,0,0,0.6);
            color: white;
        }
        .bookshelf-book-info {
            padding: 12px;
        }
        .bookshelf-book-title {
            font-size: 12px;
            font-weight: 600;
            color: #1f2937;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .bookshelf-book-series {
            font-size: 10px;
            color: #9ca3af;
            margin-top: 4px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .bookshelf-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 48px 24px;
            color: #9ca3af;
        }
        .bookshelf-empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        .bookshelf-empty-text {
            font-size: 14px;
        }
        .bookshelf-go-library {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 16px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #FF9F43, #f59e0b);
            border-radius: 12px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
        }

        /* === Í∞§Îü¨Î¶¨ ÌÉ≠ Ïä§ÌÉÄÏùº === */
        .gallery-subtabs {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
            border-bottom: 1px solid #e5e7eb;
        }
        .gallery-subtab {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: transparent;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 13px;
            font-weight: 600;
            color: #9ca3af;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        .gallery-subtab:hover { color: #6b7280; }
        .gallery-subtab.active {
            color: #FF9F43;
            border-bottom-color: #FF9F43;
        }
        .gallery-subtab i { margin-right: 4px; }

        .gallery-filters {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            overflow-x: auto;
            padding-bottom: 4px;
        }
        .gallery-filter {
            flex-shrink: 0;
            padding: 6px 12px;
            border-radius: 20px;
            border: 1.5px solid #e5e7eb;
            background: white;
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
        }
        .gallery-filter:hover { border-color: #d1d5db; background: #f9fafb; }
        .gallery-filter.active {
            background: #FF9F43;
            color: white;
            border-color: #FF9F43;
        }

        .gallery-sort {
            background: none;
            border: none;
            font-size: 12px;
            font-weight: 600;
            color: #9ca3af;
            cursor: pointer;
        }
        .gallery-sort.active { color: #FF9F43; }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
        }
        @media (min-width: 768px) {
            .gallery-grid { grid-template-columns: repeat(4, 1fr); gap: 6px; }
        }
        .gallery-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
        }
        .gallery-item-bg {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }
        .gallery-item-type {
            position: absolute;
            top: 6px;
            left: 6px;
            padding: 2px 6px;
            border-radius: 8px;
            background: rgba(255,255,255,0.9);
            font-size: 9px;
            font-weight: 700;
        }
        .gallery-item-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .gallery-item:hover .gallery-item-overlay { opacity: 1; }
        .gallery-item-likes {
            color: white;
            font-size: 12px;
            font-weight: 700;
        }
        .gallery-item-title {
            color: white;
            font-size: 10px;
            margin-top: 4px;
        }

        .gallery-feed {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }
        @media (min-width: 640px) {
            .gallery-feed { grid-template-columns: repeat(2, 1fr); }
        }
        @media (min-width: 1024px) {
            .gallery-feed { grid-template-columns: repeat(3, 1fr); }
        }
        .feed-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.04);
        }
        .feed-card.highlight { border: 2px solid #ffedd5; }
        .feed-card-header {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .feed-card-header.highlight-bg { background: #fffbf5; }
        .feed-card-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
        .feed-card-visual {
            aspect-ratio: 4/3;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }
        .feed-card-body { padding: 12px 16px; }
        .feed-card-actions {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }
        .feed-card-action {
            display: flex;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            font-size: 14px;
            cursor: pointer;
        }
        .feed-card-action.liked { color: #f43f5e; }
        .feed-card-action:not(.liked) { color: #9ca3af; }

        .follow-btn {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        .follow-btn.following {
            background: #f3f4f6;
            color: #6b7280;
        }
        .follow-btn:not(.following) {
            background: linear-gradient(135deg, #FF9F43, #f59e0b);
            color: white;
        }

        .friend-card {
            background: white;
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        .friend-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        /* === ÌîÑÎ°úÌïÑ Î≥ÄÍ≤Ω Î™®Îã¨ === */
        .profile-modal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 1000;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.5);
        }
        .profile-modal.show {
            display: flex;
        }
        .profile-modal-content {
            background: white;
            border-radius: 24px;
            padding: 28px;
            max-width: 360px;
            width: 90%;
            text-align: center;
        }
        .profile-modal-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
        }
        .profile-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        .profile-option {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.2s;
        }
        .profile-option:hover {
            transform: scale(1.1);
        }
        .profile-option.selected {
            border-color: #FF9F43;
            box-shadow: 0 0 0 3px rgba(255,159,67,0.2);
        }
        .profile-modal-close {
            padding: 12px 24px;
            background: #f3f4f6;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            border: none;
            margin-right: 8px;
        }
        .profile-modal-save {
            padding: 12px 24px;
            background: linear-gradient(135deg, #FF9F43, #f59e0b);
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            color: white;
            cursor: pointer;
            border: none;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-800 h-screen overflow-hidden">
    <!-- Î™®Î∞îÏùº ÌñÑÎ≤ÑÍ±∞ Î≤ÑÌäº -->
    <button class="sidebar-toggle" id="sidebar-toggle-btn" onclick="toggleSidebar()">
        <i class="fa-solid fa-bars text-gray-600 text-lg"></i>
    </button>

    <!-- ÏÇ¨Ïù¥ÎìúÎ∞î Ïò§Î≤ÑÎ†àÏù¥ -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>

    <div class="flex w-full h-full">
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-gradient-to-b from-gray-50 to-white">
            <div class="max-w-6xl mx-auto px-6 py-6">
                <!-- ÌéòÏù¥ÏßÄ Ìó§Îçî -->
                <div class="mb-6">
                    <h1 class="font-noto text-2xl font-bold text-gray-800">ÎßàÏù¥ÌéòÏù¥ÏßÄ</h1>
                </div>

                <!-- ÌÉ≠ Î©îÎâ¥ -->
                <div class="mypage-tabs">
                    <button class="mypage-tab active" data-tab="my">MY</button>
                    <button class="mypage-tab" data-tab="report">Î¶¨Ìè¨Ìä∏</button>
                    <button class="mypage-tab" data-tab="bookshelf">ÎÇ¥ Ï±ÖÏû•</button>
                    <button class="mypage-tab" data-tab="gallery">Í∞§Îü¨Î¶¨</button>
                    <a href="https://lean-scan-49700045.figma.site/" target="_blank" rel="noopener noreferrer" class="mypage-tab">Ïò¨ÎèÑÏ†Ñ</a>
                    <a href="https://bet-tutu-99186634.figma.site" target="_blank" rel="noopener noreferrer" class="mypage-tab">Î™ÖÏòàÏùòÏ†ÑÎãπ</a>
                </div>

                <!-- MY ÌÉ≠ ÏΩòÌÖêÏ∏† -->
                <div id="tab-my" class="tab-content">
                    <div class="my-grid">
                        <!-- 1. ÎÇ¥ ÌòÑÌô© -->
                        <div class="my-card">
                            <h3 class="my-card-title"><i class="fa-solid fa-user text-brand-primary"></i> ÎÇ¥ ÌòÑÌô©</h3>

                            <!-- ÌîÑÎ°úÌïÑ -->
                            <div class="flex items-center gap-4 mb-5">
                                <div class="profile-photo" onclick="openProfileModal()">
                                    <span id="profile-emoji">üòé</span>
                                    <div class="profile-photo-edit">
                                        <i class="fa-solid fa-camera"></i>
                                    </div>
                                </div>
                                <div>
                                    <p class="font-noto text-lg font-bold text-gray-800">Ïö∞Ìù¨</p>
                                    <p class="text-sm text-gray-500">3ÌïôÎÖÑ 2Î∞ò</p>
                                </div>
                            </div>

                            <!-- ÎèÖÏÑúÎ†àÎ≤® & Ï†êÏàò -->
                            <div class="flex items-center gap-3 mb-4">
                                <div class="level-badge">
                                    <i class="fa-solid fa-trophy"></i>
                                    <span>Lv.5</span>
                                </div>
                                <div class="text-sm">
                                    <span class="text-gray-500">ÎèÖÏÑúÏ†êÏàò</span>
                                    <span class="font-bold text-brand-primary ml-1">898Ï†ê</span>
                                </div>
                            </div>

                            <!-- ÎèÖÏÑú Ï∑®Ìñ• -->
                            <div class="mb-5">
                                <p class="text-xs text-gray-500 mb-2">ÎÇòÏùò ÎèÖÏÑú Ï∑®Ìñ•</p>
                                <div class="taste-badge">
                                    <span>üìö</span>
                                    <span>ÎßåÌôîÍ∞Ä Ï¢ãÏïÑ!</span>
                                </div>
                            </div>

                            <!-- ÏßÑÎèÑ ÏÑ§Ï†ï Î≤ÑÌäºÎì§ -->
                            <div class="space-y-2 mb-5">
                                <button class="setting-btn">
                                    <i class="fa-solid fa-sliders text-blue-500"></i>
                                    <span>Î∂ÅÌÅ¥ÎüΩ ÏßÑÎèÑ ÏÑ§Ï†ï</span>
                                    <i class="fa-solid fa-chevron-right ml-auto text-gray-400"></i>
                                </button>
                                <button class="setting-btn">
                                    <i class="fa-solid fa-sliders text-purple-500"></i>
                                    <span>KRS ÏßÑÎèÑ ÏÑ§Ï†ï</span>
                                    <i class="fa-solid fa-chevron-right ml-auto text-gray-400"></i>
                                </button>
                            </div>

                            <!-- Î≥Ñ Í∞úÏàò -->
                            <div class="star-count mb-4">
                                <span style="font-size:28px;">‚≠ê</span>
                                <div>
                                    <div class="star-count-num">5,788</div>
                                    <div class="star-count-label">ÎÇ¥Í∞Ä Î™®ÏùÄ Î≥Ñ</div>
                                </div>
                            </div>

                            <!-- Ïä§ÌÉÄÏÉµ Î∞îÎ°úÍ∞ÄÍ∏∞ -->
                            <a href="starshop.html" class="starshop-btn">
                                <i class="fa-solid fa-store"></i>
                                <span>Ïä§ÌÉÄÏÉµ Î∞îÎ°úÍ∞ÄÍ∏∞</span>
                            </a>
                        </div>

                        <!-- 2. Ï∂úÏÑù Îã¨Î†• -->
                        <div class="my-card">
                            <h3 class="my-card-title"><i class="fa-solid fa-calendar-check text-green-500"></i> Ï∂úÏÑù</h3>

                            <!-- Îã¨Î†• Ìó§Îçî -->
                            <div class="calendar-header">
                                <span class="calendar-month">2026ÎÖÑ 2Ïõî</span>
                                <div class="calendar-nav">
                                    <button><i class="fa-solid fa-chevron-left"></i></button>
                                    <button><i class="fa-solid fa-chevron-right"></i></button>
                                </div>
                            </div>

                            <!-- ÏöîÏùº -->
                            <div class="calendar-weekdays">
                                <div class="calendar-weekday sun">Ïùº</div>
                                <div class="calendar-weekday">Ïõî</div>
                                <div class="calendar-weekday">Ìôî</div>
                                <div class="calendar-weekday">Ïàò</div>
                                <div class="calendar-weekday">Î™©</div>
                                <div class="calendar-weekday">Í∏à</div>
                                <div class="calendar-weekday sat">ÌÜ†</div>
                            </div>

                            <!-- ÎÇ†Ïßú -->
                            <div class="calendar-days" id="calendar-grid">
                                <!-- JSÎ°ú Î†åÎçîÎßÅ -->
                            </div>

                            <!-- Ï∂úÏÑù ÌÜµÍ≥Ñ -->
                            <div class="attendance-stats">
                                <div class="attendance-stat">
                                    <div class="attendance-stat-num">23</div>
                                    <div class="attendance-stat-label">Ïù¥Î≤à Îã¨ Ï∂úÏÑù</div>
                                </div>
                                <div class="attendance-stat">
                                    <div class="attendance-stat-num" style="color:#10b981;">7</div>
                                    <div class="attendance-stat-label">Ïó∞ÏÜç Ï∂úÏÑù</div>
                                </div>
                                <div class="attendance-stat">
                                    <div class="attendance-stat-num" style="color:#8b5cf6;">156</div>
                                    <div class="attendance-stat-label">Ï¥ù Ï∂úÏÑù</div>
                                </div>
                            </div>
                        </div>

                        <!-- 3. ÎèÖÏÑúÎ°ú ÌÇ§Ïû¨Í∏∞ -->
                        <div class="my-card">
                            <h3 class="my-card-title"><i class="fa-solid fa-ruler-vertical text-amber-500"></i> ÎèÖÏÑúÎ°ú ÌÇ§Ïû¨Í∏∞</h3>

                            <!-- ÌÇ§ Ï∏°Ï†ï ÏãúÍ∞ÅÌôî -->
                            <div class="height-meter">
                                <div class="height-label">
                                    <div class="height-label-title">ÌòÑÏû¨ Î™©Ìëú</div>
                                    <div class="height-label-name">ÏÑ∏Ï¢ÖÎåÄÏôï</div>
                                </div>
                                <div class="height-progress">80%</div>

                                <div class="height-figure">
                                    <div class="height-figure-img">
                                        <div class="height-figure-silhouette">üëë</div>
                                        <div class="height-figure-fill">üëë</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ÏùΩÏùÄ Ï±Ö Ïàò -->
                            <div class="height-books">
                                <div class="height-books-count">1,000Í∂å</div>
                                <div class="height-books-label">Ïó¨ÌÉúÍπåÏßÄ ÏùΩÏùÄ ÎèÑÏÑú!</div>
                            </div>

                            <!-- Îã§Ïùå Î™©Ìëú -->
                            <div class="height-next">
                                <span class="height-next-icon">üóº</span>
                                <div class="height-next-text">
                                    Îã§Ïùå Î™©Ìëú: <span class="height-next-name">ÏóêÌé†ÌÉë</span> (250Í∂å Îçî!)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Î¶¨Ìè¨Ìä∏ ÌÉ≠ ÏΩòÌÖêÏ∏† -->
                <div id="tab-report" class="tab-content hidden">
                    <!-- Ï£ºÍ∞Ñ/ÏõîÍ∞Ñ ÌÜ†Í∏Ä -->
                    <div class="report-toggle">
                        <button class="report-toggle-btn active" data-report="weekly" onclick="switchReportType('weekly')">Ï£ºÍ∞Ñ Î¶¨Ìè¨Ìä∏</button>
                        <button class="report-toggle-btn" data-report="monthly" onclick="switchReportType('monthly')">ÏõîÍ∞Ñ Î¶¨Ìè¨Ìä∏</button>
                    </div>

                    <!-- ===== Ï£ºÍ∞Ñ Î¶¨Ìè¨Ìä∏ ===== -->
                    <div id="report-weekly" class="report-content">
                        <div class="report-period">
                            <strong>2026ÎÖÑ 1Ïõî 4Ï£ºÏ∞®</strong> ¬∑ 1Ïõî 27Ïùº ~ 2Ïõî 2Ïùº
                        </div>

                        <!-- ÌïµÏã¨ ÏßÄÌëú -->
                        <div class="report-stats-grid">
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #fef3c7;">üìö</div>
                                <div class="report-stat-value">12Í∂å</div>
                                <div class="report-stat-label">ÏùΩÏùÄ ÎèÑÏÑú</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> 3Í∂å</div>
                            </div>
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #dbeafe;">‚è±Ô∏è</div>
                                <div class="report-stat-value">4.5h</div>
                                <div class="report-stat-label">ÎèÖÏÑú ÏãúÍ∞Ñ</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> 45Î∂Ñ</div>
                            </div>
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #dcfce7;">‚úÖ</div>
                                <div class="report-stat-value">31Í∞ú</div>
                                <div class="report-stat-label">ÏôÑÎ£å ÌôúÎèô</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> 8Í∞ú</div>
                            </div>
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #fce7f3;">‚≠ê</div>
                                <div class="report-stat-value">248</div>
                                <div class="report-stat-label">ÌöçÎìùÌïú Î≥Ñ</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> 58Í∞ú</div>
                            </div>
                        </div>

                        <!-- ÌôúÎèôÎ≥Ñ Ï∞∏Ïó¨ ÌòÑÌô© -->
                        <div class="report-card">
                            <h3 class="report-card-title">
                                <i class="fa-solid fa-chart-bar" style="color: #3b82f6;"></i>
                                ÌôúÎèôÎ≥Ñ Ï∞∏Ïó¨
                            </h3>
                            <div class="report-bar-list">
                                <div class="report-bar-item">
                                    <div class="report-bar-label">ÏßàÎ¨∏Î†åÏ¶à</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 85%; background: linear-gradient(90deg, #f97316, #fb923c);">6Ìöå</div>
                                    </div>
                                </div>
                                <div class="report-bar-item">
                                    <div class="report-bar-label">ÏòÅÏÉÅÎ¶¨ÌÖîÎßÅ</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 70%; background: linear-gradient(90deg, #8b5cf6, #a78bfa);">5Ìöå</div>
                                    </div>
                                </div>
                                <div class="report-bar-item">
                                    <div class="report-bar-label">ÎèÖÏÑúÌÜ†Î°†</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 55%; background: linear-gradient(90deg, #10b981, #34d399);">4Ìöå</div>
                                    </div>
                                </div>
                                <div class="report-bar-item">
                                    <div class="report-bar-label">Ïñ¥ÌúòÏ±åÎ¶∞ÏßÄ</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 100%; background: linear-gradient(90deg, #3b82f6, #60a5fa);">8Ìöå</div>
                                    </div>
                                </div>
                                <div class="report-bar-item">
                                    <div class="report-bar-label">ÎèÖÌõÑÌÄ¥Ï¶à</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 100%; background: linear-gradient(90deg, #ec4899, #f472b6);">8Ìöå</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ïù¥Î≤à Ï£º ÌïòÏù¥ÎùºÏù¥Ìä∏ -->
                        <div class="report-card">
                            <h3 class="report-card-title">
                                <i class="fa-solid fa-star" style="color: #f59e0b;"></i>
                                Ïù¥Î≤à Ï£º ÌïòÏù¥ÎùºÏù¥Ìä∏
                            </h3>
                            <div class="report-highlight-list">
                                <div class="report-highlight-item">
                                    <div class="report-highlight-icon" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">üèÜ</div>
                                    <div class="report-highlight-info">
                                        <div class="report-highlight-title">Ïñ¥ÌúòÏôï Îã¨ÏÑ±!</div>
                                        <div class="report-highlight-desc">Ïñ¥ÌúòÏ±åÎ¶∞ÏßÄ 8Ìöå Ïó∞ÏÜç ÏôÑÎ£å</div>
                                    </div>
                                    <div class="report-highlight-badge" style="background: #fef3c7; color: #d97706;">+50‚≠ê</div>
                                </div>
                                <div class="report-highlight-item">
                                    <div class="report-highlight-icon" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe);">üìñ</div>
                                    <div class="report-highlight-info">
                                        <div class="report-highlight-title">Îã§ÎèÖÍ∞Ä Î±ÉÏßÄ ÌöçÎìù</div>
                                        <div class="report-highlight-desc">Ïù¥Î≤à Ï£º 12Í∂å ÎèÖÏÑú ÏôÑÎ£å</div>
                                    </div>
                                    <div class="report-highlight-badge" style="background: #dbeafe; color: #2563eb;">New!</div>
                                </div>
                                <div class="report-highlight-item">
                                    <div class="report-highlight-icon" style="background: linear-gradient(135deg, #dcfce7, #bbf7d0);">üí¨</div>
                                    <div class="report-highlight-info">
                                        <div class="report-highlight-title">ÌÜ†Î°† Î≤†Ïä§Ìä∏ ÏùòÍ≤¨</div>
                                        <div class="report-highlight-desc">"Ïò§Ï¶àÏùò ÎßàÎ≤ïÏÇ¨" ÌÜ†Î°†ÏóêÏÑú ÏÑ†Ï†ï</div>
                                    </div>
                                    <div class="report-highlight-badge" style="background: #dcfce7; color: #16a34a;">+30‚≠ê</div>
                                </div>
                            </div>
                        </div>

                        <!-- ÌöçÎìù Î±ÉÏßÄ -->
                        <div class="report-card">
                            <h3 class="report-card-title">
                                <i class="fa-solid fa-medal" style="color: #8b5cf6;"></i>
                                ÌöçÎìù Î±ÉÏßÄ
                            </h3>
                            <div class="report-badge-list">
                                <div class="report-badge"><span class="report-badge-icon">üìö</span><span class="report-badge-text">Îã§ÎèÖÍ∞Ä</span></div>
                                <div class="report-badge"><span class="report-badge-icon">üî•</span><span class="report-badge-text">7Ïùº Ïó∞ÏÜçÏ∂úÏÑù</span></div>
                                <div class="report-badge"><span class="report-badge-icon">üí°</span><span class="report-badge-text">ÏßàÎ¨∏ÎßàÏä§ÌÑ∞</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- ===== ÏõîÍ∞Ñ Î¶¨Ìè¨Ìä∏ ===== -->
                    <div id="report-monthly" class="report-content hidden">
                        <div class="report-period">
                            <strong>2026ÎÖÑ 1Ïõî</strong> ¬∑ ÏõîÍ∞Ñ Ï¢ÖÌï© Î¶¨Ìè¨Ìä∏
                        </div>

                        <!-- ÎèÖÏÑúÎ†• & Î†àÎ≤® -->
                        <div class="report-power-grid">
                            <!-- ÎèÖÏÑú Ï†ÑÌà¨Î†• -->
                            <div class="report-power-card">
                                <div class="report-power-gauge">
                                    <svg viewBox="0 0 100 100" width="120" height="120">
                                        <circle cx="50" cy="50" r="42" fill="none" stroke="#fed7aa" stroke-width="10"/>
                                        <circle cx="50" cy="50" r="42" fill="none" stroke="url(#powerGradient)" stroke-width="10"
                                                stroke-linecap="round" stroke-dasharray="264" stroke-dashoffset="56"/>
                                        <defs>
                                            <linearGradient id="powerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                                <stop offset="0%" stop-color="#f97316"/>
                                                <stop offset="100%" stop-color="#fbbf24"/>
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                    <div class="report-power-center">
                                        <span class="report-power-score">898</span>
                                        <span class="report-power-unit">Ï†ê</span>
                                    </div>
                                </div>
                                <div class="report-power-info">
                                    <h4>ÎèÖÏÑú Ï†ÑÌà¨Î†•</h4>
                                    <span class="report-power-rank">üèÜ ÏÉÅÏúÑ 12%</span>
                                    <p style="font-size:12px; color:#6b7280; margin-top:8px;">ÏßÄÎÇúÎã¨ ÎåÄÎπÑ +124Ï†ê</p>
                                </div>
                            </div>
                            <!-- Î†àÎ≤® Ï†ïÎ≥¥ -->
                            <div class="report-level-card">
                                <div class="report-level-badge">
                                    <span class="report-level-num">5</span>
                                    <span class="report-level-label">Level</span>
                                </div>
                                <div class="report-level-info">
                                    <h4>Lv.5 ‚Üí Lv.6 ÏßÑÌñâ Ï§ë</h4>
                                    <div class="report-level-bar">
                                        <div class="report-level-fill" style="width: 78%;"></div>
                                    </div>
                                    <span class="report-level-text">Î†àÎ≤®ÏóÖÍπåÏßÄ ÏïΩ 2Ï£º ÎÇ®Ïùå</span>
                                </div>
                            </div>
                        </div>

                        <!-- ÌïµÏã¨ ÏßÄÌëú -->
                        <div class="report-stats-grid">
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #fef3c7;">üìö</div>
                                <div class="report-stat-value">45Í∂å</div>
                                <div class="report-stat-label">ÏùΩÏùÄ ÎèÑÏÑú</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> +12</div>
                            </div>
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #dbeafe;">‚è±Ô∏è</div>
                                <div class="report-stat-value">18.4h</div>
                                <div class="report-stat-label">ÎèÖÏÑú ÏãúÍ∞Ñ</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> +3h</div>
                            </div>
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #dcfce7;">üìà</div>
                                <div class="report-stat-value">92%</div>
                                <div class="report-stat-label">ÌÄ¥Ï¶à Ï†ïÎãµÎ•†</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> +5%</div>
                            </div>
                            <div class="report-stat-item">
                                <div class="report-stat-icon" style="background: #fce7f3;">‚≠ê</div>
                                <div class="report-stat-value">1,024</div>
                                <div class="report-stat-label">ÌöçÎìùÌïú Î≥Ñ</div>
                                <div class="report-stat-change up"><i class="fa-solid fa-arrow-up"></i> +256</div>
                            </div>
                        </div>

                        <!-- Îä•Î†• Î∂ÑÏÑù -->
                        <div class="report-card">
                            <h3 class="report-card-title">
                                <i class="fa-solid fa-brain" style="color: #8b5cf6;"></i>
                                ÎèÖÏÑú Îä•Î†• Î∂ÑÏÑù
                            </h3>
                            <div class="report-ability-chart">
                                <svg viewBox="-30 -10 260 220" width="280" height="220">
                                    <polygon points="100,20 175,60 175,140 100,180 25,140 25,60" fill="none" stroke="#e5e7eb" stroke-width="1"/>
                                    <polygon points="100,50 150,75 150,125 100,150 50,125 50,75" fill="none" stroke="#e5e7eb" stroke-width="1"/>
                                    <polygon points="100,80 125,90 125,110 100,120 75,110 75,90" fill="none" stroke="#e5e7eb" stroke-width="1"/>
                                    <polygon points="100,35 160,70 145,130 100,155 55,130 40,70" fill="rgba(139, 92, 246, 0.15)" stroke="#8b5cf6" stroke-width="2"/>
                                    <text x="100" y="10" text-anchor="middle" style="font-size:11px; font-weight:600; fill:#374151;">Ïù¥Ìï¥Î†•</text>
                                    <text x="185" y="60" text-anchor="start" style="font-size:11px; font-weight:600; fill:#374151;">Ï∂îÎ°†</text>
                                    <text x="185" y="150" text-anchor="start" style="font-size:11px; font-weight:600; fill:#374151;">Ïñ¥Ìúò</text>
                                    <text x="100" y="200" text-anchor="middle" style="font-size:11px; font-weight:600; fill:#374151;">ÌëúÌòÑ</text>
                                    <text x="15" y="150" text-anchor="end" style="font-size:11px; font-weight:600; fill:#374151;">Ï∞ΩÏùò</text>
                                    <text x="15" y="60" text-anchor="end" style="font-size:11px; font-weight:600; fill:#374151;">Í∏∞Ïñµ</text>
                                </svg>
                            </div>
                            <div class="report-ability-summary">
                                ‚ú® <b>Ïù¥Ìï¥Î†•</b>Í≥º <b>Ï∂îÎ°† Îä•Î†•</b>Ïù¥ Îõ∞Ïñ¥ÎÇòÏöî! Ï∞ΩÏùòÎ†•ÏùÑ Îçî ÌÇ§ÏõåÎ≥¥ÏÑ∏Ïöî.
                            </div>
                        </div>

                        <!-- Ï£ºÏ∞®Î≥Ñ ÎèÖÏÑúÎüâ -->
                        <div class="report-card">
                            <h3 class="report-card-title">
                                <i class="fa-solid fa-chart-line" style="color: #3b82f6;"></i>
                                Ï£ºÏ∞®Î≥Ñ ÎèÖÏÑúÎüâ
                            </h3>
                            <div class="report-bar-list">
                                <div class="report-bar-item">
                                    <div class="report-bar-label">1Ï£ºÏ∞®</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 75%; background: linear-gradient(90deg, #FF9F43, #fbbf24);">9Í∂å</div>
                                    </div>
                                </div>
                                <div class="report-bar-item">
                                    <div class="report-bar-label">2Ï£ºÏ∞®</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 100%; background: linear-gradient(90deg, #FF9F43, #fbbf24);">12Í∂å</div>
                                    </div>
                                </div>
                                <div class="report-bar-item">
                                    <div class="report-bar-label">3Ï£ºÏ∞®</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 100%; background: linear-gradient(90deg, #FF9F43, #fbbf24);">12Í∂å</div>
                                    </div>
                                </div>
                                <div class="report-bar-item">
                                    <div class="report-bar-label">4Ï£ºÏ∞®</div>
                                    <div class="report-bar-track">
                                        <div class="report-bar-fill" style="width: 100%; background: linear-gradient(90deg, #FF9F43, #fbbf24);">12Í∂å</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Î≤ÑÎîî ÏΩîÏπ≠ -->
                        <div class="report-ai-card">
                            <div class="report-ai-header">
                                <div class="report-ai-avatar">üêøÔ∏è</div>
                                <div class="report-ai-name">AI Î≤ÑÎîîÏùò ÌïúÎßàÎîî</div>
                            </div>
                            <p class="report-ai-message">
                                <b>ÏôÄÏö∞!</b> Ïù¥Î≤à Îã¨ ÎèÖÏÑúÎüâÏù¥ Ï†ïÎßê ÎßéÏù¥ ÎäòÏóàÏñ¥Ïöî!
                                ÌäπÌûà <b>Í≥ºÌïô Î∂ÑÏïº</b>Ïóê Í¥ÄÏã¨Ïù¥ ÎßéÎÑ§Ïöî.
                                Îã§Ïùå Îã¨Ïóî <b>Ïó≠ÏÇ¨Ï±Ö</b>ÎèÑ ÎèÑÏ†ÑÌï¥Î≥ºÍπåÏöî? üöÄ
                            </p>
                        </div>

                        <!-- ÏõîÍ∞Ñ ÏÑ±Ï∑® & Î±ÉÏßÄ -->
                        <div class="report-card" style="margin-top: 20px;">
                            <h3 class="report-card-title">
                                <i class="fa-solid fa-trophy" style="color: #f59e0b;"></i>
                                1Ïõî ÏÑ±Ï∑®
                            </h3>
                            <div class="report-highlight-list">
                                <div class="report-highlight-item">
                                    <div class="report-highlight-icon" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">üéØ</div>
                                    <div class="report-highlight-info">
                                        <div class="report-highlight-title">ÏõîÍ∞Ñ Î™©Ìëú Îã¨ÏÑ±!</div>
                                        <div class="report-highlight-desc">Î™©Ìëú 30Í∂å Ï§ë 45Í∂å ÏôÑÎ£å (150%)</div>
                                    </div>
                                    <div class="report-highlight-badge" style="background: #fef3c7; color: #d97706;">üèÜ</div>
                                </div>
                                <div class="report-highlight-item">
                                    <div class="report-highlight-icon" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe);">üî•</div>
                                    <div class="report-highlight-info">
                                        <div class="report-highlight-title">23Ïùº Ï∂úÏÑù</div>
                                        <div class="report-highlight-desc">Ï∂úÏÑùÎ•† 74%</div>
                                    </div>
                                    <div class="report-highlight-badge" style="background: #dbeafe; color: #2563eb;">Good!</div>
                                </div>
                            </div>
                        </div>

                        <div class="report-card">
                            <h3 class="report-card-title">
                                <i class="fa-solid fa-medal" style="color: #8b5cf6;"></i>
                                1Ïõî ÌöçÎìù Î±ÉÏßÄ
                            </h3>
                            <div class="report-badge-list">
                                <div class="report-badge"><span class="report-badge-icon">üìö</span><span class="report-badge-text">Îã§ÎèÖÍ∞Ä</span></div>
                                <div class="report-badge"><span class="report-badge-icon">üéØ</span><span class="report-badge-text">Î™©ÌëúÎã¨ÏÑ±Ïôï</span></div>
                                <div class="report-badge"><span class="report-badge-icon">üí°</span><span class="report-badge-text">ÏßàÎ¨∏ÎßàÏä§ÌÑ∞</span></div>
                                <div class="report-badge"><span class="report-badge-icon">üî•</span><span class="report-badge-text">Ïó∞ÏÜçÏ∂úÏÑù7Ïùº</span></div>
                                <div class="report-badge"><span class="report-badge-icon">‚≠ê</span><span class="report-badge-text">1000Ïä§ÌÉÄ</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÎÇ¥ Ï±ÖÏû• ÌÉ≠ ÏΩòÌÖêÏ∏† -->
                <div id="tab-bookshelf" class="tab-content hidden">
                    <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ ÌÉ≠ -->
                    <div class="bookshelf-tabs">
                        <button class="bookshelf-tab active" data-shelf="reading" onclick="switchBookshelfTab('reading')">
                            üìñ ÏùΩÎäî Ï§ë <span class="count" id="count-reading">3</span>
                        </button>
                        <button class="bookshelf-tab" data-shelf="completed" onclick="switchBookshelfTab('completed')">
                            ‚úÖ Îã§ ÏùΩÏùÄ Ï±Ö <span class="count" id="count-completed">45</span>
                        </button>
                        <button class="bookshelf-tab" data-shelf="favorites" onclick="switchBookshelfTab('favorites')">
                            üíõ Ï∞úÌïú ÎèÑÏÑú <span class="count" id="count-favorites">0</span>
                        </button>
                        <button class="bookshelf-tab" data-shelf="recent" onclick="switchBookshelfTab('recent')">
                            üïê ÏµúÍ∑º Î≥∏ ÎèÑÏÑú <span class="count" id="count-recent">0</span>
                        </button>
                        <button class="bookshelf-tab" data-shelf="offline" onclick="switchBookshelfTab('offline')">
                            üìö Ïö∞Î¶¨ ÏïÑÏù¥ Ï±ÖÏû• <span class="count" id="count-offline">12</span>
                        </button>
                    </div>

                    <!-- Ï±ÖÏû• ÏΩòÌÖêÏ∏† -->
                    <div id="bookshelf-content">
                        <!-- JSÎ°ú Î†åÎçîÎßÅ -->
                    </div>
                </div>
                <div id="tab-gallery" class="tab-content hidden">
                    <!-- Í∞§Îü¨Î¶¨ ÏÑúÎ∏åÌÉ≠ -->
                    <div class="gallery-subtabs">
                        <button class="gallery-subtab active" data-gtab="my" onclick="switchGalleryTab('my')">
                            <i class="fa-solid fa-palette"></i> ÎÇ¥ ÏûëÌíà
                        </button>
                        <button class="gallery-subtab" data-gtab="friends" onclick="switchGalleryTab('friends')">
                            <i class="fa-solid fa-users"></i> ÏπúÍµ¨ ÏûëÌíà
                        </button>
                        <button class="gallery-subtab" data-gtab="following" onclick="switchGalleryTab('following')">
                            <i class="fa-solid fa-heart"></i> Í¥ÄÏã¨ÏπúÍµ¨
                        </button>
                    </div>

                    <!-- ÎÇ¥ ÏûëÌíà ÌÉ≠ -->
                    <div id="gtab-my" class="gallery-content">
                        <!-- ÌïÑÌÑ∞ Ïπ© -->
                        <div class="gallery-filters">
                            <button class="gallery-filter active" data-filter="all" onclick="filterGallery('all')">Ï†ÑÏ≤¥</button>
                            <button class="gallery-filter" data-filter="review" onclick="filterGallery('review')">‚úèÔ∏è Í∞êÏÉÅÎ¨∏</button>
                            <button class="gallery-filter" data-filter="audiobook" onclick="filterGallery('audiobook')">üé§ Ïò§ÎîîÏò§Î∂Å</button>
                            <button class="gallery-filter" data-filter="video" onclick="filterGallery('video')">üé¨ ÎèôÏòÅÏÉÅ</button>
                            <button class="gallery-filter" data-filter="diary" onclick="filterGallery('diary')">üìñ ÏùºÍ∏∞</button>
                        </div>
                        <!-- Ï†ïÎ†¨ -->
                        <div class="flex items-center justify-between mb-3">
                            <p class="text-xs text-gray-400">Ï¥ù <strong class="text-gray-600">24</strong>Í∞ú ÏûëÌíà</p>
                            <div class="flex items-center gap-2 text-xs">
                                <button class="gallery-sort active" data-sort="recent">ÏµúÏã†Ïàú</button>
                                <span class="text-gray-300">|</span>
                                <button class="gallery-sort" data-sort="likes">Ï¢ãÏïÑÏöîÏàú</button>
                            </div>
                        </div>
                        <!-- Í∑∏Î¶¨Îìú -->
                        <div class="gallery-grid" id="my-gallery-grid">
                            <!-- JSÎ°ú Î†åÎçîÎßÅ -->
                        </div>
                    </div>

                    <!-- ÏπúÍµ¨ ÏûëÌíà ÌÉ≠ -->
                    <div id="gtab-friends" class="gallery-content hidden">
                        <div class="text-xs text-gray-400 mb-3"><strong class="text-gray-600">Í¥ÄÏã¨ÏπúÍµ¨ ÏûëÌíà</strong>Ïù¥ Î®ºÏ†Ä Î≥¥Ïó¨Ïöî</div>
                        <div class="gallery-feed" id="friends-gallery-feed">
                            <!-- JSÎ°ú Î†åÎçîÎßÅ -->
                        </div>
                    </div>

                    <!-- Í¥ÄÏã¨ÏπúÍµ¨ ÌÉ≠ -->
                    <div id="gtab-following" class="gallery-content hidden">
                        <!-- ÎÇ¥Í∞Ä Í¥ÄÏã¨+Ìïú ÏπúÍµ¨ -->
                        <div class="mb-5">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="text-sm font-bold text-gray-700">
                                    <i class="fa-solid fa-heart text-rose-400 mr-1"></i> ÎÇ¥Í∞Ä Í¥ÄÏã¨+Ìïú ÏπúÍµ¨
                                </h4>
                                <span class="text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full font-bold">3Î™Ö</span>
                            </div>
                            <div class="space-y-2" id="following-list">
                                <!-- JSÎ°ú Î†åÎçîÎßÅ -->
                            </div>
                        </div>
                        <div class="border-t border-gray-100 my-4"></div>
                        <!-- ÎÇòÎ•º Í¥ÄÏã¨+Ìïú ÏπúÍµ¨ -->
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="text-sm font-bold text-gray-700">
                                    <i class="fa-solid fa-star text-amber-400 mr-1"></i> ÎÇòÎ•º Í¥ÄÏã¨+Ìïú ÏπúÍµ¨
                                </h4>
                                <span class="text-xs bg-amber-100 text-amber-600 px-2 py-0.5 rounded-full font-bold">5Î™Ö</span>
                            </div>
                            <div class="space-y-2" id="followers-list">
                                <!-- JSÎ°ú Î†åÎçîÎßÅ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ÌîÑÎ°úÌïÑ Î≥ÄÍ≤Ω Î™®Îã¨ -->
    <div class="profile-modal" id="profile-modal">
        <div class="profile-modal-content">
            <h3 class="profile-modal-title">ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î≥ÄÍ≤Ω</h3>
            <div class="profile-options">
                <div class="profile-option selected" data-emoji="üòé">üòé</div>
                <div class="profile-option" data-emoji="ü¶ä">ü¶ä</div>
                <div class="profile-option" data-emoji="üê±">üê±</div>
                <div class="profile-option" data-emoji="üê∂">üê∂</div>
                <div class="profile-option" data-emoji="üê∞">üê∞</div>
                <div class="profile-option" data-emoji="üêª">üêª</div>
                <div class="profile-option" data-emoji="ü¶Å">ü¶Å</div>
                <div class="profile-option" data-emoji="üê∏">üê∏</div>
                <div class="profile-option" data-emoji="üêº">üêº</div>
                <div class="profile-option" data-emoji="üê®">üê®</div>
                <div class="profile-option" data-emoji="üêØ">üêØ</div>
                <div class="profile-option" data-emoji="ü¶Ñ">ü¶Ñ</div>
            </div>
            <div>
                <button class="profile-modal-close" onclick="closeProfileModal()">Ï∑®ÏÜå</button>
                <button class="profile-modal-save" onclick="saveProfile()">Ï†ÄÏû•</button>
            </div>
        </div>
    </div>

    <!-- Logout Modal Container -->
    <div id="logout-modal-container"></div>

    <!-- Scripts -->
    <script src="../js/common.js"></script>
    <script src="../js/sidebar.js"></script>

    <script>
        // === ÌÉ≠ Ï†ÑÌôò ===
        const tabs = document.querySelectorAll('.mypage-tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Ïô∏Î∂Ä ÎßÅÌÅ¨(<a> ÌÉúÍ∑∏)Îäî Í∏∞Î≥∏ ÎèôÏûë ÏÇ¨Ïö©
                if (tab.tagName === 'A') return;

                // ÌôúÏÑ± ÌÉ≠ Î≥ÄÍ≤Ω
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                // ÏΩòÌÖêÏ∏† Ï†ÑÌôò
                document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
                document.getElementById('tab-' + tab.dataset.tab).classList.remove('hidden');
            });
        });

        // === ÌîÑÎ°úÌïÑ Î™®Îã¨ ===
        let selectedEmoji = 'üòé';

        function openProfileModal() {
            document.getElementById('profile-modal').classList.add('show');
        }

        function closeProfileModal() {
            document.getElementById('profile-modal').classList.remove('show');
        }

        // ÌîÑÎ°úÌïÑ ÏòµÏÖò ÏÑ†ÌÉù
        document.querySelectorAll('.profile-option').forEach(opt => {
            opt.addEventListener('click', () => {
                document.querySelectorAll('.profile-option').forEach(o => o.classList.remove('selected'));
                opt.classList.add('selected');
                selectedEmoji = opt.dataset.emoji;
            });
        });

        function saveProfile() {
            document.getElementById('profile-emoji').textContent = selectedEmoji;
            closeProfileModal();
        }

        // Î™®Îã¨ Î∞îÍπ• ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
        document.getElementById('profile-modal').addEventListener('click', (e) => {
            if (e.target.id === 'profile-modal') {
                closeProfileModal();
            }
        });

        // === Ï∂úÏÑù Îã¨Î†• Î†åÎçîÎßÅ ===
        function renderCalendar() {
            const grid = document.getElementById('calendar-grid');
            const year = 2026;
            const month = 2; // 2Ïõî

            // 2026ÎÖÑ 2Ïõî 1ÏùºÏùÄ ÏùºÏöîÏùº
            const firstDay = new Date(year, month - 1, 1).getDay();
            const daysInMonth = new Date(year, month, 0).getDate();
            const today = 4; // Ïò§ÎäòÏù¥ 4Ïùº

            // Ï∂úÏÑùÌïú ÎÇ† (ÏòàÏãú)
            const stampedDays = [1, 2, 3]; // 1, 2, 3Ïùº Ï∂úÏÑù

            let html = '';

            // Îπà Ïπ∏ (Ïõî ÏãúÏûë Ï†Ñ)
            for (let i = 0; i < firstDay; i++) {
                html += '<div class="calendar-day empty"></div>';
            }

            // ÎÇ†Ïßú
            for (let d = 1; d <= daysInMonth; d++) {
                let classes = 'calendar-day';
                let content = `<span class="day-num">${d}</span>`;

                if (stampedDays.includes(d)) {
                    classes += ' stamped';
                    content = `<span class="stamp-icon">üî•</span><span class="day-num">${d}</span>`;
                } else if (d === today) {
                    classes += ' today';
                } else if (d > today) {
                    classes += ' future';
                }

                html += `<div class="${classes}">${content}</div>`;
            }

            grid.innerHTML = html;
        }

        // === Î¶¨Ìè¨Ìä∏ ÌÉ≠ Ï†ÑÌôò ===
        function switchReportType(type) {
            // Î≤ÑÌäº ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            document.querySelectorAll('.report-toggle-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.report === type);
            });
            // ÏΩòÌÖêÏ∏† Ï†ÑÌôò
            document.querySelectorAll('.report-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById('report-' + type).classList.remove('hidden');
        }

        // === ÎÇ¥ Ï±ÖÏû• ÌÉ≠ Ï†ÑÌôò ===
        let currentBookshelfTab = 'reading';

        function switchBookshelfTab(tab) {
            currentBookshelfTab = tab;
            // Î≤ÑÌäº ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            document.querySelectorAll('.bookshelf-tab').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.shelf === tab);
            });
            renderBookshelf();
        }

        // Ï±ÖÏû• Îç∞Ïù¥ÌÑ∞ (ÏùΩÎäî Ï§ë, Îã§ ÏùΩÏùÄ Ï±ÖÏùÄ ÏÉòÌîå Îç∞Ïù¥ÌÑ∞)
        const readingBooks = [
            { id: 'book1', title: 'Ïò§Ï¶àÏùò ÎßàÎ≤ïÏÇ¨', genre: 'ÏÑ∏Í≥ÑÎ™ÖÏûë', bg: 'bg-gradient-to-br from-emerald-100 to-teal-200', emoji: 'üßô', progress: 65 },
            { id: 'book2', title: 'Ïù¥ÏÉÅÌïú ÎÇòÎùºÏùò Ïï®Î¶¨Ïä§', genre: 'ÏÑ∏Í≥ÑÎ™ÖÏûë', bg: 'bg-gradient-to-br from-purple-100 to-pink-200', emoji: 'üê∞', progress: 30 },
            { id: 'book3', title: 'ÌîºÌÑ∞Ìå¨', genre: 'ÏÑ∏Í≥ÑÎ™ÖÏûë', bg: 'bg-gradient-to-br from-blue-100 to-cyan-200', emoji: 'üßö', progress: 80 }
        ];

        const completedBooks = [
            { id: 'book4', title: 'Î∞±ÏÑ§Í≥µÏ£º', genre: 'ÏÑ∏Í≥ÑÎ™ÖÏûë', bg: 'bg-gradient-to-br from-red-100 to-rose-200', emoji: 'üçé' },
            { id: 'book5', title: 'Ïã†Îç∞Î†êÎùº', genre: 'ÏÑ∏Í≥ÑÎ™ÖÏûë', bg: 'bg-gradient-to-br from-blue-100 to-indigo-200', emoji: 'üë†' },
            { id: 'book6', title: 'Ïù∏Ïñ¥Í≥µÏ£º', genre: 'ÏÑ∏Í≥ÑÎ™ÖÏûë', bg: 'bg-gradient-to-br from-teal-100 to-cyan-200', emoji: 'üßú' },
            { id: 'book7', title: 'Ìù•Î∂ÄÏôÄ ÎÜÄÎ∂Ä', genre: 'Ï†ÑÎûòÎèôÌôî', bg: 'bg-gradient-to-br from-amber-100 to-yellow-200', emoji: 'üê¶' },
            { id: 'book8', title: 'ÏΩ©Ï•ê Ìå•Ï•ê', genre: 'Ï†ÑÎûòÎèôÌôî', bg: 'bg-gradient-to-br from-pink-100 to-rose-200', emoji: 'ü•ø' },
            { id: 'book9', title: 'Ìï¥ÏôÄ Îã¨Ïù¥ Îêú Ïò§ÎàÑÏù¥', genre: 'Ï†ÑÎûòÎèôÌôî', bg: 'bg-gradient-to-br from-orange-100 to-red-200', emoji: 'üåô' }
        ];

        // Ïö∞Î¶¨ ÏïÑÏù¥ Ï±ÖÏû• (Ïò§ÌîÑÎùºÏù∏ ÎèÑÏÑú)
        const offlineBooks = [
            { id: 'off1', title: 'Í∑∏Î¶¨Ïä§ Î°úÎßà Ïã†Ìôî 1', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-amber-100 to-orange-200', emoji: '‚ö°' },
            { id: 'off2', title: 'Í∑∏Î¶¨Ïä§ Î°úÎßà Ïã†Ìôî 2', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-amber-100 to-orange-200', emoji: 'üî±' },
            { id: 'off3', title: 'ÎßàÎ≤ïÏ≤úÏûêÎ¨∏ 1', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-red-100 to-pink-200', emoji: 'üêâ' },
            { id: 'off4', title: 'ÎßàÎ≤ïÏ≤úÏûêÎ¨∏ 2', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-red-100 to-pink-200', emoji: 'üî•' },
            { id: 'off5', title: 'ÏÑ§ÎØºÏÑùÏùò ÌïúÍµ≠ÏÇ¨ ÎåÄÎ™®Ìóò 1', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-blue-100 to-indigo-200', emoji: 'üèØ' },
            { id: 'off6', title: 'ÏÑ§ÎØºÏÑùÏùò ÌïúÍµ≠ÏÇ¨ ÎåÄÎ™®Ìóò 2', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-blue-100 to-indigo-200', emoji: '‚öîÔ∏è' },
            { id: 'off7', title: 'ÌùîÌïúÎÇ®Îß§ 1', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-yellow-100 to-lime-200', emoji: 'üòÇ' },
            { id: 'off8', title: 'ÌùîÌïúÎÇ®Îß§ 2', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-yellow-100 to-lime-200', emoji: 'ü§£' },
            { id: 'off9', title: 'Ïø†ÌÇ§Îü∞ ÌÇπÎç§ 1', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-purple-100 to-violet-200', emoji: 'üç™' },
            { id: 'off10', title: 'Ïø†ÌÇ§Îü∞ ÌÇπÎç§ 2', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-purple-100 to-violet-200', emoji: 'üëë' },
            { id: 'off11', title: 'ÏΩîÎØπ Î©îÏù¥ÌîåÏä§ÌÜ†Î¶¨ 1', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-green-100 to-emerald-200', emoji: 'üçÅ' },
            { id: 'off12', title: 'ÏΩîÎØπ Î©îÏù¥ÌîåÏä§ÌÜ†Î¶¨ 2', genre: 'Ïò§ÌîÑÎùºÏù∏', bg: 'bg-gradient-to-br from-green-100 to-emerald-200', emoji: 'üéÆ' }
        ];

        function renderBookshelf() {
            const container = document.getElementById('bookshelf-content');
            let books = [];
            let emptyMsg = '';
            let emptyIcon = '';

            switch (currentBookshelfTab) {
                case 'reading':
                    books = readingBooks;
                    emptyIcon = 'üìñ';
                    emptyMsg = 'ÌòÑÏû¨ ÏùΩÍ≥† ÏûàÎäî Ï±ÖÏù¥ ÏóÜÏñ¥Ïöî.<br>ÎùºÏù¥Î∏åÎü¨Î¶¨ÏóêÏÑú Ï±ÖÏùÑ Í≥®ÎùºÎ≥¥ÏÑ∏Ïöî!';
                    break;
                case 'completed':
                    books = completedBooks;
                    emptyIcon = '‚úÖ';
                    emptyMsg = 'ÏïÑÏßÅ Îã§ ÏùΩÏùÄ Ï±ÖÏù¥ ÏóÜÏñ¥Ïöî.<br>Ï≤´ Î≤àÏß∏ Ï±ÖÏùÑ ÏôÑÎèÖÌï¥Î≥¥ÏÑ∏Ïöî!';
                    break;
                case 'favorites':
                    // sessionStorageÏóêÏÑú Ï∞úÌïú ÎèÑÏÑú Í∞ÄÏ†∏Ïò§Í∏∞ (book-library.htmlÍ≥º ÎèôÍ∏∞Ìôî)
                    books = JSON.parse(sessionStorage.getItem('favoriteBooks') || '[]');
                    emptyIcon = 'üíõ';
                    emptyMsg = 'Ï∞úÌïú ÎèÑÏÑúÍ∞Ä ÏóÜÏñ¥Ïöî.<br>ÎùºÏù¥Î∏åÎü¨Î¶¨ÏóêÏÑú ÎßàÏùåÏóê ÎìúÎäî ÎèÑÏÑúÎ•º Ï∞úÌï¥Î≥¥ÏÑ∏Ïöî!';
                    break;
                case 'recent':
                    // sessionStorageÏóêÏÑú ÏµúÍ∑º Î≥∏ ÎèÑÏÑú Í∞ÄÏ†∏Ïò§Í∏∞ (book-library.htmlÍ≥º ÎèôÍ∏∞Ìôî)
                    books = JSON.parse(sessionStorage.getItem('recentBooks') || '[]');
                    emptyIcon = 'üïê';
                    emptyMsg = 'ÏµúÍ∑º Î≥∏ ÎèÑÏÑúÍ∞Ä ÏóÜÏñ¥Ïöî.<br>ÎùºÏù¥Î∏åÎü¨Î¶¨ÏóêÏÑú Ï±ÖÏùÑ ÎëòÎü¨Î≥¥ÏÑ∏Ïöî!';
                    break;
                case 'offline':
                    books = offlineBooks;
                    emptyIcon = 'üìö';
                    emptyMsg = 'Îì±Î°ùÎêú Ïò§ÌîÑÎùºÏù∏ ÎèÑÏÑúÍ∞Ä ÏóÜÏñ¥Ïöî.';
                    break;
            }

            // Ïπ¥Ïö¥Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('count-favorites').textContent = JSON.parse(sessionStorage.getItem('favoriteBooks') || '[]').length;
            document.getElementById('count-recent').textContent = JSON.parse(sessionStorage.getItem('recentBooks') || '[]').length;

            if (books.length === 0) {
                container.innerHTML = `
                    <div class="bookshelf-grid">
                        <div class="bookshelf-empty">
                            <div class="bookshelf-empty-icon">${emptyIcon}</div>
                            <div class="bookshelf-empty-text">${emptyMsg}</div>
                            <a href="book-library.html" class="bookshelf-go-library">
                                <i class="fa-solid fa-layer-group"></i> ÎùºÏù¥Î∏åÎü¨Î¶¨ Í∞ÄÍ∏∞
                            </a>
                        </div>
                    </div>
                `;
                return;
            }

            const bookCards = books.map(book => {
                const progressBar = book.progress ? `
                    <div class="bookshelf-book-progress">
                        <div class="bookshelf-book-progress-fill" style="width: ${book.progress}%;"></div>
                    </div>
                ` : '';

                const badge = book.progress ? `<div class="bookshelf-book-badge">${book.progress}%</div>` : '';

                // bg ÌÅ¥ÎûòÏä§ ÎòêÎäî Í∏∞Î≥∏ ÏÉâÏÉÅ Ï≤òÎ¶¨
                const bgClass = book.bg || 'bg-gradient-to-br from-gray-100 to-gray-200';
                const emoji = book.emoji || 'üìï';

                return `
                    <div class="bookshelf-book" onclick="openBookFromShelf('${book.id}', '${(book.genre || '').replace(/'/g, "\\'")}')">
                        <div class="bookshelf-book-cover ${bgClass}">
                            ${emoji}
                            ${progressBar}
                            ${badge}
                        </div>
                        <div class="bookshelf-book-info">
                            <div class="bookshelf-book-title">${book.title}</div>
                            <div class="bookshelf-book-series">${book.genre || ''}</div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `<div class="bookshelf-grid">${bookCards}</div>`;
        }

        function openBookFromShelf(bookId, genre) {
            // book-viewerÎ°ú Ïù¥ÎèôÌïòÍ±∞ÎÇò Ï±Ö ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
            console.log('Ï±Ö Ïó¥Í∏∞:', bookId, genre);
            // ÌïÑÏöîÏãú window.location.href = 'book-viewer.html?id=' + bookId;
        }

        // === Í∞§Îü¨Î¶¨ Îç∞Ïù¥ÌÑ∞ ===
        const myWorks = [
            { id: 1, type: 'video', title: 'ÎßàÎ≤ïÏÇ¨Ïùò Î¨ºÏïΩ Î¶¨ÌÖîÎßÅ', likes: 24, date: '20260125', bg: 'bg-gradient-to-br from-pink-200 to-rose-300', emoji: 'üé¨', typeLabel: 'ÎèôÏòÅÏÉÅ', typeColor: 'text-pink-600' },
            { id: 2, type: 'review', title: 'Ïà≤ÏÜç ÏπúÍµ¨Îì§ ÎèÖÌõÑÍ∞ê', likes: 18, date: '20260122', bg: 'bg-gradient-to-br from-green-200 to-emerald-300', emoji: '‚úèÔ∏è', typeLabel: 'Í∞êÏÉÅÎ¨∏', typeColor: 'text-green-600' },
            { id: 3, type: 'audiobook', title: 'Ïö∞Ï£º ÌÉêÌóòÎåÄ ÎÇ≠ÎèÖ', likes: 31, date: '20260118', bg: 'bg-gradient-to-br from-blue-200 to-indigo-300', emoji: 'üé§', typeLabel: 'Ïò§ÎîîÏò§Î∂Å', typeColor: 'text-blue-600' },
            { id: 4, type: 'diary', title: 'Í≥µÏ£ºÏôÄ Ïö© ÏùºÍ∏∞', likes: 12, date: '20260115', bg: 'bg-gradient-to-br from-purple-200 to-violet-300', emoji: 'üìñ', typeLabel: 'ÏùºÍ∏∞', typeColor: 'text-purple-600' },
            { id: 5, type: 'video', title: 'ÌïòÎäòÏùÑ ÎÇòÎäî ÏΩîÎÅºÎ¶¨', likes: 15, date: '20260108', bg: 'bg-gradient-to-br from-cyan-200 to-teal-300', emoji: 'üé¨', typeLabel: 'ÎèôÏòÅÏÉÅ', typeColor: 'text-cyan-600' },
            { id: 6, type: 'review', title: 'Í≥µÎ£°ÏóêÍ≤å Î≥¥ÎÇ¥Îäî Ìé∏ÏßÄ', likes: 22, date: '20260105', bg: 'bg-gradient-to-br from-rose-200 to-pink-300', emoji: '‚úèÔ∏è', typeLabel: 'Í∞êÏÉÅÎ¨∏', typeColor: 'text-rose-600' },
            { id: 7, type: 'audiobook', title: 'Í≤®Ïö∏ÏôïÍµ≠ ÎÇ≠ÎèÖ', likes: 27, date: '20251228', bg: 'bg-gradient-to-br from-indigo-200 to-blue-300', emoji: 'üé§', typeLabel: 'Ïò§ÎîîÏò§Î∂Å', typeColor: 'text-indigo-600' },
            { id: 8, type: 'diary', title: 'ÌÅ¨Î¶¨Ïä§ÎßàÏä§ ÏùºÍ∏∞', likes: 14, date: '20251225', bg: 'bg-gradient-to-br from-violet-200 to-purple-300', emoji: 'üìñ', typeLabel: 'ÏùºÍ∏∞', typeColor: 'text-violet-600' },
            { id: 9, type: 'video', title: 'Î∞îÎã§ ÏÜç ÏπúÍµ¨Îì§', likes: 9, date: '20251220', bg: 'bg-gradient-to-br from-amber-200 to-orange-300', emoji: 'üé¨', typeLabel: 'ÎèôÏòÅÏÉÅ', typeColor: 'text-amber-600' }
        ];

        const friendsWorks = [
            { id: 1, name: 'ÏàòÏïÑ', avatar: 'ü¶ä', avatarBg: 'from-pink-400 to-rose-500', class: '3ÌïôÎÖÑ 2Î∞ò', time: '1ÏãúÍ∞Ñ Ï†Ñ', type: 'video', typeLabel: 'ÎèôÏòÅÏÉÅ', title: 'ÎßàÎ≤ïÏùò Ïà≤ Ïù¥ÏïºÍ∏∞ Î¶¨ÌÖîÎßÅ', desc: '„ÄäÎßàÎ≤ïÏùò Ïà≤„ÄãÏùÑ ÏùΩÍ≥† ÎßåÎì† ÏòÅÏÉÅÏù¥ÏóêÏöî!', likes: 42, comments: 5, liked: true, following: true, bg: 'bg-gradient-to-br from-pink-200 to-rose-300', emoji: 'üé¨' },
            { id: 2, name: 'ÎØºÏ§Ä', avatar: 'üêª', avatarBg: 'from-blue-400 to-indigo-500', class: '3ÌïôÎÖÑ 1Î∞ò', time: '3ÏãúÍ∞Ñ Ï†Ñ', type: 'review', typeLabel: 'Í∞êÏÉÅÎ¨∏', title: 'ÏïÑÍ∏∞ Í≥µÎ£° ÎëêÎ¶¨ ÎèÖÌõÑÍ∞ê', desc: 'Í≥µÎ£°Ïù¥ ÏπúÍµ¨Î•º Ï∞æÎäî Ïù¥ÏïºÍ∏∞Í∞Ä Ïû¨ÎØ∏ÏûàÏóàÏñ¥Ïöî', likes: 35, comments: 3, liked: false, following: false, bg: 'bg-gradient-to-br from-green-200 to-emerald-300', emoji: '‚úèÔ∏è' },
            { id: 3, name: 'ÏÑúÏó∞', avatar: 'üê∞', avatarBg: 'from-purple-400 to-violet-500', class: '3ÌïôÎÖÑ 2Î∞ò', time: '5ÏãúÍ∞Ñ Ï†Ñ', type: 'audiobook', typeLabel: 'Ïò§ÎîîÏò§Î∂Å', title: 'Î≥ÑÎÇòÎùº ÏπúÍµ¨Îì§ ÎÇ≠ÎèÖ', desc: 'Î™©ÏÜåÎ¶¨ Ïó∞Í∏∞ÎèÑ ÌñàÏñ¥Ïöî! Îì§Ïñ¥Î≥¥ÏÑ∏Ïöî~', likes: 28, comments: 7, liked: false, following: false, bg: 'bg-gradient-to-br from-blue-200 to-indigo-300', emoji: 'üé§' },
            { id: 4, name: 'ÌïòÏú§', avatar: 'üê±', avatarBg: 'from-amber-400 to-orange-500', class: '3ÌïôÎÖÑ 3Î∞ò', time: 'Ïñ¥Ï†ú', type: 'photo', typeLabel: 'ÏÇ¨ÏßÑ', title: 'Ïö∞Î¶¨ Í∞ïÏïÑÏßÄÏôÄ Ï±Ö ÏùΩÍ∏∞', desc: 'Í∞ïÏïÑÏßÄÎèÑ Í∞ôÏù¥ ÏùΩÏóàÏñ¥Ïöî üê∂', likes: 56, comments: 12, liked: true, following: true, bg: 'bg-gradient-to-br from-amber-200 to-orange-300', emoji: 'üì∑' }
        ];

        const followingFriends = [
            { name: 'ÏàòÏïÑ', avatar: 'ü¶ä', avatarBg: 'from-pink-400 to-rose-500', class: '3ÌïôÎÖÑ 2Î∞ò', works: 32, lastActive: '1Ïõî 25Ïùº', tags: ['ÎèôÏòÅÏÉÅ 12', 'Í∞êÏÉÅÎ¨∏ 8'] },
            { name: 'ÌïòÏú§', avatar: 'üê±', avatarBg: 'from-amber-400 to-orange-500', class: '3ÌïôÎÖÑ 3Î∞ò', works: 28, lastActive: 'Ïñ¥Ï†ú', tags: ['ÏÇ¨ÏßÑ 15', 'Ïò§ÎîîÏò§Î∂Å 6'] },
            { name: 'ÎèÑÏú§', avatar: 'üê∏', avatarBg: 'from-emerald-400 to-green-500', class: '3ÌïôÎÖÑ 2Î∞ò', works: 19, lastActive: '1Ïõî 20Ïùº', tags: ['Í∞êÏÉÅÎ¨∏ 10', 'ÌïôÏäµ 5'] }
        ];

        const followerFriends = [
            { name: 'ÏàòÏïÑ', avatar: 'ü¶ä', avatarBg: 'from-pink-400 to-rose-500', class: '3ÌïôÎÖÑ 2Î∞ò', works: 32, following: true },
            { name: 'ÎØºÏ§Ä', avatar: 'üêª', avatarBg: 'from-blue-400 to-indigo-500', class: '3ÌïôÎÖÑ 1Î∞ò', works: 15, following: false },
            { name: 'ÏÑúÏó∞', avatar: 'üê∞', avatarBg: 'from-purple-400 to-violet-500', class: '3ÌïôÎÖÑ 2Î∞ò', works: 21, following: false },
            { name: 'ÏãúÏö∞', avatar: 'üê¢', avatarBg: 'from-cyan-400 to-teal-500', class: '3ÌïôÎÖÑ 1Î∞ò', works: 8, following: false },
            { name: 'ÌïòÏú§', avatar: 'üê±', avatarBg: 'from-amber-400 to-orange-500', class: '3ÌïôÎÖÑ 3Î∞ò', works: 28, following: true }
        ];

        let galleryFilter = 'all';
        let gallerySort = 'recent';

        // === Í∞§Îü¨Î¶¨ ÌÉ≠ Ï†ÑÌôò ===
        function switchGalleryTab(tab) {
            document.querySelectorAll('.gallery-subtab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.gallery-subtab[data-gtab="${tab}"]`).classList.add('active');
            document.querySelectorAll('.gallery-content').forEach(c => c.classList.add('hidden'));
            document.getElementById('gtab-' + tab).classList.remove('hidden');

            if (tab === 'my') renderMyGallery();
            if (tab === 'friends') renderFriendsGallery();
            if (tab === 'following') renderFollowingTab();
        }

        // === ÌïÑÌÑ∞ ===
        function filterGallery(filter) {
            galleryFilter = filter;
            document.querySelectorAll('.gallery-filter').forEach(f => f.classList.remove('active'));
            document.querySelector(`.gallery-filter[data-filter="${filter}"]`).classList.add('active');
            renderMyGallery();
        }

        // === ÎÇ¥ ÏûëÌíà Í∑∏Î¶¨Îìú Î†åÎçîÎßÅ ===
        function renderMyGallery() {
            const grid = document.getElementById('my-gallery-grid');
            let works = [...myWorks];
            if (galleryFilter !== 'all') {
                works = works.filter(w => w.type === galleryFilter);
            }
            if (gallerySort === 'likes') {
                works.sort((a, b) => b.likes - a.likes);
            } else {
                works.sort((a, b) => parseInt(b.date) - parseInt(a.date));
            }

            grid.innerHTML = works.map(w => `
                <div class="gallery-item" data-type="${w.type}" onclick="openWork(${w.id})">
                    <div class="gallery-item-bg ${w.bg}">${w.emoji}</div>
                    <div class="gallery-item-type ${w.typeColor}">${w.typeLabel}</div>
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-likes"><i class="fa-solid fa-heart"></i> ${w.likes}</div>
                        <div class="gallery-item-title">${w.title}</div>
                    </div>
                </div>
            `).join('');
        }

        // === ÏπúÍµ¨ ÏûëÌíà ÌîºÎìú Î†åÎçîÎßÅ ===
        function renderFriendsGallery() {
            const feed = document.getElementById('friends-gallery-feed');
            feed.innerHTML = friendsWorks.map(w => {
                const highlightClass = w.following ? 'highlight' : '';
                const headerBgClass = w.following ? 'highlight-bg' : '';
                const followBtnClass = w.following ? 'following' : '';
                const followBtnText = w.following ? '<i class="fa-solid fa-check"></i> Í¥ÄÏã¨ÏπúÍµ¨' : '<i class="fa-solid fa-plus"></i> Í¥ÄÏã¨+';
                const likedClass = w.liked ? 'liked' : '';
                const heartIcon = w.liked ? 'fa-solid fa-heart' : 'fa-regular fa-heart';

                return `
                <div class="feed-card ${highlightClass}">
                    <div class="feed-card-header ${headerBgClass}">
                        <div class="flex items-center gap-2">
                            <div class="feed-card-avatar bg-gradient-to-br ${w.avatarBg}">${w.avatar}</div>
                            <div>
                                <p class="text-sm font-bold text-gray-800">${w.name}</p>
                                <p class="text-[10px] text-gray-400">${w.class} ¬∑ ${w.time}</p>
                            </div>
                        </div>
                        <button class="follow-btn ${followBtnClass}" onclick="toggleFollowBtn(this)">${followBtnText}</button>
                    </div>
                    <div class="feed-card-visual ${w.bg}">${w.emoji}</div>
                    <div class="feed-card-body">
                        <div class="feed-card-actions">
                            <button class="feed-card-action ${likedClass}"><i class="${heartIcon}"></i> ${w.likes}</button>
                            <button class="feed-card-action"><i class="fa-regular fa-comment"></i> ${w.comments}</button>
                            <span class="ml-auto text-[9px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full font-bold">${w.typeLabel}</span>
                        </div>
                        <p class="text-sm font-medium text-gray-800">${w.title}</p>
                        <p class="text-xs text-gray-400 mt-0.5">${w.desc}</p>
                    </div>
                </div>
                `;
            }).join('');
        }

        // === Í¥ÄÏã¨ÏπúÍµ¨ ÌÉ≠ Î†åÎçîÎßÅ ===
        function renderFollowingTab() {
            // ÎÇ¥Í∞Ä Í¥ÄÏã¨+Ìïú ÏπúÍµ¨
            const followingList = document.getElementById('following-list');
            followingList.innerHTML = followingFriends.map(f => `
                <div class="friend-card">
                    <div class="flex items-center gap-3">
                        <div class="friend-avatar bg-gradient-to-br ${f.avatarBg}">${f.avatar}</div>
                        <div>
                            <p class="text-sm font-bold text-gray-800">${f.name}</p>
                            <p class="text-[10px] text-gray-400">${f.class} ¬∑ ÏûëÌíà ${f.works}Í∞ú</p>
                            <div class="flex gap-1 mt-1">
                                ${f.tags.map(t => `<span class="text-[9px] bg-gray-50 text-gray-500 px-1.5 py-0.5 rounded">${t}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="text-right">
                        <button class="follow-btn following" onclick="toggleFollowBtn(this)"><i class="fa-solid fa-check"></i> Í¥ÄÏã¨ÏπúÍµ¨</button>
                        <p class="text-[9px] text-gray-300 mt-1">${f.lastActive} ÌôúÎèô</p>
                    </div>
                </div>
            `).join('');

            // ÎÇòÎ•º Í¥ÄÏã¨+Ìïú ÏπúÍµ¨
            const followersList = document.getElementById('followers-list');
            followersList.innerHTML = followerFriends.map(f => {
                const btnClass = f.following ? 'following' : '';
                const btnText = f.following ? '<i class="fa-solid fa-check"></i> Í¥ÄÏã¨ÏπúÍµ¨' : '<i class="fa-solid fa-plus"></i> Í¥ÄÏã¨+';
                return `
                <div class="friend-card">
                    <div class="flex items-center gap-3">
                        <div class="friend-avatar bg-gradient-to-br ${f.avatarBg}">${f.avatar}</div>
                        <div>
                            <p class="text-sm font-bold text-gray-800">${f.name}</p>
                            <p class="text-[10px] text-gray-400">${f.class} ¬∑ ÏûëÌíà ${f.works}Í∞ú</p>
                        </div>
                    </div>
                    <button class="follow-btn ${btnClass}" onclick="toggleFollowBtn(this)">${btnText}</button>
                </div>
                `;
            }).join('');
        }

        // === ÌåîÎ°úÏö∞ ÌÜ†Í∏Ä ===
        function toggleFollowBtn(btn) {
            if (btn.classList.contains('following')) {
                btn.classList.remove('following');
                btn.innerHTML = '<i class="fa-solid fa-plus"></i> Í¥ÄÏã¨+';
            } else {
                btn.classList.add('following');
                btn.innerHTML = '<i class="fa-solid fa-check"></i> Í¥ÄÏã¨ÏπúÍµ¨';
            }
        }

        function openWork(id) {
            alert('ÏûëÌíà ÏÉÅÏÑ∏Î≥¥Í∏∞: ' + id);
        }

        // === Init ===
        document.addEventListener('DOMContentLoaded', () => {
            loadSidebar('mypage');
            loadLogoutModal();
            renderCalendar();
            renderBookshelf(); // Ï¥àÍ∏∞ Ï±ÖÏû• Î†åÎçîÎßÅ
            renderMyGallery(); // Í∞§Îü¨Î¶¨ Ï¥àÍ∏∞Ìôî
            renderFriendsGallery();
            renderFollowingTab();
        });
    </script>
</body>
</html>
