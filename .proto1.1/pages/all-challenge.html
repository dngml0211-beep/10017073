<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶í´ëŸ½ 3.0 - ì˜¬ë„ì „</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#FEF3C7', primary: '#FF9F43', dark: '#F368E0', secondary: '#54a0ff', green: '#1dd1a1', paper: '#FDFBF7'
                        }
                    },
                    boxShadow: {
                        'soft': '0 10px 25px -5px rgba(0, 0, 0, 0.05)',
                        'floating': '0 20px 25px -5px rgba(255, 159, 67, 0.3)',
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/responsive.css">

    <style>
        .font-noto { font-family: 'Noto Sans KR', sans-serif; }

        /* === í˜ì´ì§€ í—¤ë” (ë³´ë¼ìƒ‰ í…Œë§ˆ) === */
        .page-header {
            background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 50%, #a78bfa 100%);
            padding: 24px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .page-header::before {
            content: '';
            position: absolute;
            top: -40px; right: -40px;
            width: 120px; height: 120px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        .page-header-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .page-header-desc {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 6px;
        }
        .challenge-avatar {
            width: 56px; height: 56px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* === ë„ì „ íƒ­ === */
        .challenge-tabs {
            display: flex;
            gap: 8px;
            padding: 16px 24px;
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
        }
        .challenge-tab {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 20px;
            border-radius: 16px;
            background: white;
            border: 2px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: #6b7280;
        }
        .challenge-tab:hover {
            border-color: #8b5cf6;
            color: #8b5cf6;
        }
        .challenge-tab.active {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-color: #8b5cf6;
            color: white;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        .challenge-tab i {
            font-size: 18px;
        }

        /* === ì½˜í…ì¸  ì˜ì—­ === */
        .challenge-container {
            padding: 24px;
            background: #f9fafb;
            min-height: calc(100vh - 200px);
        }

        /* === ì˜¤ëŠ˜ì˜ ë„ì „ ì˜ì—­ === */
        .today-challenge-section {
            max-width: 700px;
            margin: 0 auto;
        }

        /* ì„¹ì…˜ íƒ€ì´í‹€ */
        .section-title-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 4px;
        }
        .section-title-main {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .section-title-icon {
            font-size: 24px;
        }
        .section-title-text {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 20px;
            font-weight: 800;
            color: #1a1a2e;
        }
        .section-title-count {
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
        }

        /* ë„ì „ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ */
        .challenge-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 0 4px;
        }

        /* ë„ì „ ì¹´ë“œ */
        .challenge-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: white;
            border-radius: 20px;
            border: 2px solid #e5e7eb;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            transition: all 0.2s;
        }
        .challenge-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .challenge-item.completed {
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            border-color: #7c3aed;
        }
        .challenge-item.completed .challenge-text {
            color: white;
        }
        .challenge-item.completed .challenge-label {
            color: rgba(255,255,255,0.8);
        }

        /* ì•„ì´ì½˜ ì˜ì—­ */
        .challenge-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            flex-shrink: 0;
        }
        .challenge-icon.blue {
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
        }
        .challenge-icon.yellow {
            background: linear-gradient(135deg, #fde047, #facc15);
        }
        .challenge-icon.green {
            background: linear-gradient(135deg, #86efac, #4ade80);
        }

        /* í…ìŠ¤íŠ¸ ì˜ì—­ */
        .challenge-info {
            flex: 1;
            min-width: 0;
        }
        .challenge-label {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 4px;
        }
        .challenge-text {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: #374151;
        }

        /* ë²„íŠ¼ ì˜ì—­ */
        .challenge-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 18px;
            border-radius: 24px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .challenge-btn.orange {
            background: linear-gradient(135deg, #fb923c, #f97316);
            color: white;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
        }
        .challenge-btn.orange:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(249, 115, 22, 0.4);
        }
        .challenge-btn.done {
            background: linear-gradient(135deg, #fb923c, #f97316);
            color: white;
        }
        .challenge-btn-icon {
            width: 22px;
            height: 22px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .challenge-btn-icon.star {
            background: linear-gradient(135deg, #fde047, #facc15);
            color: #92400e;
        }

        /* === íŒ€ ë„ì „ ìŠ¤íƒ€ì¼ === */
        .tc-group {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 24px;
        }
        @media (max-width: 900px) {
            .tc-group { grid-template-columns: 1fr; }
        }

        /* íŒ€ ë¯¸ì…˜ ì¹´ë“œ */
        .tc-mission-card {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 20px;
            padding: 28px 24px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .tc-mission-card::before {
            content: '';
            position: absolute;
            top: -30px; right: -30px;
            width: 100px; height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        .tc-mission-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        .tc-mission-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        .tc-mission-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 20px;
            font-weight: 700;
            line-height: 1.4;
            margin-bottom: 16px;
        }
        .tc-mission-reward {
            background: rgba(255,255,255,0.15);
            padding: 10px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }

        /* ìš°ë¦¬íŒ€ ì˜ì—­ */
        .tc-team-right {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .tc-team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .tc-team-header-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            color: #374151;
        }
        .tc-team-header-title strong {
            color: #8b5cf6;
            font-weight: 700;
        }
        .tc-team-dday {
            background: #fef3c7;
            color: #d97706;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
        }

        /* ëŒ€í‘œ íŒ€ì› ì¹´ë“œ */
        .tc-featured-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 2px solid #fcd34d;
        }
        .tc-rank-badge {
            display: inline-block;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            margin-bottom: 12px;
        }
        .tc-featured-avatar {
            width: 60px; height: 60px;
            margin: 0 auto 8px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .tc-featured-name {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 2px;
        }
        .tc-featured-info {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 8px;
        }
        .tc-featured-quote {
            font-size: 13px;
            color: #6b7280;
            font-style: italic;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .tc-featured-result {
            margin-bottom: 8px;
        }
        .tc-result-success {
            display: inline-block;
            background: #10b981;
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        .tc-featured-reward {
            font-size: 13px;
            color: #d97706;
            font-weight: 600;
        }

        /* íŒ€ì› ê·¸ë¦¬ë“œ */
        .tc-members-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        @media (max-width: 600px) {
            .tc-members-grid { grid-template-columns: 1fr; }
        }
        .tc-member-card {
            background: white;
            border-radius: 14px;
            padding: 14px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .tc-member-top {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        .tc-member-avatar {
            width: 40px; height: 40px;
            background: #f3f4f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        .tc-member-name {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
        }
        .tc-member-info {
            font-size: 11px;
            color: #9ca3af;
        }
        .tc-member-status {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        .tc-status-progress {
            font-size: 12px;
            color: #3b82f6;
            font-weight: 600;
        }
        .tc-status-fail {
            font-size: 12px;
            color: #ef4444;
            font-weight: 600;
        }
        .tc-status-ready {
            font-size: 12px;
            color: #9ca3af;
            font-weight: 600;
        }
        .tc-progress-bar {
            flex: 1;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }
        .tc-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            border-radius: 3px;
        }
        .tc-progress-text {
            font-size: 12px;
            color: #3b82f6;
            font-weight: 700;
        }
        .tc-help-btn {
            background: #fef3c7;
            color: #d97706;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
        }
        .tc-help-btn:hover {
            background: #fde68a;
        }

        /* ë‚˜ë„ í•œë§ˆë”” - í•˜ë‹¨ í˜ëŸ¬ê°€ëŠ” ì˜ì—­ */
        .tc-comment-section {
            background: linear-gradient(180deg, rgba(249,250,251,0) 0%, #f3f4f6 20%);
            border-radius: 0;
            padding: 24px 0 20px;
            margin-top: 32px;
            margin-bottom: -24px;
            margin-left: -24px;
            margin-right: -24px;
            position: relative;
            border-top: 1px solid #e5e7eb;
            box-sizing: border-box;
        }
        .tc-comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
            margin-bottom: 16px;
            box-sizing: border-box;
        }
        .tc-comment-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #9ca3af;
            text-align: left;
            margin: 0;
        }
        .tc-marquee-wrap {
            overflow: hidden;
            padding: 12px 0;
            margin: 0;
        }
        .tc-marquee-track {
            display: flex;
            gap: 18px;
            width: max-content;
            animation: tcMarquee 60s linear infinite;
            padding: 16px 0;
            padding-left: 24px;
        }
        .tc-marquee-wrap:hover .tc-marquee-track {
            animation-play-state: paused;
        }
        @keyframes tcMarquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .tc-comment-card {
            flex-shrink: 0;
            width: 192px;
            background: white;
            border-radius: 16px;
            padding: 18px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 3px 12px rgba(0,0,0,0.06);
        }
        .tc-float-1 { animation: tcFloat1 3.2s ease-in-out infinite; }
        .tc-float-2 { animation: tcFloat2 4.0s ease-in-out infinite; }
        .tc-float-3 { animation: tcFloat3 3.6s ease-in-out infinite; }
        @keyframes tcFloat1 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        @keyframes tcFloat2 {
            0%, 100% { transform: translateY(0); }
            35% { transform: translateY(-6px); }
            70% { transform: translateY(3px); }
        }
        @keyframes tcFloat3 {
            0%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            75% { transform: translateY(2px); }
        }
        .tc-comment-name {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 800;
            color: #1a1a2e;
            margin-bottom: 2px;
        }
        .tc-comment-info {
            font-size: 11px;
            color: #9ca3af;
            margin-bottom: 10px;
        }
        .tc-comment-text {
            font-size: 15px;
            color: #4B5563;
            font-weight: 600;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .tc-comment-team {
            display: inline-block;
            color: white;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
        }
        .tc-write-btn {
            height: 36px;
            padding: 0 18px;
            background: white;
            border: 1.5px solid #d1d5db;
            border-radius: 18px;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .tc-write-btn:hover {
            background: #f9fafb;
            border-color: #9ca3af;
            color: #374151;
            transform: translateY(-1px);
        }

        /* ë‹¤ìŒ ì£¼ ë¯¸ì…˜ ê³ ë¥´ê¸° */
        .tc-next-section {
            margin-top: 20px;
        }
        .tc-next-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 14px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .tc-next-header-left {
            flex: 1;
        }
        .tc-next-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 17px;
            font-weight: 800;
            color: #1a1a2e;
            margin-bottom: 4px;
        }
        .tc-next-notice {
            font-size: 11px;
            color: #9ca3af;
        }
        .tc-refresh-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
            color: #D97706;
            padding: 8px 14px;
            border-radius: 12px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tc-refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245,158,11,0.3);
        }
        .tc-refresh-btn i {
            transition: transform 0.3s;
        }
        .tc-refresh-btn:active i {
            transform: rotate(180deg);
        }
        .tc-next-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        /* ë°˜ì‘í˜•: 2x2 */
        @media (max-width: 900px) {
            .tc-next-grid { grid-template-columns: repeat(2, 1fr); }
        }
        /* ë°˜ì‘í˜•: 1x1 */
        @media (max-width: 480px) {
            .tc-next-grid { grid-template-columns: 1fr; }
        }
        .tc-next-card {
            background: white;
            border: 1.5px solid #e5e7eb;
            border-radius: 16px;
            padding: 18px 14px;
            text-align: center;
            transition: all 0.2s;
        }
        .tc-next-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .tc-next-card.selected-card {
            border: 2px solid #10B981;
            background: linear-gradient(135deg, #ECFDF5, #D1FAE5);
        }
        .tc-next-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        .tc-next-card-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 13px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
            line-height: 1.4;
            min-height: 36px;
        }
        .tc-next-ai {
            display: inline-block;
            background: #EDE9FE;
            color: #7C3AED;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .tc-next-meta {
            display: flex;
            justify-content: center;
            gap: 12px;
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 12px;
        }
        .tc-next-btn {
            width: 100%;
            background: linear-gradient(135deg, #8B5CF6, #7C3AED);
            color: white;
            border: none;
            padding: 9px 0;
            border-radius: 12px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tc-next-btn:hover { opacity: 0.9; transform: translateY(-1px); }
        .tc-next-btn.selected {
            background: linear-gradient(135deg, #10B981, #059669);
        }

        /* ë‹¤ìŒ ì£¼ ë¯¸ì…˜ ë¯¸ë¦¬ë³´ê¸° (íŒ€ ë¯¸ì…˜ ì¹´ë“œ ë‚´) */
        .tc-next-preview {
            margin-top: 16px;
            padding-top: 14px;
            border-top: 1px dashed rgba(255,255,255,0.3);
        }
        .tc-next-preview-label {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 6px;
        }
        .tc-next-preview-content {
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .tc-next-preview-empty {
            font-size: 12px;
            opacity: 0.7;
            padding: 8px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .tc-comment-card {
                width: 168px;
                padding: 16px;
            }
            .tc-comment-name { font-size: 14px; }
            .tc-comment-text { font-size: 14px; }
            .tc-marquee-track { gap: 14px; }
        }

        /* ë‚´ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ (íŠ¹ë³„) */
        .tc-comment-card.my-message {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
            box-shadow: 0 6px 16px rgba(245, 158, 11, 0.35);
            position: relative;
        }
        .tc-comment-card.my-message::before {
            content: 'âœ¨ ë‚˜';
            position: absolute;
            top: -10px;
            right: 10px;
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
        }
        .tc-comment-card.my-message .tc-comment-name {
            color: #D97706;
        }

        /* í•œë§ˆë”” ì‘ì„± íŒì—… */
        .comment-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .comment-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .comment-modal {
            background: white;
            border-radius: 24px;
            padding: 24px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s;
        }
        .comment-modal-overlay.active .comment-modal {
            transform: translateY(0) scale(1);
        }
        .comment-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .comment-modal-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 18px;
            font-weight: 800;
            color: #1a1a2e;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .comment-modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: #f3f4f6;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 14px;
        }
        .comment-textarea {
            width: 100%;
            height: 100px;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 16px;
            font-size: 15px;
            font-family: 'Noto Sans KR', sans-serif;
            resize: none;
            margin-bottom: 16px;
            transition: all 0.2s;
        }
        .comment-textarea:focus {
            outline: none;
            border-color: #7C3AED;
            box-shadow: 0 0 0 3px rgba(124,58,237,0.1);
        }
        .comment-char-count {
            text-align: right;
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 16px;
        }
        .comment-submit-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #7C3AED, #8B5CF6);
            color: white;
            border: none;
            border-radius: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .comment-submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124,58,237,0.4);
        }
        .comment-submit-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ì¹œêµ¬ ë„ì™€ì£¼ê¸° íŒì—… */
        .help-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .help-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .help-modal {
            background: white;
            border-radius: 24px;
            padding: 28px;
            width: 90%;
            max-width: 380px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s;
        }
        .help-modal-overlay.active .help-modal {
            transform: translateY(0) scale(1);
        }
        .help-modal-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        .help-modal-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 20px;
            font-weight: 800;
            color: #1a1a2e;
            margin-bottom: 12px;
        }
        .help-modal-desc {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .help-modal-friend {
            background: #f3f4f6;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .help-modal-avatar {
            width: 48px;
            height: 48px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        .help-modal-friend-info {
            text-align: left;
        }
        .help-modal-friend-name {
            font-weight: 700;
            color: #1a1a2e;
            font-size: 15px;
        }
        .help-modal-friend-status {
            font-size: 12px;
            color: #ef4444;
        }
        .help-modal-cost {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
        }
        .help-modal-cost-label {
            font-size: 12px;
            color: #92400E;
            margin-bottom: 4px;
        }
        .help-modal-cost-value {
            font-size: 24px;
            font-weight: 800;
            color: #D97706;
        }
        .help-modal-btns {
            display: flex;
            gap: 12px;
        }
        .help-modal-cancel {
            flex: 1;
            padding: 14px;
            background: #f3f4f6;
            color: #6b7280;
            border: none;
            border-radius: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }
        .help-modal-confirm {
            flex: 1;
            padding: 14px;
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            border: none;
            border-radius: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .help-modal-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16,185,129,0.4);
        }

        /* ì„±ê³µ ìƒíƒœë¡œ ë³€ê²½ëœ ì¹´ë“œ */
        .tc-member-card.helped .tc-status-fail {
            display: none;
        }
        .tc-member-card.helped .tc-help-btn {
            display: none;
        }
        .tc-member-card.helped .tc-status-helped {
            display: inline-block;
            font-size: 12px;
            color: #10b981;
            font-weight: 600;
        }
        .tc-status-helped {
            display: none;
        }

        /* í† ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes toastIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        @keyframes toastOut {
            from { opacity: 1; transform: translateX(-50%) translateY(0); }
            to { opacity: 0; transform: translateX(-50%) translateY(20px); }
        }
    </style>
</head>
<body class="bg-white font-sans text-gray-800 h-screen overflow-hidden">
    <!-- ëª¨ë°”ì¼ í–„ë²„ê±° ë²„íŠ¼ -->
    <button class="sidebar-toggle" id="sidebar-toggle-btn" onclick="toggleSidebar()">
        <i class="fa-solid fa-bars text-gray-600 text-lg"></i>
    </button>

    <!-- ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>

    <div class="flex w-full h-full">
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="flex-1 h-full overflow-y-auto">
            <!-- í˜ì´ì§€ í—¤ë” -->
            <div class="page-header">
                <div class="flex items-center gap-16px">
                    <div class="challenge-avatar">
                        ğŸ†
                    </div>
                    <div style="margin-left:12px;">
                        <div class="page-header-title">
                            ì˜¬ë„ì „
                        </div>
                        <div class="page-header-desc">
                            ë§¤ì¼ ë„ì „í•˜ê³  ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ì„±ì¥í•´ìš”
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë„ì „ íƒ­ -->
            <div class="challenge-tabs">
                <button class="challenge-tab active" data-ctab="today" onclick="switchChallengeTab('today')">
                    <i class="fa-solid fa-fire"></i>
                    ì˜¤ëŠ˜ì˜ ë„ì „
                </button>
                <button class="challenge-tab" data-ctab="team" onclick="switchChallengeTab('team')">
                    <i class="fa-solid fa-users"></i>
                    íŒ€ ë„ì „
                </button>
            </div>

            <!-- ì½˜í…ì¸  ì˜ì—­ -->
            <div class="challenge-container">
                <!-- ì˜¤ëŠ˜ì˜ ë„ì „ -->
                <div id="ctab-today" class="challenge-content">
                    <div class="today-challenge-section">
                        <!-- ì„¹ì…˜ íƒ€ì´í‹€ -->
                        <div class="section-title-bar">
                            <div class="section-title-main">
                                <span class="section-title-icon">ğŸ”¥</span>
                                <span class="section-title-text">ì˜¤ëŠ˜ì˜ ë„ì „</span>
                            </div>
                            <span class="section-title-count">4/7 ì™„ë£Œ</span>
                        </div>

                        <!-- ë„ì „ ë¦¬ìŠ¤íŠ¸ -->
                        <div class="challenge-list">
                            <!-- ì™„ë£Œëœ ë„ì „ -->
                            <div class="challenge-item completed">
                                <div class="challenge-icon blue">
                                    ğŸ“˜
                                </div>
                                <div class="challenge-info">
                                    <div class="challenge-label">[KRS ë„ì„œ]</div>
                                    <div class="challenge-text">ì½”ì–´ë¶ ì½ê¸° ì™„ë£Œ!</div>
                                </div>
                                <button class="challenge-btn done">
                                    <span class="challenge-btn-icon star">â­</span>
                                    ì™„ë£Œ
                                </button>
                            </div>

                            <!-- ì§„í–‰ì¤‘ ë„ì „ 1 -->
                            <div class="challenge-item">
                                <div class="challenge-icon yellow">
                                    ğŸ“™
                                </div>
                                <div class="challenge-info">
                                    <div class="challenge-label">[KRS ë„ì„œ]</div>
                                    <div class="challenge-text">êµê³¼ì„œ ì§ê¿ì±… ì½ê¸° ì™„ë£Œ!</div>
                                </div>
                                <button class="challenge-btn orange" onclick="location.href='home.html'">
                                    <span class="challenge-btn-icon">â“</span>
                                    ë„ì „
                                </button>
                            </div>

                            <!-- ì§„í–‰ì¤‘ ë„ì „ 2 -->
                            <div class="challenge-item">
                                <div class="challenge-icon green">
                                    âœï¸
                                </div>
                                <div class="challenge-info">
                                    <div class="challenge-label">[ë¶í´ëŸ½]</div>
                                    <div class="challenge-text">ì±… ì½ê³  ê°ìƒë¬¸ ì“°ê¸°</div>
                                </div>
                                <button class="challenge-btn orange" onclick="location.href='home.html'">
                                    <span class="challenge-btn-icon star">2</span>
                                    ë„ì „
                                </button>
                            </div>

                            <!-- ì§„í–‰ì¤‘ ë„ì „ 3 -->
                            <div class="challenge-item">
                                <div class="challenge-icon yellow">
                                    â­
                                </div>
                                <div class="challenge-info">
                                    <div class="challenge-label">[ë¶í´ëŸ½]</div>
                                    <div class="challenge-text">AI ì¶”ì²œë„ì„œ ì½ê¸° ì™„ë£Œ!</div>
                                </div>
                                <button class="challenge-btn orange" onclick="location.href='book-library.html'">
                                    <span class="challenge-btn-icon star">2</span>
                                    ë„ì „
                                </button>
                            </div>
                        </div>

                        <!-- ë‚˜ë„ í•œë§ˆë”” (ì˜¤ëŠ˜ì˜ ë„ì „ì— ë°°ì¹˜) -->
                        <div class="tc-comment-section" style="margin-top: 24px;">
                            <div class="tc-comment-header">
                                <h3 class="tc-comment-title">ğŸ’¬ ë‚˜ë„ í•œë§ˆë”” ğŸ’¬</h3>
                                <button class="tc-write-btn" onclick="openCommentModal()">âœï¸ ì‘ì„±</button>
                            </div>
                            <div class="tc-marquee-wrap">
                                <div class="tc-marquee-track" id="comment-track">
                                    <!-- ì„¸íŠ¸ 1 -->
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">ì½”ë”©ë§ˆìŠ¤í„°</p>
                                        <p class="tc-comment-info">3í•™ë…„ Â· (ì„œìš¸)ì„œìš¸ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ìš°ë¦¬ íŒ€ í™”ì´íŒ…!"</p>
                                        <span class="tc-comment-team" style="background:#FF6B6B;">ğŸŒŸ ê¿ˆë‚˜ë¬´íƒí—˜ëŒ€</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">ì˜ì–´ì²œì¬</p>
                                        <p class="tc-comment-info">6í•™ë…„ Â· (ì„œìš¸)í•œê°•ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ëª¨ë‘ í˜ë‚´ì„¸ìš”!"</p>
                                        <span class="tc-comment-team" style="background:#845EF7;">âœ¨ ë³„ë¹›ì •ì›</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">ê³¼í•™ì™•</p>
                                        <p class="tc-comment-info">5í•™ë…„ Â· (ì¸ì²œ)ë¯¸ë˜ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"íŒŒì´íŒ…!"</p>
                                        <span class="tc-comment-team" style="background:#20C997;">ğŸš€ ìš©ê°í•œíƒí—˜ê°€</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">ìˆ˜í•™ë§ˆë²•ì‚¬</p>
                                        <p class="tc-comment-info">6í•™ë…„ Â· (ë¶€ì‚°)í‘¸ë¥¸ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"í•¨ê»˜ í•´ìš”!"</p>
                                        <span class="tc-comment-team" style="background:#51CF66;">ğŸ€ í–‰ìš´ì˜ìˆ²</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">ë…ì„œì™•</p>
                                        <p class="tc-comment-info">5í•™ë…„ Â· (ëŒ€ì „)í–‡ì‚´ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ìš°ë¦¬ ëª¨ë‘ ìµœê³ !"</p>
                                        <span class="tc-comment-team" style="background:#FCC419;">ğŸ’¡ ìŠ¤ë§ˆíŠ¸íƒí—˜ë‹¨</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">ê·¸ë¦¼ìš”ì •</p>
                                        <p class="tc-comment-info">4í•™ë…„ Â· (ê²½ê¸°)ë³„ë¹›ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ì˜¤ëŠ˜ë„ ì—´ì‹¬íˆ!"</p>
                                        <span class="tc-comment-team" style="background:#FF922B;">ğŸ¨ ì°½ì‘ê³µë°©</span>
                                    </div>
                                    <!-- ì„¸íŠ¸ 2 (ë¬´í•œë£¨í”„ìš© ë³µì œ) -->
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">ì½”ë”©ë§ˆìŠ¤í„°</p>
                                        <p class="tc-comment-info">3í•™ë…„ Â· (ì„œìš¸)ì„œìš¸ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ìš°ë¦¬ íŒ€ í™”ì´íŒ…!"</p>
                                        <span class="tc-comment-team" style="background:#FF6B6B;">ğŸŒŸ ê¿ˆë‚˜ë¬´íƒí—˜ëŒ€</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">ì˜ì–´ì²œì¬</p>
                                        <p class="tc-comment-info">6í•™ë…„ Â· (ì„œìš¸)í•œê°•ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ëª¨ë‘ í˜ë‚´ì„¸ìš”!"</p>
                                        <span class="tc-comment-team" style="background:#845EF7;">âœ¨ ë³„ë¹›ì •ì›</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">ê³¼í•™ì™•</p>
                                        <p class="tc-comment-info">5í•™ë…„ Â· (ì¸ì²œ)ë¯¸ë˜ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"íŒŒì´íŒ…!"</p>
                                        <span class="tc-comment-team" style="background:#20C997;">ğŸš€ ìš©ê°í•œíƒí—˜ê°€</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">ìˆ˜í•™ë§ˆë²•ì‚¬</p>
                                        <p class="tc-comment-info">6í•™ë…„ Â· (ë¶€ì‚°)í‘¸ë¥¸ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"í•¨ê»˜ í•´ìš”!"</p>
                                        <span class="tc-comment-team" style="background:#51CF66;">ğŸ€ í–‰ìš´ì˜ìˆ²</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">ë…ì„œì™•</p>
                                        <p class="tc-comment-info">5í•™ë…„ Â· (ëŒ€ì „)í–‡ì‚´ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ìš°ë¦¬ ëª¨ë‘ ìµœê³ !"</p>
                                        <span class="tc-comment-team" style="background:#FCC419;">ğŸ’¡ ìŠ¤ë§ˆíŠ¸íƒí—˜ë‹¨</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">ê·¸ë¦¼ìš”ì •</p>
                                        <p class="tc-comment-info">4í•™ë…„ Â· (ê²½ê¸°)ë³„ë¹›ì´ˆë“±í•™êµ</p>
                                        <p class="tc-comment-text">"ì˜¤ëŠ˜ë„ ì—´ì‹¬íˆ!"</p>
                                        <span class="tc-comment-team" style="background:#FF922B;">ğŸ¨ ì°½ì‘ê³µë°©</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íŒ€ ë„ì „ -->
                <div id="ctab-team" class="challenge-content hidden">
                    <!-- íŒ€ ë¯¸ì…˜ & ìš°ë¦¬íŒ€ -->
                    <div class="tc-group">
                        <!-- ì™¼ìª½: íŒ€ ë¯¸ì…˜ -->
                        <div class="tc-mission-card">
                            <span class="tc-mission-badge">âœ¨ ì´ë²ˆ ì£¼ íŒ€ ë¯¸ì…˜</span>
                            <div class="tc-mission-icon">ğŸ‘¥</div>
                            <h3 class="tc-mission-title">ìˆ˜í•™ ë‹¨ì›í‰ê°€<br>100ì  ë§ê¸°</h3>
                            <div class="tc-mission-reward">â­ ë³„ 2ê°œ + xp 100</div>
                            <!-- ë‹¤ìŒ ì£¼ ë¯¸ì…˜ ë¯¸ë¦¬ë³´ê¸° -->
                            <div class="tc-next-preview" id="next-mission-preview">
                                <p class="tc-next-preview-label">ğŸ“… ë‹¤ìŒ ì£¼ ë¯¸ì…˜</p>
                                <div class="tc-next-preview-empty" id="next-mission-empty">
                                    ğŸ‘‡ ë¯¸ì…˜ì„ ê³¨ë¼ì£¼ì„¸ìš”!
                                </div>
                                <div class="tc-next-preview-content" id="next-mission-content" style="display:none;">
                                    <span id="next-mission-icon"></span>
                                    <span id="next-mission-title"></span>
                                </div>
                            </div>
                        </div>

                        <!-- ì˜¤ë¥¸ìª½: ìš°ë¦¬íŒ€ -->
                        <div class="tc-team-right">
                            <div class="tc-team-header">
                                <h3 class="tc-team-header-title">ì´ë²ˆ ì£¼ ìš°ë¦¬íŒ€ : <strong>ì§€ì‹ì˜ìˆ²</strong></h3>
                                <span class="tc-team-dday">â± D-3</span>
                            </div>

                            <!-- ëŒ€í‘œ íŒ€ì› ì¹´ë“œ -->
                            <div class="tc-featured-card">
                                <span class="tc-rank-badge">ğŸ… ì˜¬ë­ 1ë“±ê¸‰</span>
                                <div class="tc-featured-avatar">ğŸ±</div>
                                <p class="tc-featured-name">ë‹¬ì½¤í•œë”¸ê¸° ğŸ“</p>
                                <p class="tc-featured-info">5í•™ë…„ Â· ì„œìš¸ì´ˆë“±í•™êµ</p>
                                <p class="tc-featured-quote">"ë­˜ í•´ë„ ë¯¿ìŒë§Œí•œ ì¹œêµ¬ì˜ˆìš”. ê°™ì€ íŒ€ì´ ëœê±´ í–‰ìš´ì…ë‹ˆë‹¤."</p>
                                <div class="tc-featured-result">
                                    <span class="tc-result-success">ë¯¸ì…˜ ì„±ê³µ</span>
                                </div>
                                <p class="tc-featured-reward">â­ ë³„ 2ê°œ + xp 10</p>
                            </div>

                            <!-- íŒ€ì› ê·¸ë¦¬ë“œ -->
                            <div class="tc-members-grid">
                                <div class="tc-member-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">ğŸ°</div>
                                        <div>
                                            <p class="tc-member-name">ë³„ë¹›íƒí—˜ê°€</p>
                                            <p class="tc-member-info">5í•™ë…„ Â· (ì„œìš¸)ê°•ì´ˆë“±í•™êµ</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-progress">ğŸ”„ ì§„í–‰ì¤‘</span>
                                        <div class="tc-progress-bar"><div class="tc-progress-fill" style="width:65%"></div></div>
                                        <span class="tc-progress-text">65%</span>
                                    </div>
                                </div>
                                <div class="tc-member-card" id="science-doctor-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">ğŸ»</div>
                                        <div>
                                            <p class="tc-member-name">ê³¼í•™ë°•ì‚¬</p>
                                            <p class="tc-member-info">5í•™ë…„ Â· (ì¸ì²œ)ë¯¸ë˜ì´ˆë“±í•™êµ</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-fail">âŒ ë¯¸ì…˜ ì‹¤íŒ¨</span>
                                        <span class="tc-status-helped">âœ… ë„ì›€ ë°›ì•„ ì„±ê³µ!</span>
                                        <button class="tc-help-btn" onclick="openHelpModal()">ì¹œêµ¬ ë„ì™€ì£¼ê¸° ğŸŸï¸1</button>
                                    </div>
                                </div>
                                <div class="tc-member-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">ğŸ»</div>
                                        <div>
                                            <p class="tc-member-name">ì±…ì½ëŠ”ê³°</p>
                                            <p class="tc-member-info">5í•™ë…„ Â· (ì„œìš¸)í‘¸ë¥¸ì´ˆë“±í•™êµ</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-ready">â³ ì¤€ë¹„ì¤‘</span>
                                    </div>
                                </div>
                                <div class="tc-member-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">ğŸ¦Š</div>
                                        <div>
                                            <p class="tc-member-name">ë‚˜ëŠ”ìš°í¬</p>
                                            <p class="tc-member-info">5í•™ë…„ Â· (ì„œìš¸)í•´ë§‘ì€ì´ˆë“±í•™êµ</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-progress">ğŸ”„ ì§„í–‰ì¤‘</span>
                                        <div class="tc-progress-bar"><div class="tc-progress-fill" style="width:40%"></div></div>
                                        <span class="tc-progress-text">40%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4. ë‹¤ìŒ ì£¼ ë¯¸ì…˜ ê³ ë¥´ê¸° -->
                    <div class="tc-next-section">
                        <div class="tc-next-header">
                            <div class="tc-next-header-left">
                                <h3 class="tc-next-title">âš¡ ë‹¤ìŒ ì£¼ ë¯¸ì…˜ ê³ ë¥´ê¸°</h3>
                                <p class="tc-next-notice">ì¼ìš”ì¼ ë°¤ 11ì‹œê¹Œì§€ë§Œ ë³€ê²½í•  ìˆ˜ ìˆê³ , ì‹ ì²­í•˜ì§€ ì•Šìœ¼ë©´ ëœë¤ ë¯¸ì…˜ì´ ì œê³µë¼ìš”.</p>
                            </div>
                            <button class="tc-refresh-btn" onclick="refreshMissions()">
                                <i class="fa-solid fa-rotate"></i>
                                <span>ìƒˆë¡œ ë¶ˆëŸ¬ì˜¤ê¸°</span>
                                <span style="color:#92400E;">xp 50</span>
                            </button>
                        </div>
                        <div class="tc-next-grid" id="mission-grid">
                            <!-- ë¯¸ì…˜ 1 -->
                            <div class="tc-next-card" data-mission="mission1" data-icon="ğŸ“–" data-title="ì´ˆë“± í•„ë…ì„œ 3ê¶Œ ì½ê³  ë…í›„ê° ì“°ê¸°">
                                <div class="tc-next-icon" style="color:#7C3AED;">ğŸ“–</div>
                                <p class="tc-next-card-title">ì´ˆë“± í•„ë…ì„œ 3ê¶Œ ì½ê³  ë…í›„ê° ì“°ê¸°</p>
                                <span class="tc-next-ai">ğŸ¤– AI ì˜ˆìƒ ì„±ê³µë¥  100%</span>
                                <div class="tc-next-meta">
                                    <span>â­ ë³„ 1ê°œ</span>
                                    <span>ğŸ‘¥ 2,897íŒ€</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">ë„ì „ ì˜ˆì•½í•˜ê¸°</button>
                            </div>
                            <!-- ë¯¸ì…˜ 2 -->
                            <div class="tc-next-card" data-mission="mission2" data-icon="ğŸ›’" data-title="ìŠ¤íƒ€ìƒµì—ì„œ 1000ì› ì´ìƒ ì‚¬ìš©í•´ë³´ê¸°">
                                <div class="tc-next-icon" style="color:#059669;">ğŸ›’</div>
                                <p class="tc-next-card-title">ìŠ¤íƒ€ìƒµì—ì„œ 1000ì› ì´ìƒ ì‚¬ìš©í•´ë³´ê¸°</p>
                                <span class="tc-next-ai">ğŸ¤– AI ì˜ˆìƒ ì„±ê³µë¥  70%</span>
                                <div class="tc-next-meta">
                                    <span>â­ ë³„ 5ê°œ</span>
                                    <span>ğŸ‘¥ 1,842íŒ€</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">ë„ì „ ì˜ˆì•½í•˜ê¸°</button>
                            </div>
                            <!-- ë¯¸ì…˜ 3 -->
                            <div class="tc-next-card" data-mission="mission3" data-icon="ğŸ¤–" data-title="AIì±—ë´‡ê³¼ êµ¬êµ¬ë‹¨ ê²Œì„ í•´ë³´ê¸°">
                                <div class="tc-next-icon" style="color:#DC2626;">ğŸ¤–</div>
                                <p class="tc-next-card-title">AIì±—ë´‡ê³¼ êµ¬êµ¬ë‹¨ ê²Œì„ í•´ë³´ê¸°</p>
                                <span class="tc-next-ai">ğŸ¤– AI ì˜ˆìƒ ì„±ê³µë¥  50%</span>
                                <div class="tc-next-meta">
                                    <span>â­ ë³„ 3ê°œ</span>
                                    <span>ğŸ‘¥ 3,521íŒ€</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">ë„ì „ ì˜ˆì•½í•˜ê¸°</button>
                            </div>
                            <!-- ëœë¤ ë¯¸ì…˜ (ì»¬ëŸ¬ í†µì¼) -->
                            <div class="tc-next-card" data-mission="random" data-icon="â“" data-title="ëœë¤ë¯¸ì…˜">
                                <div class="tc-next-icon" style="color:#7C3AED;">â“</div>
                                <p class="tc-next-card-title">ëœë¤ë¯¸ì…˜</p>
                                <span class="tc-next-ai">ğŸ² ì‹ ë¹„ë¡œìš´ ë¯¸ì…˜!</span>
                                <div class="tc-next-meta">
                                    <span>â­ ???</span>
                                    <span>ğŸ‘¥ 892íŒ€</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">ë„ì „ ì˜ˆì•½í•˜ê¸°</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ë¡œê·¸ì•„ì›ƒ ëª¨ë‹¬ ì»¨í…Œì´ë„ˆ -->
    <div id="logout-modal-container"></div>

    <!-- í•œë§ˆë”” ì‘ì„± íŒì—… -->
    <div class="comment-modal-overlay" id="comment-modal-overlay" onclick="closeCommentModal(event)">
        <div class="comment-modal" onclick="event.stopPropagation()">
            <div class="comment-modal-header">
                <h3 class="comment-modal-title">âœï¸ ë‚˜ë„ í•œë§ˆë””</h3>
                <button class="comment-modal-close" onclick="closeCommentModal()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <textarea class="comment-textarea" id="comment-textarea" placeholder="ì¹œêµ¬ë“¤ì—ê²Œ ì‘ì›ì˜ í•œë§ˆë””ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”!" maxlength="30" oninput="updateCharCount()"></textarea>
            <div class="comment-char-count"><span id="char-count">0</span>/30</div>
            <button class="comment-submit-btn" id="comment-submit-btn" onclick="submitComment()" disabled>í•œë§ˆë”” ë“±ë¡í•˜ê¸°</button>
        </div>
    </div>

    <!-- ì¹œêµ¬ ë„ì™€ì£¼ê¸° íŒì—… -->
    <div class="help-modal-overlay" id="help-modal-overlay" onclick="closeHelpModal(event)">
        <div class="help-modal" onclick="event.stopPropagation()">
            <div class="help-modal-icon">ğŸ¤</div>
            <h3 class="help-modal-title">ì¹œêµ¬ ë„ì™€ì£¼ê¸°</h3>
            <p class="help-modal-desc">í‹°ì¼“ì„ ì‚¬ìš©í•˜ì—¬ ì¹œêµ¬ì˜ ë¯¸ì…˜ì„<br>ì„±ê³µìœ¼ë¡œ ë°”ê¿”ì¤„ ìˆ˜ ìˆì–´ìš”!</p>
            <div class="help-modal-friend">
                <div class="help-modal-avatar">ğŸ»</div>
                <div class="help-modal-friend-info">
                    <p class="help-modal-friend-name">ê³¼í•™ë°•ì‚¬</p>
                    <p class="help-modal-friend-status">âŒ ë¯¸ì…˜ ì‹¤íŒ¨</p>
                </div>
            </div>
            <div class="help-modal-cost">
                <p class="help-modal-cost-label">ì‚¬ìš© í‹°ì¼“</p>
                <p class="help-modal-cost-value">ğŸŸï¸ 1ì¥</p>
            </div>
            <div class="help-modal-btns">
                <button class="help-modal-cancel" onclick="closeHelpModal()">ì·¨ì†Œ</button>
                <button class="help-modal-confirm" onclick="confirmHelp()">ë„ì™€ì£¼ê¸°</button>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="../js/common.js"></script>
    <script src="../js/sidebar.js"></script>
    <script>
    // === ë„ì „ íƒ­ ì „í™˜ ===
    function switchChallengeTab(tab) {
        // íƒ­ ë²„íŠ¼ ìƒíƒœ ë³€ê²½
        document.querySelectorAll('.challenge-tab').forEach(t => {
            t.classList.toggle('active', t.dataset.ctab === tab);
        });

        // ì½˜í…ì¸  í‘œì‹œ/ìˆ¨ê¹€
        document.querySelectorAll('.challenge-content').forEach(c => {
            c.classList.add('hidden');
        });
        document.getElementById('ctab-' + tab).classList.remove('hidden');
    }

    // === íŒ€ ë¯¸ì…˜ ì„ íƒ ===
    function selectTeamMission(btn) {
        // ëª¨ë“  ë²„íŠ¼ ë° ì¹´ë“œ ì´ˆê¸°í™”
        document.querySelectorAll('.tc-next-btn').forEach(b => {
            b.classList.remove('selected');
            b.textContent = 'ë„ì „ ì˜ˆì•½í•˜ê¸°';
        });
        document.querySelectorAll('.tc-next-card').forEach(c => {
            c.classList.remove('selected-card');
        });

        // ì„ íƒí•œ ë²„íŠ¼ í™œì„±í™”
        btn.classList.add('selected');
        btn.textContent = 'âœ“ ì˜ˆì•½ ì™„ë£Œ';

        // ì¹´ë“œ ì„ íƒ ìƒíƒœ
        const card = btn.closest('.tc-next-card');
        card.classList.add('selected-card');

        // ë‹¤ìŒ ì£¼ ë¯¸ì…˜ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        const icon = card.dataset.icon;
        const title = card.dataset.title;

        document.getElementById('next-mission-empty').style.display = 'none';
        document.getElementById('next-mission-content').style.display = 'flex';
        document.getElementById('next-mission-icon').textContent = icon;
        document.getElementById('next-mission-title').textContent = title;

        // localStorageì— ì €ì¥
        localStorage.setItem('selectedNextMission', JSON.stringify({ icon, title }));
    }

    // === ë¯¸ì…˜ ìƒˆë¡œ ë¶ˆëŸ¬ì˜¤ê¸° ===
    const missionPool = [
        { icon: 'ğŸ“–', title: 'ì´ˆë“± í•„ë…ì„œ 3ê¶Œ ì½ê³  ë…í›„ê° ì“°ê¸°', color: '#7C3AED', ai: '100%', stars: '1ê°œ', teams: '2,897' },
        { icon: 'ğŸ›’', title: 'ìŠ¤íƒ€ìƒµì—ì„œ 1000ì› ì´ìƒ ì‚¬ìš©í•´ë³´ê¸°', color: '#059669', ai: '70%', stars: '5ê°œ', teams: '1,842' },
        { icon: 'ğŸ¤–', title: 'AIì±—ë´‡ê³¼ êµ¬êµ¬ë‹¨ ê²Œì„ í•´ë³´ê¸°', color: '#DC2626', ai: '50%', stars: '3ê°œ', teams: '3,521' },
        { icon: 'ğŸ“š', title: 'ì¼ì£¼ì¼ê°„ ë§¤ì¼ ì±… 1ê¶Œì”© ì½ê¸°', color: '#2563EB', ai: '85%', stars: '4ê°œ', teams: '1,523' },
        { icon: 'âœï¸', title: 'ë…ì„œ ì¼ê¸° 5ì¼ ì—°ì† ì“°ê¸°', color: '#7C3AED', ai: '90%', stars: '2ê°œ', teams: '2,145' },
        { icon: 'ğŸ¯', title: 'ì–´íœ˜ í€´ì¦ˆ ë§Œì  3íšŒ ë‹¬ì„±í•˜ê¸°', color: '#EA580C', ai: '65%', stars: '3ê°œ', teams: '1,876' },
        { icon: 'ğŸ†', title: 'ë…ì„œì™• ë­í‚¹ 50ìœ„ ì•ˆì— ë“¤ê¸°', color: '#D97706', ai: '40%', stars: '7ê°œ', teams: '987' },
        { icon: 'ğŸŒŸ', title: 'ì¹œêµ¬ 3ëª… ì´ìƒ ë…ì„œ ë„ì™€ì£¼ê¸°', color: '#059669', ai: '80%', stars: '4ê°œ', teams: '1,654' },
        { icon: 'ğŸ“', title: 'ì±… ì¶”ì²œ ë¦¬ë·° 2ê°œ ì‘ì„±í•˜ê¸°', color: '#7C3AED', ai: '95%', stars: '2ê°œ', teams: '3,012' },
        { icon: 'ğŸ®', title: 'AI ë…ì„œ ê²Œì„ 5íŒ í´ë¦¬ì–´í•˜ê¸°', color: '#DC2626', ai: '75%', stars: '3ê°œ', teams: '2,341' }
    ];

    function refreshMissions() {
        // XP í™•ì¸ ë° ì°¨ê°
        let xp = parseInt(localStorage.getItem('userXP') || '500');
        if (xp < 50) {
            showRefreshToast('XPê°€ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'error');
            return;
        }
        xp -= 50;
        localStorage.setItem('userXP', xp);

        // ë¯¸ì…˜ ì„ íƒ ì´ˆê¸°í™”
        document.getElementById('next-mission-empty').style.display = 'block';
        document.getElementById('next-mission-content').style.display = 'none';
        localStorage.removeItem('selectedNextMission');

        // ëœë¤ ë¯¸ì…˜ 3ê°œ ì„ íƒ
        const shuffled = [...missionPool].sort(() => Math.random() - 0.5);
        const selectedMissions = shuffled.slice(0, 3);

        // ê·¸ë¦¬ë“œ ë Œë”ë§
        const grid = document.getElementById('mission-grid');
        let html = '';

        selectedMissions.forEach((m, i) => {
            html += `
            <div class="tc-next-card" data-mission="mission${i+1}" data-icon="${m.icon}" data-title="${m.title}">
                <div class="tc-next-icon" style="color:${m.color};">${m.icon}</div>
                <p class="tc-next-card-title">${m.title}</p>
                <span class="tc-next-ai">ğŸ¤– AI ì˜ˆìƒ ì„±ê³µë¥  ${m.ai}</span>
                <div class="tc-next-meta">
                    <span>â­ ë³„ ${m.stars}</span>
                    <span>ğŸ‘¥ ${m.teams}íŒ€</span>
                </div>
                <button class="tc-next-btn" onclick="selectTeamMission(this)">ë„ì „ ì˜ˆì•½í•˜ê¸°</button>
            </div>`;
        });

        // ëœë¤ ë¯¸ì…˜ ì¶”ê°€
        html += `
            <div class="tc-next-card" data-mission="random" data-icon="â“" data-title="ëœë¤ë¯¸ì…˜">
                <div class="tc-next-icon" style="color:#7C3AED;">â“</div>
                <p class="tc-next-card-title">ëœë¤ë¯¸ì…˜</p>
                <span class="tc-next-ai">ğŸ² ì‹ ë¹„ë¡œìš´ ë¯¸ì…˜!</span>
                <div class="tc-next-meta">
                    <span>â­ ???</span>
                    <span>ğŸ‘¥ 892íŒ€</span>
                </div>
                <button class="tc-next-btn" onclick="selectTeamMission(this)">ë„ì „ ì˜ˆì•½í•˜ê¸°</button>
            </div>`;

        grid.innerHTML = html;

        showRefreshToast('ìƒˆë¡œìš´ ë¯¸ì…˜ì„ ë¶ˆëŸ¬ì™”ì–´ìš”! (xp -50)', 'success');
    }

    function showRefreshToast(message, type) {
        const toast = document.createElement('div');
        const bgColor = type === 'error'
            ? 'linear-gradient(135deg, #EF4444, #DC2626)'
            : 'linear-gradient(135deg, #F59E0B, #D97706)';
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: ${bgColor};
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            z-index: 2000;
            animation: toastIn 0.3s ease-out;
        `;
        toast.innerHTML = message;
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.style.animation = 'toastOut 0.3s ease-out forwards';
            setTimeout(() => toast.remove(), 300);
        }, 2000);
    }

    // === í•œë§ˆë”” ì‘ì„± íŒì—… ===
    function openCommentModal() {
        document.getElementById('comment-modal-overlay').classList.add('active');
        document.getElementById('comment-textarea').value = '';
        document.getElementById('char-count').textContent = '0';
        document.getElementById('comment-submit-btn').disabled = true;
    }

    function closeCommentModal(event) {
        if (event && event.target !== event.currentTarget) return;
        document.getElementById('comment-modal-overlay').classList.remove('active');
    }

    function updateCharCount() {
        const textarea = document.getElementById('comment-textarea');
        const count = textarea.value.length;
        document.getElementById('char-count').textContent = count;
        document.getElementById('comment-submit-btn').disabled = count === 0;
    }

    function submitComment() {
        const textarea = document.getElementById('comment-textarea');
        const message = textarea.value.trim();
        if (!message) return;

        // ë‚´ ë©”ì‹œì§€ ì¹´ë“œ ìƒì„±
        const myCard = document.createElement('div');
        myCard.className = 'tc-comment-card my-message tc-float-1';
        myCard.innerHTML = `
            <p class="tc-comment-name">ë‚˜ëŠ”ìš°í¬</p>
            <p class="tc-comment-info">5í•™ë…„ Â· (ì„œìš¸)í•´ë§‘ì€ì´ˆë“±í•™êµ</p>
            <p class="tc-comment-text">"${message}"</p>
            <span class="tc-comment-team" style="background:#F59E0B;">ğŸ¦Š ì§€ì‹ì˜ìˆ²</span>
        `;

        // íŠ¸ë™ ë§¨ ì•ì— ì¶”ê°€
        const track = document.getElementById('comment-track');
        track.insertBefore(myCard, track.firstChild);

        // localStorageì— ì €ì¥
        localStorage.setItem('myComment', message);

        // íŒì—… ë‹«ê¸°
        closeCommentModal();

        // ì„±ê³µ ì•Œë¦¼
        showCommentToast();
    }

    function showCommentToast() {
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 8px 24px rgba(16,185,129,0.4);
            z-index: 2000;
            animation: toastIn 0.3s ease-out;
        `;
        toast.innerHTML = 'âœ¨ í•œë§ˆë””ê°€ ë“±ë¡ë˜ì—ˆì–´ìš”!';
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.style.animation = 'toastOut 0.3s ease-out forwards';
            setTimeout(() => toast.remove(), 300);
        }, 2000);
    }

    // === ì¹œêµ¬ ë„ì™€ì£¼ê¸° íŒì—… ===
    function openHelpModal() {
        document.getElementById('help-modal-overlay').classList.add('active');
    }

    function closeHelpModal(event) {
        if (event && event.target !== event.currentTarget) return;
        document.getElementById('help-modal-overlay').classList.remove('active');
    }

    function confirmHelp() {
        // í‹°ì¼“ ì°¨ê° (localStorage)
        let tickets = parseInt(localStorage.getItem('tickets') || '10');
        if (tickets < 1) {
            alert('í‹°ì¼“ì´ ë¶€ì¡±í•©ë‹ˆë‹¤!');
            return;
        }
        tickets -= 1;
        localStorage.setItem('tickets', tickets);

        // ê³¼í•™ë°•ì‚¬ ì¹´ë“œ ìƒíƒœ ë³€ê²½
        const card = document.getElementById('science-doctor-card');
        card.classList.add('helped');

        // ìƒíƒœ ì €ì¥
        localStorage.setItem('scienceDoctorHelped', 'true');

        // íŒì—… ë‹«ê¸°
        closeHelpModal();

        // ì„±ê³µ ì•Œë¦¼
        showHelpToast();
    }

    function showHelpToast() {
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #7C3AED, #8B5CF6);
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 8px 24px rgba(124,58,237,0.4);
            z-index: 2000;
            animation: toastIn 0.3s ease-out;
        `;
        toast.innerHTML = 'ğŸ‰ ê³¼í•™ë°•ì‚¬ë¥¼ ë„ì™€ì¤¬ì–´ìš”! ğŸŸï¸-1';
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.style.animation = 'toastOut 0.3s ease-out forwards';
            setTimeout(() => toast.remove(), 300);
        }, 2000);
    }

    // === Init ===
    document.addEventListener('DOMContentLoaded', () => {
        loadSidebar('all-challenge');
        loadLogoutModal();

        // ì €ì¥ëœ ë‚´ ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ ë³µì›
        const savedComment = localStorage.getItem('myComment');
        if (savedComment) {
            const myCard = document.createElement('div');
            myCard.className = 'tc-comment-card my-message tc-float-1';
            myCard.innerHTML = `
                <p class="tc-comment-name">ë‚˜ëŠ”ìš°í¬</p>
                <p class="tc-comment-info">5í•™ë…„ Â· (ì„œìš¸)í•´ë§‘ì€ì´ˆë“±í•™êµ</p>
                <p class="tc-comment-text">"${savedComment}"</p>
                <span class="tc-comment-team" style="background:#F59E0B;">ğŸ¦Š ì§€ì‹ì˜ìˆ²</span>
            `;
            const track = document.getElementById('comment-track');
            track.insertBefore(myCard, track.firstChild);
        }

        // ë„ì›€ ìƒíƒœ ë³µì›
        const helped = localStorage.getItem('scienceDoctorHelped');
        if (helped === 'true') {
            document.getElementById('science-doctor-card').classList.add('helped');
        }

        // ì €ì¥ëœ ë‹¤ìŒ ì£¼ ë¯¸ì…˜ ì„ íƒ ë³µì›
        const savedMission = localStorage.getItem('selectedNextMission');
        if (savedMission) {
            const { icon, title } = JSON.parse(savedMission);
            document.getElementById('next-mission-empty').style.display = 'none';
            document.getElementById('next-mission-content').style.display = 'flex';
            document.getElementById('next-mission-icon').textContent = icon;
            document.getElementById('next-mission-title').textContent = title;

            // í•´ë‹¹ ì¹´ë“œ ì„ íƒ ìƒíƒœë¡œ í‘œì‹œ
            document.querySelectorAll('.tc-next-card').forEach(card => {
                if (card.dataset.title === title) {
                    card.classList.add('selected-card');
                    const btn = card.querySelector('.tc-next-btn');
                    btn.classList.add('selected');
                    btn.textContent = 'âœ“ ì˜ˆì•½ ì™„ë£Œ';
                }
            });
        }
    });
    </script>
</body>
</html>
