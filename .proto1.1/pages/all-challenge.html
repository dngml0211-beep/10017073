<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>북클럽 3.0 - 오늘의 도전</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#FEF3C7', primary: '#FF9F43', dark: '#F368E0', secondary: '#54a0ff', green: '#1dd1a1', paper: '#FDFBF7'
                        }
                    },
                    boxShadow: {
                        'soft': '0 10px 25px -5px rgba(0, 0, 0, 0.05)',
                        'floating': '0 20px 25px -5px rgba(255, 159, 67, 0.3)',
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/responsive.css">

    <style>
        .font-noto { font-family: 'Noto Sans KR', sans-serif; }

        /* === 페이지 헤더 (보라색 테마) === */
        .page-header {
            background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 50%, #a78bfa 100%);
            padding: 24px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .page-header::before {
            content: '';
            position: absolute;
            top: -40px; right: -40px;
            width: 120px; height: 120px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        .page-header-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .page-header-desc {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 6px;
        }
        .challenge-avatar {
            width: 56px; height: 56px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* === 도전 탭 === */
        .challenge-tabs {
            display: flex;
            gap: 8px;
            padding: 16px 24px;
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
        }
        .challenge-tab {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 20px;
            border-radius: 16px;
            background: white;
            border: 2px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: #6b7280;
        }
        .challenge-tab:hover {
            border-color: #8b5cf6;
            color: #8b5cf6;
        }
        .challenge-tab.active {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-color: #8b5cf6;
            color: white;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        .challenge-tab i {
            font-size: 18px;
        }

        /* === 콘텐츠 영역 === */
        .challenge-container {
            padding: 24px;
            background: #f9fafb;
            min-height: calc(100vh - 200px);
        }

        /* === 오늘의 도전 영역 === */
        .today-challenge-section {
            width: 100%;
            padding: 0 20px;
        }

        /* 섹션 타이틀 */
        .section-title-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 4px;
        }
        .section-title-main {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .section-title-icon {
            font-size: 24px;
        }
        .section-title-text {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 20px;
            font-weight: 800;
            color: #1a1a2e;
        }
        .section-title-count {
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
        }

        /* 도전 카드 리스트 */
        .challenge-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 0 4px;
        }

        /* 도전 카드 */
        .challenge-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: white;
            border-radius: 20px;
            border: 2px solid #e5e7eb;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            transition: all 0.2s;
        }
        .challenge-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .challenge-item.completed {
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            border-color: #7c3aed;
        }
        .challenge-item.completed .challenge-text {
            color: white;
        }
        .challenge-item.completed .challenge-label {
            color: rgba(255,255,255,0.8);
        }

        /* 아이콘 영역 */
        .challenge-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            flex-shrink: 0;
        }
        .challenge-icon.blue {
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
        }
        .challenge-icon.yellow {
            background: linear-gradient(135deg, #fde047, #facc15);
        }
        .challenge-icon.green {
            background: linear-gradient(135deg, #86efac, #4ade80);
        }

        /* 텍스트 영역 */
        .challenge-info {
            flex: 1;
            min-width: 0;
        }
        .challenge-label {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 4px;
        }
        .challenge-text {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: #374151;
        }

        /* 버튼 영역 */
        .challenge-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 18px;
            border-radius: 24px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .challenge-btn.orange {
            background: linear-gradient(135deg, #fb923c, #f97316);
            color: white;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
        }
        .challenge-btn.orange:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(249, 115, 22, 0.4);
        }
        .challenge-btn.done {
            background: linear-gradient(135deg, #fb923c, #f97316);
            color: white;
        }
        .challenge-btn-icon {
            width: 22px;
            height: 22px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .challenge-btn-icon.star {
            background: linear-gradient(135deg, #fde047, #facc15);
            color: #92400e;
        }

        /* === KRS 승급 도전 (게임화된 스타일) === */
        .krs-quest-section {
            background: white;
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            border: 2px solid #e5e7eb;
        }

        /* 퀘스트 헤더 */
        .krs-quest-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 16px 20px;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-radius: 16px;
            border: 2px solid #3b82f6;
        }

        .krs-level-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: 700;
            color: #1e40af;
        }

        .krs-level-badge i {
            font-size: 18px;
        }

        .krs-level-status {
            font-size: 14px;
            font-weight: 600;
            color: #ea580c;
            padding: 6px 14px;
            background: white;
            border-radius: 12px;
        }

        /* 진행 상황 카드 */
        .krs-progress-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            border: 2px solid #e5e7eb;
        }

        .krs-progress-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .krs-progress-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
        }

        .krs-progress-score {
            display: flex;
            align-items: baseline;
            gap: 4px;
        }

        .krs-current-score {
            font-size: 28px;
            font-weight: 800;
            color: #3b82f6;
        }

        .krs-score-divider {
            font-size: 20px;
            color: #9ca3af;
            font-weight: 600;
        }

        .krs-target-score {
            font-size: 18px;
            font-weight: 700;
            color: #6b7280;
        }

        /* 진행률 바 */
        .krs-progress-bar-container {
            margin-bottom: 12px;
        }

        .krs-progress-bar {
            height: 24px;
            background: #f3f4f6;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 8px;
            border: 2px solid #e5e7eb;
        }

        .krs-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            border-radius: 10px;
            transition: width 0.6s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
        }

        .krs-progress-percent {
            font-size: 14px;
            font-weight: 700;
            color: #3b82f6;
            text-align: right;
        }

        .krs-remaining-info {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #fef3c7;
            border-radius: 12px;
            border: 2px solid #fbbf24;
            font-size: 14px;
            color: #92400e;
            margin-top: 12px;
        }

        .krs-remaining-info i {
            color: #f59e0b;
        }

        .krs-remaining-info strong {
            font-weight: 800;
            color: #ea580c;
        }

        /* 점수 획득 기준 */
        .krs-points-guide {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            border: 2px solid #e5e7eb;
        }

        .krs-guide-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .krs-points-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 16px;
        }

        .krs-points-card {
            background: #f9fafb;
            border-radius: 16px;
            padding: 16px;
            border: 2px solid #e5e7eb;
        }

        .krs-points-card.week1 {
            border-color: #93c5fd;
            background: linear-gradient(135deg, #dbeafe 0%, #eff6ff 100%);
        }

        .krs-points-card.week2 {
            border-color: #a5b4fc;
            background: linear-gradient(135deg, #e0e7ff 0%, #eef2ff 100%);
        }

        .krs-points-week {
            font-size: 12px;
            font-weight: 700;
            color: #6b7280;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .krs-points-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }

        .krs-points-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 13px;
        }

        .krs-points-label {
            color: #4b5563;
            font-weight: 500;
        }

        .krs-points-value {
            font-size: 14px;
            font-weight: 800;
            color: #3b82f6;
        }

        .krs-points-total {
            font-size: 13px;
            font-weight: 700;
            color: #1f2937;
            padding-top: 8px;
            border-top: 2px solid rgba(0,0,0,0.1);
            text-align: right;
        }

        .krs-cycle-info {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #f3f4f6;
            border-radius: 12px;
            font-size: 13px;
            color: #4b5563;
        }

        .krs-cycle-info i {
            color: #6b7280;
        }

        .krs-cycle-info strong {
            font-weight: 700;
            color: #1f2937;
        }

        /* 보상 카드 */
        .krs-reward-card {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 4px 16px rgba(251,191,36,0.2);
            border: 2px solid #fbbf24;
        }

        .krs-reward-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .krs-reward-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
        }

        .krs-reward-badge {
            padding: 6px 14px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 800;
            letter-spacing: 0.5px;
        }

        .krs-reward-badge.bronze {
            background: linear-gradient(135deg, #cd7f32, #d4a574);
            color: white;
            box-shadow: 0 2px 8px rgba(205,127,50,0.3);
        }

        .krs-reward-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 16px;
        }

        .krs-reward-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            background: white;
            border-radius: 12px;
            border: 2px solid #fbbf24;
        }

        .krs-reward-icon {
            font-size: 32px;
            flex-shrink: 0;
        }

        .krs-reward-text {
            flex: 1;
        }

        .krs-reward-label {
            font-size: 13px;
            font-weight: 700;
            color: #92400e;
            margin-bottom: 2px;
        }

        .krs-reward-desc {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
        }

        .krs-quest-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 3px solid #fbbf24;
        }

        .krs-quest-title-area {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .krs-quest-badge-icon {
            font-size: 48px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .krs-quest-title-text {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .krs-quest-title {
            font-size: 20px;
            font-weight: 800;
            color: #1f2937;
            margin: 0;
        }

        .krs-quest-subtitle {
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            margin: 0;
        }

        .krs-quest-level-tag {
            padding: 8px 16px;
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            color: white;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 800;
            box-shadow: 0 4px 12px rgba(59,130,246,0.3);
        }

        /* 진행률 카드 */
        .krs-quest-progress-card {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #3b82f6;
        }

        .krs-quest-progress-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .krs-quest-progress-label {
            font-size: 14px;
            font-weight: 700;
            color: #1e40af;
        }

        .krs-quest-progress-score {
            font-size: 18px;
            font-weight: 800;
            color: #1e40af;
        }

        .krs-quest-progress-bar {
            height: 32px;
            background: rgba(255,255,255,0.6);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 12px;
            border: 2px solid #3b82f6;
            position: relative;
        }

        .krs-quest-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            transition: width 0.6s ease;
            box-shadow: 0 0 20px rgba(251,191,36,0.5);
        }

        .krs-quest-progress-percent {
            font-size: 14px;
            font-weight: 800;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .krs-quest-progress-remaining {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #1e40af;
        }

        .krs-quest-progress-remaining i {
            color: #f59e0b;
            font-size: 16px;
        }

        .krs-quest-progress-remaining strong {
            font-weight: 800;
            color: #ea580c;
        }

        /* 활동 미션 */
        .krs-quest-missions {
            margin-bottom: 20px;
        }

        .krs-quest-missions-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 12px;
        }

        .krs-quest-mission-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 12px;
        }

        .krs-quest-mission-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid #e5e7eb;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            transition: all 0.3s ease;
        }

        .krs-quest-mission-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-color: #fbbf24;
        }

        .krs-quest-mission-card.highlight {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-color: #fbbf24;
            box-shadow: 0 0 20px rgba(251,191,36,0.3);
        }

        .krs-quest-mission-icon {
            font-size: 32px;
            flex-shrink: 0;
        }

        .krs-quest-mission-content {
            flex: 1;
        }

        .krs-quest-mission-name {
            font-size: 14px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .krs-quest-mission-xp {
            font-size: 16px;
            font-weight: 800;
            color: #f59e0b;
        }

        .krs-quest-mission-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 4px 8px;
            background: #3b82f6;
            color: white;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 700;
        }

        .krs-quest-cycle-note {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #f3f4f6;
            border-radius: 12px;
            font-size: 13px;
            color: #4b5563;
        }

        .krs-quest-cycle-note i {
            color: #3b82f6;
        }

        /* 보상 미리보기 */
        .krs-quest-reward-preview {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 16px;
            padding: 20px;
            border: 3px solid #fbbf24;
            box-shadow: 0 0 30px rgba(251,191,36,0.3);
        }

        .krs-quest-reward-title {
            font-size: 16px;
            font-weight: 800;
            color: #92400e;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .krs-quest-reward-title i {
            color: #f59e0b;
            font-size: 18px;
        }

        .krs-quest-reward-items {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .krs-quest-reward-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px 24px;
            background: white;
            border-radius: 12px;
            border: 2px solid #fbbf24;
            font-size: 14px;
            font-weight: 700;
            color: #1f2937;
        }

        .krs-quest-reward-icon {
            font-size: 40px;
        }

        .krs-quest-reward-divider {
            font-size: 24px;
            font-weight: 800;
            color: #92400e;
        }

        .krs-quest-reward-message {
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            color: #92400e;
            padding: 12px 16px;
            background: rgba(255,255,255,0.6);
            border-radius: 12px;
        }

        /* 통합 헤더 (배지 + 보상) */
        .krs-quest-header-unified {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 3px solid #fbbf24;
            box-shadow: 0 4px 20px rgba(251,191,36,0.3);
        }

        .krs-quest-header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 2px solid rgba(251,191,36,0.3);
        }

        .krs-quest-reward-inline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .krs-quest-reward-label {
            font-size: 14px;
            font-weight: 700;
            color: #92400e;
        }

        .krs-quest-reward-badges {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .krs-reward-badge {
            padding: 8px 16px;
            background: white;
            border-radius: 12px;
            border: 2px solid #fbbf24;
            font-size: 14px;
            font-weight: 700;
            color: #1f2937;
            white-space: nowrap;
        }

        .krs-reward-divider {
            font-size: 18px;
            font-weight: 800;
            color: #92400e;
        }

        /* KRS 미션 챌린지 아이템 */
        .challenge-item.krs-mission {
            background: linear-gradient(135deg, #fffbeb 0%, #fefce8 100%);
            border-color: #fbbf24;
            transition: all 0.3s ease;
        }

        .challenge-item.krs-mission:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(251,191,36,0.3);
            border-color: #f59e0b;
        }

        /* XP 버튼 */
        .challenge-btn.xp-btn {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            font-weight: 800;
            box-shadow: 0 4px 12px rgba(251,191,36,0.4);
            border: none;
        }

        .challenge-btn.xp-btn:hover {
            background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(251,191,36,0.5);
        }

        .challenge-btn.xp-btn .challenge-btn-icon.star {
            font-size: 16px;
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
        }

        /* 보라색 아이콘 */
        .challenge-icon.purple {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
        }

        /* 퀘스트 푸터 */
        .krs-quest-footer {
            margin-top: 20px;
            padding: 16px;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-radius: 12px;
            border: 2px solid #3b82f6;
            text-align: center;
        }

        .krs-quest-footer-text {
            font-size: 14px;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 8px;
        }

        .krs-quest-footer-highlight {
            font-size: 16px;
            font-weight: 800;
            color: #ea580c;
        }

        /* === A 영역: 6개월 장기 목표 (골드 게임 테마) === */
        .krs-long-term-section {
            margin-bottom: 32px;
        }

        .krs-goal-card {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-radius: 24px;
            padding: 36px;
            border: 4px solid #fbbf24;
            box-shadow: 0 8px 32px rgba(251, 191, 36, 0.4), 0 0 60px rgba(251, 191, 36, 0.1);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .krs-goal-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(251,191,36,0.15) 0%, transparent 70%);
            animation: shine 4s ease-in-out infinite;
        }

        @keyframes shine {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .krs-goal-card:hover {
            box-shadow: 0 12px 40px rgba(251, 191, 36, 0.5), 0 0 80px rgba(251, 191, 36, 0.2);
            transform: translateY(-4px);
        }

        .krs-goal-header {
            display: flex;
            align-items: center;
            gap: 28px;
            margin-bottom: 32px;
            position: relative;
            z-index: 1;
        }

        .krs-goal-badge-large {
            font-size: 96px;
            flex-shrink: 0;
            filter: drop-shadow(0 8px 16px rgba(251, 191, 36, 0.6));
            animation: bounce-trophy 2s ease-in-out infinite;
        }

        @keyframes bounce-trophy {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-12px) scale(1.05); }
        }

        .krs-goal-info {
            flex: 1;
        }

        .krs-goal-title {
            font-size: 26px;
            font-weight: 900;
            color: #92400e;
            margin: 0 0 10px 0;
            text-shadow: 2px 2px 4px rgba(251, 191, 36, 0.3);
        }

        .krs-goal-subtitle {
            font-size: 17px;
            font-weight: 600;
            color: #b45309;
            margin: 0;
        }

        .krs-goal-level-tag {
            padding: 12px 24px;
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: white;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 900;
            flex-shrink: 0;
            box-shadow: 0 6px 16px rgba(251, 191, 36, 0.5);
            border: 2px solid #fcd34d;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 6px 16px rgba(251, 191, 36, 0.5); }
            50% { box-shadow: 0 8px 24px rgba(251, 191, 36, 0.8); }
        }

        .krs-goal-progress {
            background: white;
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 28px;
            border: 3px solid #fbbf24;
            box-shadow: 0 4px 16px rgba(251, 191, 36, 0.15);
            position: relative;
            z-index: 1;
        }

        .krs-goal-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .krs-goal-progress-label {
            font-size: 17px;
            font-weight: 800;
            color: #92400e;
        }

        .krs-goal-progress-xp {
            font-size: 22px;
            font-weight: 900;
            color: #b45309;
        }

        .krs-goal-progress-bar {
            height: 24px;
            background: #fef3c7;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            margin-bottom: 16px;
            border: 3px solid #fbbf24;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .krs-goal-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f59e0b, #fbbf24, #fcd34d);
            background-size: 200% 100%;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 16px;
            transition: width 0.5s ease;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
            animation: shimmer-gold 3s linear infinite;
        }

        @keyframes shimmer-gold {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .krs-goal-progress-percent {
            font-size: 14px;
            font-weight: 900;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .krs-goal-progress-remaining {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            font-weight: 700;
            color: #92400e;
        }

        .krs-goal-progress-remaining i {
            color: #f59e0b;
            font-size: 20px;
            animation: sparkle-icon 2s ease-in-out infinite;
        }

        @keyframes sparkle-icon {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(15deg); }
        }

        .krs-goal-progress-remaining strong {
            font-weight: 900;
            color: #b45309;
            font-size: 18px;
        }

        .krs-goal-reward {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 20px;
            padding: 24px 28px;
            margin-bottom: 24px;
            border: 3px solid #fbbf24;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
            box-shadow: 0 8px 24px rgba(251, 191, 36, 0.3), 0 0 40px rgba(251, 191, 36, 0.1);
            position: relative;
            z-index: 1;
            animation: glow-pulse 2s ease-in-out infinite;
        }

        @keyframes glow-pulse {
            0%, 100% { box-shadow: 0 8px 24px rgba(251, 191, 36, 0.3), 0 0 40px rgba(251, 191, 36, 0.1); }
            50% { box-shadow: 0 12px 32px rgba(251, 191, 36, 0.4), 0 0 60px rgba(251, 191, 36, 0.2); }
        }

        .krs-goal-reward-label {
            font-size: 18px;
            font-weight: 800;
            color: #92400e;
        }

        .krs-goal-reward-items {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .krs-goal-reward-item {
            padding: 10px 20px;
            background: white;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 800;
            color: #92400e;
            border: 3px solid #fbbf24;
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
            animation: bounce-reward 1s ease-in-out infinite;
        }

        @keyframes bounce-reward {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }

        .krs-goal-reward-divider {
            font-size: 20px;
            font-weight: 900;
            color: #f59e0b;
        }

        .krs-goal-period {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px 24px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            font-size: 15px;
            font-weight: 700;
            color: #92400e;
            border: 3px dashed #fbbf24;
            position: relative;
            z-index: 1;
        }

        /* ===== 토스 스타일 목표 카드 ===== */
        .toss-goal-card {
            background: #ffffff;
            border-radius: 24px;
            padding: 0;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .toss-goal-card:hover {
            box-shadow: 0 4px 28px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        /* 히어로 섹션 */
        .toss-hero-section {
            background: linear-gradient(135deg, #e0f2fe 0%, #ddd6fe 100%);
            padding: 20px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .toss-character-container {
            position: relative;
        }

        .toss-character-bg {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, #bfdbfe 0%, #c4b5fd 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 4px 16px rgba(96, 165, 250, 0.3);
        }

        .toss-clouds {
            position: absolute;
            inset: 0;
            overflow: hidden;
            border-radius: 50%;
        }

        .cloud {
            position: absolute;
            font-size: 14px;
            opacity: 0.6;
            animation: float-cloud 8s ease-in-out infinite;
        }

        .cloud:nth-child(1) {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .cloud:nth-child(2) {
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }

        .cloud:nth-child(3) {
            bottom: 20%;
            left: 20%;
            animation-delay: 4s;
        }

        @keyframes float-cloud {
            0%, 100% {
                transform: translateY(0) translateX(0);
            }
            50% {
                transform: translateY(-8px) translateX(8px);
            }
        }

        .toss-character {
            font-size: 48px;
            position: relative;
            z-index: 2;
            animation: bounce-character 3s ease-in-out infinite;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.1));
        }

        @keyframes bounce-character {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        .toss-badge-floating {
            position: absolute;
            top: -6px;
            right: -6px;
            font-size: 26px;
            animation: rotate-badge 4s ease-in-out infinite;
            filter: drop-shadow(0 2px 8px rgba(251, 191, 36, 0.4));
        }

        @keyframes rotate-badge {
            0%, 100% {
                transform: rotate(-10deg) scale(1);
            }
            50% {
                transform: rotate(10deg) scale(1.05);
            }
        }

        .toss-goal-title {
            text-align: center;
        }

        .toss-goal-title h3 {
            font-size: 17px;
            font-weight: 800;
            color: #1e293b;
            margin: 0 0 4px 0;
            line-height: 1.3;
        }

        .toss-goal-title p {
            font-size: 13px;
            font-weight: 600;
            color: #64748b;
            margin: 0;
        }

        /* 진행도 카드 */
        .toss-progress-card {
            padding: 18px 20px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .toss-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .toss-level-badge {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 800;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .toss-xp-text {
            font-size: 15px;
            font-weight: 700;
            color: #334155;
            display: flex;
            align-items: baseline;
            gap: 3px;
        }

        .xp-current {
            font-size: 19px;
            color: #3b82f6;
        }

        .xp-divider {
            color: #cbd5e1;
            font-size: 15px;
        }

        .xp-total {
            color: #64748b;
        }

        .toss-progress-bar-wrapper {
            margin-bottom: 12px;
        }

        .toss-progress-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            margin-bottom: 6px;
        }

        .toss-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
            border-radius: 10px;
            position: relative;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.4);
        }

        .toss-progress-sparkle {
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 10px;
            animation: sparkle-pulse 2s ease-in-out infinite;
        }

        @keyframes sparkle-pulse {
            0%, 100% {
                opacity: 0.6;
                transform: translateY(-50%) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateY(-50%) scale(1.2);
            }
        }

        .toss-progress-label {
            text-align: right;
            font-size: 11px;
            font-weight: 700;
            color: #3b82f6;
        }

        .toss-remaining {
            display: flex;
            justify-content: center;
        }

        .toss-remaining-badge {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border: 2px solid #fbbf24;
            border-radius: 12px;
            padding: 8px 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);
        }

        .toss-remaining-badge .badge-icon {
            font-size: 14px;
        }

        .toss-remaining-badge .badge-text {
            font-size: 12px;
            font-weight: 700;
            color: #92400e;
        }

        /* 마일스톤 */
        .toss-milestones {
            padding: 18px 20px;
            background: white;
        }

        .toss-milestone-title {
            font-size: 14px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 12px;
        }

        .toss-milestone-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .toss-milestone-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .toss-milestone-item.completed {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 2px solid #10b981;
        }

        .toss-milestone-item.locked {
            background: #f1f5f9;
            opacity: 0.6;
        }

        .toss-milestone-item:hover {
            transform: translateX(3px);
        }

        .milestone-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 900;
            flex-shrink: 0;
        }

        .toss-milestone-item.completed .milestone-icon {
            background: #10b981;
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .toss-milestone-item.locked .milestone-icon {
            background: #cbd5e1;
            color: white;
        }

        .milestone-info {
            flex: 1;
        }

        .milestone-name {
            font-size: 13px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 3px;
        }

        .milestone-xp {
            font-size: 11px;
            font-weight: 600;
            color: #64748b;
        }

        .milestone-reward {
            font-size: 22px;
            flex-shrink: 0;
        }

        /* 보상 미리보기 */
        .toss-reward-preview {
            padding: 18px 20px;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-top: 1px solid #fbbf24;
        }

        .toss-reward-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .reward-emoji {
            font-size: 22px;
        }

        .reward-title {
            font-size: 13px;
            font-weight: 800;
            color: #78350f;
        }

        .toss-reward-items {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .toss-reward-chip {
            background: white;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 7px 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(251, 191, 36, 0.2);
        }

        .toss-reward-chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 12px rgba(251, 191, 36, 0.3);
            border-color: #f59e0b;
        }

        .chip-icon {
            font-size: 16px;
        }

        .chip-text {
            font-size: 12px;
            font-weight: 700;
            color: #92400e;
        }

        /* 푸터 */
        .toss-footer {
            padding: 16px 20px;
            background: white;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toss-info-text {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 600;
            color: #64748b;
        }

        .toss-info-text i {
            color: #3b82f6;
            font-size: 13px;
        }

        .toss-cta-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 800;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(59, 130, 246, 0.3);
        }

        .toss-cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
        }

        .toss-cta-btn:active {
            transform: translateY(0);
        }

        /* ===== 컴팩트 스타일 목표 카드 ===== */
        .toss-goal-card-compact {
            background: #ffffff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .toss-goal-card-compact:hover {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
        }

        /* 메인 정보 영역 */
        .compact-main {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .compact-badge {
            font-size: 51px;
            flex-shrink: 0;
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fef3c7 0%, #ffedd5 100%);
            border-radius: 50%;
            border: 3px solid #fdba74;
            box-shadow: 0 4px 16px rgba(251, 146, 60, 0.3);
            position: relative;
        }

        .compact-badge::before {
            content: '';
            position: absolute;
            inset: -6px;
            background: linear-gradient(135deg, #f97316 0%, #ef4444 100%);
            border-radius: 50%;
            opacity: 0.15;
            z-index: -1;
        }

        .compact-reward-badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
            position: relative;
        }

        .reward-badge-icon {
            font-size: 54px;
            width: 110px;
            height: 110px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fbbf24 100%);
            border-radius: 50%;
            border: 4px solid #f59e0b;
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.6), 0 8px 24px rgba(245, 158, 11, 0.4);
            position: relative;
            animation: rewardPulse 2s ease-in-out infinite;
        }

        @keyframes rewardPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 30px rgba(245, 158, 11, 0.6), 0 8px 24px rgba(245, 158, 11, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 40px rgba(245, 158, 11, 0.8), 0 12px 32px rgba(245, 158, 11, 0.5);
            }
        }

        .reward-badge-icon::before {
            content: '✨';
            position: absolute;
            top: -8px;
            right: -8px;
            font-size: 24px;
            animation: sparkleRotate 3s linear infinite;
        }

        .reward-badge-icon::after {
            content: '';
            position: absolute;
            inset: -8px;
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 50%, #f59e0b 100%);
            border-radius: 50%;
            opacity: 0.2;
            z-index: -1;
            animation: glowPulse 2s ease-in-out infinite;
        }

        @keyframes sparkleRotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes glowPulse {
            0%, 100% {
                opacity: 0.2;
                transform: scale(1);
            }
            50% {
                opacity: 0.4;
                transform: scale(1.1);
            }
        }

        .reward-badge-label {
            font-size: 14px;
            font-weight: 800;
            color: white;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            padding: 6px 16px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4);
            position: relative;
            overflow: hidden;
        }

        .reward-badge-label::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.3) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
            }
        }

        .compact-info {
            flex: 1;
        }

        .compact-title {
            font-size: 16px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .compact-level {
            font-size: 13px;
            font-weight: 700;
            color: #3b82f6;
            margin-bottom: 10px;
        }

        /* 24주차 진행 칸 */
        .week-progress-container {
            margin-bottom: 8px;
        }

        .week-progress-grid {
            display: grid;
            grid-template-columns: repeat(24, 1fr);
            gap: 3px;
            margin-bottom: 6px;
        }

        .week-box {
            height: 10px;
            border-radius: 2px;
            transition: all 0.3s ease;
            position: relative;
        }

        .week-box.completed {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            box-shadow: 0 0 4px rgba(59, 130, 246, 0.4);
        }

        .week-box.empty {
            background: #e2e8f0;
            border: 1px solid #cbd5e1;
        }

        .week-box.missing {
            background: #fef2f2;
            border: 1px solid #fca5a5;
            animation: pulse-warning 2s ease-in-out infinite;
        }

        @keyframes pulse-warning {
            0%, 100% {
                box-shadow: 0 0 0 rgba(239, 68, 68, 0);
            }
            50% {
                box-shadow: 0 0 4px rgba(239, 68, 68, 0.5);
            }
        }

        .week-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-bottom: 6px;
            background: #ef4444;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 9px;
            font-weight: 700;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 10;
        }

        .week-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #ef4444;
        }

        .week-box.missing:hover .week-tooltip {
            opacity: 1;
        }

        .week-box:hover {
            transform: translateY(-1px);
        }

        .week-progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            font-weight: 600;
        }

        .weeks-completed {
            color: #3b82f6;
        }

        .weeks-remaining {
            color: #64748b;
        }

        .compact-xp {
            font-size: 12px;
            font-weight: 700;
            color: #334155;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .compact-xp .xp-current {
            font-size: 15px;
            color: #3b82f6;
        }

        .compact-xp .xp-total {
            color: #64748b;
        }

        .compact-xp .xp-percent {
            color: #10b981;
            margin-left: 4px;
        }

        /* 보완 필요 영역 */
        .compact-missing-section {
            margin-bottom: 16px;
            padding: 16px;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid #fca5a5;
            border-radius: 12px;
        }

        .missing-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .missing-icon {
            font-size: 16px;
        }

        .missing-title {
            font-size: 13px;
            font-weight: 800;
            color: #dc2626;
        }

        .missing-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .missing-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            background: white;
            border-radius: 8px;
            border: 1px solid #fecaca;
            transition: all 0.3s ease;
        }

        .missing-item:hover {
            transform: translateX(4px);
            border-color: #f87171;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.2);
        }

        .missing-week {
            font-size: 11px;
            font-weight: 800;
            color: #dc2626;
            background: #fef2f2;
            padding: 4px 8px;
            border-radius: 6px;
            flex-shrink: 0;
        }

        .missing-text {
            font-size: 12px;
            font-weight: 600;
            color: #1e293b;
        }

        .highlight-emphasis {
            display: inline-block;
            padding: 2px 8px;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 1px solid #fbbf24;
            border-radius: 6px;
            font-weight: 700;
            color: #92400e;
        }

        /* 보상 영역 */
        .compact-rewards {
            margin-bottom: 14px;
            padding-bottom: 14px;
            border-bottom: 1px solid #e2e8f0;
        }

        .compact-reward-title {
            font-size: 12px;
            font-weight: 700;
            color: #78350f;
            margin-bottom: 8px;
        }

        .compact-reward-list {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .compact-reward-item {
            font-size: 12px;
            font-weight: 600;
            color: #1e293b;
            background: #fef3c7;
            padding: 6px 12px;
            border-radius: 8px;
            border: 1px solid #fbbf24;
        }

        .compact-reward-divider {
            color: #cbd5e1;
            font-weight: 600;
        }

        /* 하단 안내 */
        .compact-footer {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 600;
            color: #64748b;
        }

        .compact-footer i {
            color: #3b82f6;
            font-size: 13px;
        }

        /* KRS 로드맵 */
        .krs-roadmap {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            padding: 32px 20px;
            margin-bottom: 16px;
            background: white;
            border-radius: 16px;
            border: 1px solid #e5e7eb;
            position: relative;
        }

        .roadmap-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .roadmap-current-badge {
            position: absolute;
            top: 8px;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
            font-size: 12px;
            font-weight: 700;
            padding: 6px 14px;
            border-radius: 14px;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(251, 146, 60, 0.4);
            z-index: 10;
            transform: translateX(-50%);
        }

        .roadmap-current-badge::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #f97316;
        }

        .roadmap-icon-wrapper {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 3px solid #e5e7eb;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .roadmap-step.active .roadmap-icon-wrapper {
            border-color: #f97316;
            border-width: 3px;
            background: white;
        }

        .roadmap-step.inactive .roadmap-icon-wrapper {
            border-color: #e5e7eb;
            opacity: 0.5;
        }

        .roadmap-icon {
            font-size: 24px;
            line-height: 1;
        }

        .roadmap-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .roadmap-score {
            font-size: 12px;
            font-weight: 700;
            color: #1f2937;
        }

        .roadmap-step.inactive .roadmap-score {
            color: #9ca3af;
        }

        .roadmap-label {
            font-size: 11px;
            font-weight: 600;
            color: #6b7280;
            white-space: nowrap;
        }

        .roadmap-step.inactive .roadmap-label {
            color: #d1d5db;
        }

        .roadmap-badge {
            font-size: 9px;
            font-weight: 600;
            color: #92400e;
            background: #fef3c7;
            padding: 2px 6px;
            border-radius: 6px;
            margin-top: 4px;
            white-space: nowrap;
        }

        .roadmap-line-container {
            flex: 1;
            height: 12px;
            margin: 0 -2px;
            margin-bottom: 60px;
            position: relative;
            z-index: 1;
            border-radius: 6px;
            overflow: hidden;
        }

        .roadmap-line-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: #e5e7eb;
        }

        .roadmap-line-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #fb923c 0%, #f97316 100%);
            transition: width 0.5s ease;
        }

        /* 레벨업 정보 버튼 */
        .levelup-info-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #38bdf8;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            color: #0284c7;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .levelup-info-btn:hover {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(56, 189, 248, 0.2);
        }

        .levelup-info-btn i {
            font-size: 16px;
        }

        /* 레벨업 정보 모달 */
        .levelup-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s ease;
        }

        .levelup-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        .levelup-modal-content {
            position: relative;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .levelup-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 24px;
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            color: white;
        }

        .levelup-modal-header h3 {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
        }

        .levelup-modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .levelup-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .levelup-modal-body {
            padding: 24px;
            max-height: calc(80vh - 72px);
            overflow-y: auto;
        }

        /* 티어표 스타일 */
        .levelup-tier-section {
            margin-bottom: 24px;
        }

        .levelup-section-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin: 0 0 16px 0;
        }

        .levelup-tier-table {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: linear-gradient(135deg, #fef3c7 0%, #ffedd5 100%);
            padding: 16px;
            border-radius: 12px;
        }

        .tier-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .tier-icon {
            font-size: 28px;
            width: 40px;
            text-align: center;
        }

        .tier-name {
            flex: 1;
            font-size: 15px;
            font-weight: 600;
            color: #374151;
        }

        .tier-score {
            font-size: 16px;
            font-weight: 700;
            color: #f97316;
        }

        /* 점수 얻는 방법 스타일 */
        .levelup-points-section {
            background: #f9fafb;
            border-radius: 12px;
            overflow: hidden;
        }

        .levelup-points-toggle {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 16px;
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border: none;
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .levelup-points-toggle:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }

        .toggle-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        .levelup-points-detail {
            padding: 20px;
            animation: expandDown 0.3s ease;
        }

        @keyframes expandDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 1000px;
            }
        }

        .points-week-group {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px dashed #e5e7eb;
        }

        .points-week-group:last-of-type {
            border-bottom: none;
        }

        .points-week-title {
            font-size: 14px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 12px;
            padding: 6px 12px;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-radius: 8px;
            display: inline-block;
        }

        .points-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: white;
            border-radius: 8px;
        }

        .points-activity {
            font-size: 14px;
            color: #4b5563;
        }

        .points-value {
            font-size: 14px;
            font-weight: 700;
            color: #f97316;
        }

        .points-summary {
            margin-top: 20px;
            padding: 16px;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 12px;
        }

        .summary-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 12px;
            font-size: 13px;
            color: #374151;
        }

        .summary-item i {
            color: #f59e0b;
            margin-top: 2px;
            font-size: 16px;
        }

        .summary-item strong {
            color: #f97316;
            font-weight: 700;
        }

        .points-notice {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-top: 16px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #ef4444;
            font-size: 12px;
            color: #dc2626;
            line-height: 1.5;
        }

        .points-notice i {
            font-size: 16px;
            margin-top: 1px;
        }

        .krs-goal-card-game::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.3) 0%, transparent 50%);
            animation: pulse-bg 4s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes pulse-bg {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        .krs-goal-card-game:hover {
            transform: translateY(-4px);
            box-shadow: 0 24px 70px rgba(124, 58, 237, 0.5),
                        0 0 100px rgba(124, 58, 237, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* 파티클 효과 */
        .game-particles {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            font-size: 20px;
            animation: float-particle 6s ease-in-out infinite;
            opacity: 0.6;
        }

        .particle:nth-child(1) {
            left: 10%;
            top: 20%;
            animation-delay: 0s;
        }

        .particle:nth-child(2) {
            left: 80%;
            top: 15%;
            animation-delay: 1s;
        }

        .particle:nth-child(3) {
            left: 50%;
            top: 60%;
            animation-delay: 2s;
        }

        .particle:nth-child(4) {
            left: 20%;
            top: 80%;
            animation-delay: 3s;
        }

        .particle:nth-child(5) {
            left: 90%;
            top: 70%;
            animation-delay: 4s;
        }

        @keyframes float-particle {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-15px) rotate(90deg);
            }
            50% {
                transform: translateY(-30px) rotate(180deg);
            }
            75% {
                transform: translateY(-15px) rotate(270deg);
            }
        }

        /* 게임 헤더 */
        .game-header {
            display: flex;
            align-items: center;
            gap: 28px;
            margin-bottom: 36px;
            position: relative;
            z-index: 2;
        }

        .game-quest-badge {
            position: relative;
            width: 120px;
            height: 120px;
            flex-shrink: 0;
        }

        .badge-glow {
            position: absolute;
            inset: -10px;
            background: radial-gradient(circle, rgba(251, 191, 36, 0.6) 0%, transparent 70%);
            border-radius: 50%;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% {
                transform: scale(1);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .badge-icon {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            filter: drop-shadow(0 8px 20px rgba(251, 191, 36, 0.8));
            animation: bounce-badge 2.5s ease-in-out infinite;
        }

        @keyframes bounce-badge {
            0%, 100% {
                transform: translateY(0) scale(1);
            }
            50% {
                transform: translateY(-10px) scale(1.05);
            }
        }

        .game-quest-info {
            flex: 1;
        }

        .quest-type {
            font-size: 12px;
            font-weight: 800;
            color: #fbbf24;
            letter-spacing: 1.5px;
            margin-bottom: 8px;
            text-shadow: 0 2px 8px rgba(251, 191, 36, 0.5);
        }

        .quest-title {
            font-size: 28px;
            font-weight: 900;
            color: #ffffff;
            margin-bottom: 8px;
            text-shadow: 0 2px 12px rgba(0, 0, 0, 0.5);
        }

        .quest-subtitle {
            font-size: 16px;
            font-weight: 600;
            color: #c4b5fd;
        }

        /* 레벨업 로드맵 */
        .level-roadmap {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(124, 58, 237, 0.5);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 28px;
            position: relative;
            z-index: 2;
        }

        .roadmap-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            font-size: 16px;
            font-weight: 700;
            color: #e0e7ff;
        }

        .roadmap-progress {
            font-size: 14px;
            color: #a78bfa;
            background: rgba(124, 58, 237, 0.2);
            padding: 6px 14px;
            border-radius: 12px;
        }

        .roadmap-path {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 40px 0;
        }

        /* 진행 라인 */
        .path-line {
            position: absolute;
            top: 50%;
            left: 8%;
            right: 8%;
            height: 6px;
            background: rgba(124, 58, 237, 0.3);
            border-radius: 3px;
            transform: translateY(-50%);
        }

        .path-line-progress {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 3px;
            position: relative;
            transition: width 0.5s ease;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
        }

        .path-line-progress::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 30px;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5));
            animation: shine-progress 2s ease-in-out infinite;
        }

        @keyframes shine-progress {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        /* 체크포인트 */
        .checkpoint {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .checkpoint-icon {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 900;
            border: 4px solid;
            background: #1e1b4b;
            transition: all 0.3s ease;
        }

        .checkpoint.completed .checkpoint-icon {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: #34d399;
            color: white;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.6);
        }

        .checkpoint.current .checkpoint-icon {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-color: #fcd34d;
            animation: pulse-current 2s ease-in-out infinite;
            box-shadow: 0 4px 30px rgba(251, 191, 36, 0.8);
        }

        @keyframes pulse-current {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 30px rgba(251, 191, 36, 0.8);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 4px 40px rgba(251, 191, 36, 1);
            }
        }

        .current-player {
            font-size: 28px;
            animation: wave-player 1.5s ease-in-out infinite;
        }

        @keyframes wave-player {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
        }

        .checkpoint.locked .checkpoint-icon {
            background: rgba(71, 85, 105, 0.5);
            border-color: #64748b;
            color: #94a3b8;
        }

        .checkpoint-label {
            font-size: 13px;
            font-weight: 700;
            color: #cbd5e1;
            background: rgba(0, 0, 0, 0.4);
            padding: 6px 12px;
            border-radius: 8px;
        }

        .current-label {
            color: #fbbf24;
            background: rgba(251, 191, 36, 0.2);
            border: 1px solid rgba(251, 191, 36, 0.5);
        }

        .checkpoint-reward {
            font-size: 18px;
            position: absolute;
            top: -8px;
            right: -8px;
            animation: bounce-reward 2s ease-in-out infinite;
        }

        .checkpoint.locked .checkpoint-reward {
            opacity: 0.3;
        }

        @keyframes bounce-reward {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .checkpoint-status {
            font-size: 11px;
            font-weight: 600;
            color: #fbbf24;
            background: rgba(251, 191, 36, 0.2);
            padding: 4px 10px;
            border-radius: 6px;
            margin-top: 4px;
        }

        /* 진행률 섹션 */
        .game-progress-section {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(124, 58, 237, 0.5);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            position: relative;
            z-index: 2;
        }

        .progress-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .progress-label {
            font-size: 15px;
            font-weight: 700;
            color: #e0e7ff;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .progress-xp {
            font-size: 16px;
            font-weight: 700;
            color: #fbbf24;
        }

        .progress-xp strong {
            font-size: 20px;
        }

        .game-progress-bar {
            height: 36px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 18px;
            overflow: hidden;
            border: 2px solid rgba(124, 58, 237, 0.4);
            margin-bottom: 12px;
        }

        .game-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #7c3aed 0%, #a78bfa 50%, #7c3aed 100%);
            background-size: 200% 100%;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 16px;
            position: relative;
            animation: progress-shimmer 3s ease-in-out infinite;
            box-shadow: 0 4px 20px rgba(124, 58, 237, 0.6);
            transition: width 0.5s ease;
        }

        @keyframes progress-shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .progress-shine {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.3) 50%,
                transparent 100%);
            animation: slide-shine 2s ease-in-out infinite;
        }

        @keyframes slide-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-percent {
            font-size: 16px;
            font-weight: 900;
            color: white;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 2;
        }

        .progress-remaining {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .remaining-text {
            color: #e0e7ff;
            font-weight: 600;
        }

        .remaining-time {
            color: #a78bfa;
            font-weight: 700;
            background: rgba(124, 58, 237, 0.2);
            padding: 6px 12px;
            border-radius: 8px;
        }

        /* 보상 상자 */
        .game-reward-box {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(245, 158, 11, 0.2) 100%);
            border: 3px solid rgba(251, 191, 36, 0.5);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .game-reward-box:hover {
            transform: translateY(-2px);
            border-color: #fbbf24;
            box-shadow: 0 8px 30px rgba(251, 191, 36, 0.4);
        }

        .reward-box-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .reward-box-icon {
            font-size: 32px;
            animation: shake-gift 3s ease-in-out infinite;
        }

        @keyframes shake-gift {
            0%, 100% { transform: rotate(0deg); }
            10%, 30%, 50%, 70%, 90% { transform: rotate(-5deg); }
            20%, 40%, 60%, 80% { transform: rotate(5deg); }
        }

        .reward-box-title {
            font-size: 18px;
            font-weight: 800;
            color: #fbbf24;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        }

        .reward-items-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .reward-item-card {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(251, 191, 36, 0.3);
            border-radius: 16px;
            padding: 20px 12px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .reward-item-card:hover {
            transform: translateY(-4px) scale(1.05);
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
            box-shadow: 0 8px 20px rgba(251, 191, 36, 0.3);
        }

        .reward-card-icon {
            font-size: 40px;
            margin-bottom: 12px;
            filter: drop-shadow(0 4px 12px rgba(251, 191, 36, 0.5));
        }

        .reward-card-name {
            font-size: 13px;
            font-weight: 700;
            color: #e0e7ff;
        }

        /* 퀘스트 푸터 */
        .game-quest-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            padding-top: 20px;
            border-top: 2px solid rgba(124, 58, 237, 0.3);
            position: relative;
            z-index: 2;
        }

        .quest-duration {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 600;
            color: #c4b5fd;
        }

        .quest-duration i {
            color: #a78bfa;
            font-size: 18px;
        }

        .quest-boost-btn {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 800;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(245, 158, 11, 0.4);
        }

        .quest-boost-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(245, 158, 11, 0.6);
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        }

        .quest-boost-btn i {
            font-size: 16px;
            animation: rocket-boost 2s ease-in-out infinite;
        }

        @keyframes rocket-boost {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }

        .krs-goal-period i {
            font-size: 18px;
            color: #f59e0b;
        }

        /* === B 영역: 주간 미션 === */
        .krs-weekly-section {
            margin-bottom: 32px;
        }

        .krs-mission-list {
            background: white;
            border-radius: 16px;
            padding: 16px;
            border: 2px solid #e5e7eb;
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
        }

        .krs-mission-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
            background: #fafafa;
            margin-bottom: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .krs-mission-item:last-child {
            margin-bottom: 0;
        }

        .krs-mission-item:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.08);
        }


        .krs-mission-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border-radius: 12px;
            flex-shrink: 0;
        }

        .krs-mission-icon.blue {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border: 2px solid #3b82f6;
        }

        .krs-mission-icon.green {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            border: 2px solid #10b981;
        }

        .krs-mission-icon.yellow {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid #fbbf24;
        }

        .krs-mission-icon.purple {
            background: linear-gradient(135deg, #e9d5ff, #d8b4fe);
            border: 2px solid #a855f7;
        }

        .krs-mission-info {
            flex: 1;
            min-width: 0;
        }

        .krs-mission-label {
            font-size: 12px;
            font-weight: 700;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .krs-mission-text {
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
        }

        .krs-mission-xp {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border-radius: 12px;
            font-weight: 800;
            color: white;
            box-shadow: 0 4px 12px rgba(251,191,36,0.3);
            flex-shrink: 0;
        }

        .krs-mission-xp-icon {
            font-size: 16px;
            animation: sparkle 2s infinite;
        }

        .krs-mission-xp-value {
            font-size: 15px;
        }

        .krs-weekly-note {
            margin-top: 16px;
            padding: 14px 18px;
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
            border-radius: 12px;
            border: 2px solid #3b82f6;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 600;
            color: #1e40af;
        }

        .krs-weekly-note i {
            font-size: 16px;
            color: #3b82f6;
        }

        /* 모바일 반응형 */
        @media (max-width: 768px) {
            .krs-quest-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }

            .krs-quest-header-unified {
                padding: 16px;
            }

            .krs-quest-header-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .krs-quest-badge-icon {
                font-size: 36px;
            }

            .krs-quest-title {
                font-size: 18px;
            }

            .krs-quest-title-text h3 {
                font-size: 18px;
            }

            .krs-quest-title-text p {
                font-size: 13px;
            }

            .krs-quest-level-tag {
                font-size: 13px;
                padding: 6px 12px;
            }

            .krs-quest-reward-inline {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .krs-quest-reward-badges {
                flex-wrap: wrap;
            }

            .krs-reward-badge {
                font-size: 13px;
                padding: 6px 12px;
            }

            .krs-quest-mission-grid {
                grid-template-columns: 1fr;
            }

            .krs-quest-reward-items {
                flex-direction: column;
                gap: 12px;
            }

            .krs-quest-reward-divider {
                transform: rotate(90deg);
            }

            /* A 영역 모바일 */
            .today-challenge-section {
                padding: 0 16px;
            }

            .krs-goal-card {
                padding: 28px;
            }

            .krs-goal-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 20px;
            }

            .krs-goal-badge-large {
                font-size: 72px;
            }

            .krs-goal-title {
                font-size: 18px;
            }

            .krs-goal-subtitle {
                font-size: 14px;
            }

            .krs-goal-level-tag {
                font-size: 13px;
                padding: 6px 12px;
            }

            .krs-goal-progress {
                padding: 16px;
            }

            .krs-goal-progress-label {
                font-size: 14px;
            }

            .krs-goal-progress-xp {
                font-size: 16px;
            }

            .krs-goal-progress-bar {
                height: 14px;
            }

            .krs-goal-progress-percent {
                font-size: 11px;
            }

            .krs-goal-progress-remaining {
                font-size: 13px;
            }

            .krs-goal-reward {
                flex-direction: column;
                align-items: center;
                gap: 10px;
                padding: 14px 16px;
            }

            .krs-goal-reward-label {
                font-size: 13px;
            }

            .krs-goal-reward-items {
                width: 100%;
                justify-content: center;
            }

            .krs-goal-reward-item {
                font-size: 13px;
                padding: 5px 12px;
            }

            .krs-goal-period {
                font-size: 12px;
                padding: 10px 14px;
            }

            /* 토스 스타일 카드 모바일 */
            .toss-hero-section {
                padding: 16px 16px;
                gap: 10px;
            }

            .toss-character-bg {
                width: 80px;
                height: 80px;
            }

            .toss-character {
                font-size: 42px;
            }

            .toss-badge-floating {
                font-size: 22px;
                top: -4px;
                right: -4px;
            }

            .cloud {
                font-size: 12px;
            }

            .toss-goal-title h3 {
                font-size: 15px;
            }

            .toss-goal-title p {
                font-size: 12px;
            }

            .toss-progress-card {
                padding: 14px 16px;
            }

            .toss-level-badge {
                font-size: 11px;
                padding: 5px 10px;
            }

            .toss-xp-text {
                font-size: 13px;
            }

            .xp-current {
                font-size: 16px;
            }

            .toss-progress-bar {
                height: 10px;
            }

            .toss-progress-sparkle {
                font-size: 8px;
            }

            .toss-progress-label {
                font-size: 10px;
            }

            .toss-remaining-badge {
                padding: 7px 12px;
            }

            .toss-remaining-badge .badge-icon {
                font-size: 13px;
            }

            .toss-remaining-badge .badge-text {
                font-size: 11px;
            }

            .toss-milestones {
                padding: 14px 16px;
            }

            .toss-milestone-title {
                font-size: 13px;
                margin-bottom: 10px;
            }

            .toss-milestone-grid {
                gap: 7px;
            }

            .toss-milestone-item {
                padding: 10px;
                gap: 10px;
            }

            .milestone-icon {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }

            .milestone-name {
                font-size: 12px;
            }

            .milestone-xp {
                font-size: 10px;
            }

            .milestone-reward {
                font-size: 18px;
            }

            .toss-reward-preview {
                padding: 14px 16px;
            }

            .reward-emoji {
                font-size: 18px;
            }

            .reward-title {
                font-size: 12px;
            }

            .toss-reward-items {
                gap: 6px;
            }

            .toss-reward-chip {
                padding: 6px 10px;
                flex: 1 1 auto;
            }

            .chip-icon {
                font-size: 14px;
            }

            .chip-text {
                font-size: 11px;
            }

            .toss-footer {
                padding: 14px 16px;
                gap: 10px;
            }

            .toss-info-text {
                font-size: 10px;
            }

            .toss-info-text i {
                font-size: 12px;
            }

            .toss-cta-btn {
                padding: 11px 16px;
                font-size: 12px;
            }

            /* 컴팩트 스타일 카드 모바일 */
            .toss-goal-card-compact {
                padding: 16px;
            }

            .compact-main {
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 12px;
                margin-bottom: 14px;
                padding-bottom: 14px;
            }

            .compact-badge {
                font-size: 43px;
                width: 86px;
                height: 86px;
            }

            .compact-reward-badge {
                gap: 8px;
            }

            .reward-badge-icon {
                font-size: 46px;
                width: 94px;
                height: 94px;
                border-width: 3px;
            }

            .reward-badge-icon::before {
                font-size: 20px;
                top: -6px;
                right: -6px;
            }

            .reward-badge-label {
                font-size: 13px;
                padding: 5px 14px;
            }

            .compact-info {
                width: 100%;
            }

            .compact-title {
                font-size: 15px;
            }

            .compact-level {
                font-size: 12px;
                margin-bottom: 8px;
            }

            /* 24주차 진행 칸 모바일 */
            .week-progress-grid {
                gap: 2px;
            }

            .week-box {
                height: 8px;
            }

            .week-tooltip {
                font-size: 8px;
                padding: 3px 6px;
                margin-bottom: 4px;
            }

            .week-tooltip::after {
                border: 3px solid transparent;
                border-top-color: #ef4444;
            }

            .week-progress-info {
                font-size: 9px;
            }

            .compact-xp {
                font-size: 11px;
                justify-content: center;
            }

            .compact-xp .xp-current {
                font-size: 14px;
            }

            .compact-missing-section {
                margin-bottom: 14px;
                padding: 14px;
            }

            .missing-icon {
                font-size: 14px;
            }

            .missing-title {
                font-size: 12px;
            }

            .missing-list {
                gap: 7px;
            }

            .missing-item {
                padding: 8px 10px;
                gap: 6px;
            }

            .missing-week {
                font-size: 10px;
                padding: 3px 6px;
            }

            .missing-text {
                font-size: 11px;
            }

            .compact-rewards {
                margin-bottom: 12px;
                padding-bottom: 12px;
            }

            .compact-reward-title {
                font-size: 11px;
                text-align: center;
            }

            .compact-reward-list {
                justify-content: center;
                gap: 6px;
            }

            .compact-reward-item {
                font-size: 11px;
                padding: 5px 10px;
            }

            .compact-footer {
                font-size: 10px;
            }

            .compact-footer i {
                font-size: 12px;
            }

            /* KRS 로드맵 모바일 */
            .krs-roadmap {
                padding: 28px 12px;
                gap: 0;
            }

            .roadmap-current-badge {
                font-size: 11px;
                padding: 5px 12px;
                top: 6px;
                border-radius: 12px;
            }

            .roadmap-current-badge::after {
                border-left: 6px solid transparent;
                border-right: 6px solid transparent;
                border-top: 6px solid #f97316;
                bottom: -5px;
            }

            .roadmap-icon-wrapper {
                width: 44px;
                height: 44px;
                border-width: 2px;
            }

            .roadmap-step.active .roadmap-icon-wrapper {
                border-width: 2px;
            }

            .roadmap-icon {
                font-size: 20px;
            }

            .roadmap-score {
                font-size: 11px;
            }

            .roadmap-label {
                font-size: 10px;
            }

            .roadmap-badge {
                font-size: 8px;
                padding: 2px 5px;
            }

            .roadmap-line-container {
                height: 10px;
                margin-bottom: 52px;
                border-radius: 5px;
            }

            /* 레벨업 정보 버튼 모바일 */
            .levelup-info-btn {
                font-size: 12px;
                padding: 7px 12px;
                gap: 5px;
            }

            .levelup-info-btn i {
                font-size: 14px;
            }

            /* 레벨업 정보 모달 모바일 */
            .levelup-modal-content {
                width: 95%;
                max-height: 90vh;
            }

            .levelup-modal-header {
                padding: 16px 20px;
            }

            .levelup-modal-header h3 {
                font-size: 16px;
            }

            .levelup-modal-close {
                font-size: 20px;
                width: 28px;
                height: 28px;
            }

            .levelup-modal-body {
                padding: 20px;
                max-height: calc(90vh - 60px);
            }

            .levelup-section-title {
                font-size: 14px;
            }

            .tier-row {
                padding: 10px;
                gap: 10px;
            }

            .tier-icon {
                font-size: 24px;
                width: 36px;
            }

            .tier-name {
                font-size: 14px;
            }

            .tier-score {
                font-size: 14px;
            }

            .levelup-points-toggle {
                font-size: 14px;
                padding: 12px 14px;
            }

            .levelup-points-detail {
                padding: 16px;
            }

            .points-week-title {
                font-size: 13px;
                padding: 5px 10px;
            }

            .points-item {
                padding: 8px 10px;
            }

            .points-activity {
                font-size: 13px;
            }

            .points-value {
                font-size: 13px;
            }

            .points-summary {
                padding: 14px;
            }

            .summary-item {
                font-size: 12px;
            }

            .points-notice {
                font-size: 11px;
                padding: 10px;
            }

            .roadmap-label {
                font-size: 9px;
            }

            .roadmap-arrow {
                font-size: 10px;
                margin: 0 6px;
            }

            .roadmap-score {
                font-size: 8px;
                margin-bottom: 3px;
            }

            .roadmap-badge {
                font-size: 7px;
                padding: 2px 5px;
                border-radius: 5px;
                margin-top: 4px;
            }

            /* B 영역 모바일 */
            .krs-mission-list {
                padding: 12px;
            }

            .krs-mission-item {
                flex-wrap: wrap;
                gap: 12px;
                padding: 14px;
            }


            .krs-mission-icon {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .krs-mission-info {
                flex: 1;
                min-width: 120px;
            }

            .krs-mission-label {
                font-size: 11px;
            }

            .krs-mission-text {
                font-size: 14px;
            }

            .krs-mission-xp {
                padding: 8px 12px;
            }

            .krs-mission-xp-icon {
                font-size: 14px;
            }

            .krs-mission-xp-value {
                font-size: 13px;
            }

            .krs-weekly-note {
                font-size: 13px;
                padding: 12px 16px;
            }
        }

        /* === 팀 도전 스타일 === */
        .tc-group {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 24px;
        }
        @media (max-width: 900px) {
            .tc-group { grid-template-columns: 1fr; }
        }

        /* 팀 미션 카드 */
        .tc-mission-card {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 20px;
            padding: 28px 24px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .tc-mission-card::before {
            content: '';
            position: absolute;
            top: -30px; right: -30px;
            width: 100px; height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        .tc-mission-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        .tc-mission-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        .tc-mission-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 20px;
            font-weight: 700;
            line-height: 1.4;
            margin-bottom: 16px;
        }
        .tc-mission-reward {
            background: rgba(255,255,255,0.15);
            padding: 10px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }

        /* 우리팀 영역 */
        .tc-team-right {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .tc-team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .tc-team-header-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            color: #374151;
        }
        .tc-team-header-title strong {
            color: #8b5cf6;
            font-weight: 700;
        }
        .tc-team-dday {
            background: #fef3c7;
            color: #d97706;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
        }

        /* 대표 팀원 카드 */
        .tc-featured-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 2px solid #fcd34d;
        }
        .tc-rank-badge {
            display: inline-block;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            margin-bottom: 12px;
        }
        .tc-featured-avatar {
            width: 60px; height: 60px;
            margin: 0 auto 8px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .tc-featured-name {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 2px;
        }
        .tc-featured-info {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 8px;
        }
        .tc-featured-quote {
            font-size: 13px;
            color: #6b7280;
            font-style: italic;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .tc-featured-result {
            margin-bottom: 8px;
        }
        .tc-result-success {
            display: inline-block;
            background: #10b981;
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        .tc-featured-reward {
            font-size: 13px;
            color: #d97706;
            font-weight: 600;
        }

        /* 팀원 그리드 */
        .tc-members-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        @media (max-width: 600px) {
            .tc-members-grid { grid-template-columns: 1fr; }
        }
        .tc-member-card {
            background: white;
            border-radius: 14px;
            padding: 14px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .tc-member-top {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        .tc-member-avatar {
            width: 40px; height: 40px;
            background: #f3f4f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        .tc-member-name {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
        }
        .tc-member-info {
            font-size: 11px;
            color: #9ca3af;
        }
        .tc-member-status {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        .tc-status-progress {
            font-size: 12px;
            color: #3b82f6;
            font-weight: 600;
        }
        .tc-status-fail {
            font-size: 12px;
            color: #ef4444;
            font-weight: 600;
        }
        .tc-status-ready {
            font-size: 12px;
            color: #9ca3af;
            font-weight: 600;
        }
        .tc-progress-bar {
            flex: 1;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }
        .tc-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            border-radius: 3px;
        }
        .tc-progress-text {
            font-size: 12px;
            color: #3b82f6;
            font-weight: 700;
        }
        .tc-help-btn {
            background: #fef3c7;
            color: #d97706;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
        }
        .tc-help-btn:hover {
            background: #fde68a;
        }

        /* 나도 한마디 - 하단 흘러가는 영역 */
        .tc-comment-section {
            background: linear-gradient(180deg, rgba(249,250,251,0) 0%, #f3f4f6 20%);
            border-radius: 0;
            padding: 24px 0 20px;
            margin-top: 32px;
            margin-bottom: -24px;
            margin-left: -24px;
            margin-right: -24px;
            position: relative;
            border-top: 1px solid #e5e7eb;
            box-sizing: border-box;
        }
        .tc-comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
            margin-bottom: 16px;
            box-sizing: border-box;
        }
        .tc-comment-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: #9ca3af;
            text-align: left;
            margin: 0;
        }
        .tc-marquee-wrap {
            overflow: hidden;
            padding: 12px 0;
            margin: 0;
        }
        .tc-marquee-track {
            display: flex;
            gap: 18px;
            width: max-content;
            animation: tcMarquee 60s linear infinite;
            padding: 16px 0;
            padding-left: 24px;
        }
        .tc-marquee-wrap:hover .tc-marquee-track {
            animation-play-state: paused;
        }
        @keyframes tcMarquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .tc-comment-card {
            flex-shrink: 0;
            width: 192px;
            background: white;
            border-radius: 16px;
            padding: 18px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 3px 12px rgba(0,0,0,0.06);
        }
        .tc-float-1 { animation: tcFloat1 3.2s ease-in-out infinite; }
        .tc-float-2 { animation: tcFloat2 4.0s ease-in-out infinite; }
        .tc-float-3 { animation: tcFloat3 3.6s ease-in-out infinite; }
        @keyframes tcFloat1 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        @keyframes tcFloat2 {
            0%, 100% { transform: translateY(0); }
            35% { transform: translateY(-6px); }
            70% { transform: translateY(3px); }
        }
        @keyframes tcFloat3 {
            0%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            75% { transform: translateY(2px); }
        }
        .tc-comment-name {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 800;
            color: #1a1a2e;
            margin-bottom: 2px;
        }
        .tc-comment-info {
            font-size: 11px;
            color: #9ca3af;
            margin-bottom: 10px;
        }
        .tc-comment-text {
            font-size: 15px;
            color: #4B5563;
            font-weight: 600;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .tc-comment-team {
            display: inline-block;
            color: white;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
        }
        .tc-write-btn {
            height: 36px;
            padding: 0 18px;
            background: white;
            border: 1.5px solid #d1d5db;
            border-radius: 18px;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .tc-write-btn:hover {
            background: #f9fafb;
            border-color: #9ca3af;
            color: #374151;
            transform: translateY(-1px);
        }

        /* 다음 주 미션 고르기 */
        .tc-next-section {
            margin-top: 20px;
        }
        .tc-next-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 14px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .tc-next-header-left {
            flex: 1;
        }
        .tc-next-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 17px;
            font-weight: 800;
            color: #1a1a2e;
            margin-bottom: 4px;
        }
        .tc-next-notice {
            font-size: 11px;
            color: #9ca3af;
        }
        .tc-refresh-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
            color: #D97706;
            padding: 8px 14px;
            border-radius: 12px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tc-refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245,158,11,0.3);
        }
        .tc-refresh-btn i {
            transition: transform 0.3s;
        }
        .tc-refresh-btn:active i {
            transform: rotate(180deg);
        }
        .tc-next-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        /* 반응형: 2x2 */
        @media (max-width: 900px) {
            .tc-next-grid { grid-template-columns: repeat(2, 1fr); }
        }
        /* 반응형: 1x1 */
        @media (max-width: 480px) {
            .tc-next-grid { grid-template-columns: 1fr; }
        }
        .tc-next-card {
            background: white;
            border: 1.5px solid #e5e7eb;
            border-radius: 16px;
            padding: 18px 14px;
            text-align: center;
            transition: all 0.2s;
        }
        .tc-next-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .tc-next-card.selected-card {
            border: 2px solid #10B981;
            background: linear-gradient(135deg, #ECFDF5, #D1FAE5);
        }
        .tc-next-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        .tc-next-card-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 13px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
            line-height: 1.4;
            min-height: 36px;
        }
        .tc-next-ai {
            display: inline-block;
            background: #EDE9FE;
            color: #7C3AED;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .tc-next-meta {
            display: flex;
            justify-content: center;
            gap: 12px;
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 12px;
        }
        .tc-next-btn {
            width: 100%;
            background: linear-gradient(135deg, #8B5CF6, #7C3AED);
            color: white;
            border: none;
            padding: 9px 0;
            border-radius: 12px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tc-next-btn:hover { opacity: 0.9; transform: translateY(-1px); }
        .tc-next-btn.selected {
            background: linear-gradient(135deg, #10B981, #059669);
        }

        /* 다음 주 미션 미리보기 (팀 미션 카드 내) */
        .tc-next-preview {
            margin-top: 16px;
            padding-top: 14px;
            border-top: 1px dashed rgba(255,255,255,0.3);
        }
        .tc-next-preview-label {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 6px;
        }
        .tc-next-preview-content {
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .tc-next-preview-empty {
            font-size: 12px;
            opacity: 0.7;
            padding: 8px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .tc-comment-card {
                width: 168px;
                padding: 16px;
            }
            .tc-comment-name { font-size: 14px; }
            .tc-comment-text { font-size: 14px; }
            .tc-marquee-track { gap: 14px; }
        }

        /* 내 메시지 스타일 (특별) */
        .tc-comment-card.my-message {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
            box-shadow: 0 6px 16px rgba(245, 158, 11, 0.35);
            position: relative;
        }
        .tc-comment-card.my-message::before {
            content: '✨ 나';
            position: absolute;
            top: -10px;
            right: 10px;
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
        }
        .tc-comment-card.my-message .tc-comment-name {
            color: #D97706;
        }

        /* 한마디 작성 팝업 */
        .comment-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .comment-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .comment-modal {
            background: white;
            border-radius: 24px;
            padding: 24px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s;
        }
        .comment-modal-overlay.active .comment-modal {
            transform: translateY(0) scale(1);
        }
        .comment-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .comment-modal-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 18px;
            font-weight: 800;
            color: #1a1a2e;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .comment-modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: #f3f4f6;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 14px;
        }
        .comment-textarea {
            width: 100%;
            height: 100px;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 16px;
            font-size: 15px;
            font-family: 'Noto Sans KR', sans-serif;
            resize: none;
            margin-bottom: 16px;
            transition: all 0.2s;
        }
        .comment-textarea:focus {
            outline: none;
            border-color: #7C3AED;
            box-shadow: 0 0 0 3px rgba(124,58,237,0.1);
        }
        .comment-char-count {
            text-align: right;
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 16px;
        }
        .comment-submit-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #7C3AED, #8B5CF6);
            color: white;
            border: none;
            border-radius: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .comment-submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124,58,237,0.4);
        }
        .comment-submit-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* 친구 도와주기 팝업 */
        .help-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .help-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .help-modal {
            background: white;
            border-radius: 24px;
            padding: 28px;
            width: 90%;
            max-width: 380px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s;
        }
        .help-modal-overlay.active .help-modal {
            transform: translateY(0) scale(1);
        }
        .help-modal-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        .help-modal-title {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 20px;
            font-weight: 800;
            color: #1a1a2e;
            margin-bottom: 12px;
        }
        .help-modal-desc {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .help-modal-friend {
            background: #f3f4f6;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .help-modal-avatar {
            width: 48px;
            height: 48px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        .help-modal-friend-info {
            text-align: left;
        }
        .help-modal-friend-name {
            font-weight: 700;
            color: #1a1a2e;
            font-size: 15px;
        }
        .help-modal-friend-status {
            font-size: 12px;
            color: #ef4444;
        }
        .help-modal-cost {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 2px solid #F59E0B;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
        }
        .help-modal-cost-label {
            font-size: 12px;
            color: #92400E;
            margin-bottom: 4px;
        }
        .help-modal-cost-value {
            font-size: 24px;
            font-weight: 800;
            color: #D97706;
        }
        .help-modal-btns {
            display: flex;
            gap: 12px;
        }
        .help-modal-cancel {
            flex: 1;
            padding: 14px;
            background: #f3f4f6;
            color: #6b7280;
            border: none;
            border-radius: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
        }
        .help-modal-confirm {
            flex: 1;
            padding: 14px;
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            border: none;
            border-radius: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .help-modal-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16,185,129,0.4);
        }

        /* 성공 상태로 변경된 카드 */
        .tc-member-card.helped .tc-status-fail {
            display: none;
        }
        .tc-member-card.helped .tc-help-btn {
            display: none;
        }
        .tc-member-card.helped .tc-status-helped {
            display: inline-block;
            font-size: 12px;
            color: #10b981;
            font-weight: 600;
        }
        .tc-status-helped {
            display: none;
        }

        /* 토스트 애니메이션 */
        @keyframes toastIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        @keyframes toastOut {
            from { opacity: 1; transform: translateX(-50%) translateY(0); }
            to { opacity: 0; transform: translateX(-50%) translateY(20px); }
        }
    </style>
</head>
<body class="bg-white font-sans text-gray-800 h-screen overflow-hidden">
    <!-- 모바일 햄버거 버튼 -->
    <button class="sidebar-toggle" id="sidebar-toggle-btn" onclick="toggleSidebar()">
        <i class="fa-solid fa-bars text-gray-600 text-lg"></i>
    </button>

    <!-- 사이드바 오버레이 -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>

    <div class="flex w-full h-full">
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="flex-1 h-full overflow-y-auto">
            <!-- 페이지 헤더 -->
            <div class="page-header">
                <div class="flex items-center gap-16px">
                    <div class="challenge-avatar">
                        🏆
                    </div>
                    <div style="margin-left:12px;">
                        <div class="page-header-title">
                            오늘의 도전
                        </div>
                        <div class="page-header-desc">
                            매일 도전하고 친구들과 함께 성장해요
                        </div>
                    </div>
                </div>
            </div>

            <!-- 도전 탭 -->
            <div class="challenge-tabs">
                <button class="challenge-tab active" data-ctab="today" onclick="switchChallengeTab('today')">
                    <i class="fa-solid fa-fire"></i>
                    오늘의 도전
                </button>
                <button class="challenge-tab" data-ctab="team" onclick="switchChallengeTab('team')">
                    <i class="fa-solid fa-users"></i>
                    팀 도전
                </button>
            </div>

            <!-- 콘텐츠 영역 -->
            <div class="challenge-container">
                <!-- 오늘의 도전 -->
                <div id="ctab-today" class="challenge-content">
                    <div class="today-challenge-section">
                        <!-- 도전 리스트 -->
                        <div class="challenge-list">
                        </div>

                        <!-- B 영역: 주간 미션 -->
                        <div class="krs-weekly-section" style="margin-top: 8px;">
                            <!-- 섹션 타이틀 -->
                            <div class="section-title-bar" style="margin-bottom: 16px;">
                                <div class="section-title-main">
                                    <span class="section-title-icon">⚡</span>
                                    <span class="section-title-text">오늘의 도전</span>
                                </div>
                                <span class="section-title-count">0/4 완료</span>
                            </div>

                            <!-- 미션 리스트 -->
                            <div class="krs-mission-list">
                                <!-- 미션 1: 코어북 -->
                                <div class="krs-mission-item">
                                    <div class="krs-mission-icon blue">📘</div>
                                    <div class="krs-mission-info">
                                        <div class="krs-mission-label">[KRS 메인]</div>
                                        <div class="krs-mission-text">코어북 읽기 + 활동</div>
                                    </div>
                                    <div class="krs-mission-xp">
                                        <span class="krs-mission-xp-icon">⚡</span>
                                        <span class="krs-mission-xp-value">+20 XP</span>
                                    </div>
                                </div>

                                <!-- 미션 2: 퀴즈 -->
                                <div class="krs-mission-item">
                                    <div class="krs-mission-icon green">📝</div>
                                    <div class="krs-mission-info">
                                        <div class="krs-mission-label">[KRS 퀴즈]</div>
                                        <div class="krs-mission-text">독서 퀴즈 완료</div>
                                    </div>
                                    <div class="krs-mission-xp">
                                        <span class="krs-mission-xp-icon">⚡</span>
                                        <span class="krs-mission-xp-value">+10 XP</span>
                                    </div>
                                </div>

                                <!-- 미션 3: 관리이북 -->
                                <div class="krs-mission-item">
                                    <div class="krs-mission-icon yellow">📙</div>
                                    <div class="krs-mission-info">
                                        <div class="krs-mission-label">[KRS 짝꿍책]</div>
                                        <div class="krs-mission-text">관리이북 읽기</div>
                                    </div>
                                    <div class="krs-mission-xp">
                                        <span class="krs-mission-xp-icon">⚡</span>
                                        <span class="krs-mission-xp-value">+10 XP</span>
                                    </div>
                                </div>

                                <!-- 미션 4: 리텔링 -->
                                <div class="krs-mission-item">
                                    <div class="krs-mission-icon purple">🎤</div>
                                    <div class="krs-mission-info">
                                        <div class="krs-mission-label">[KRS 리텔링]</div>
                                        <div class="krs-mission-text">리텔링 활동 완료</div>
                                    </div>
                                    <div class="krs-mission-xp">
                                        <span class="krs-mission-xp-icon">⚡</span>
                                        <span class="krs-mission-xp-value">+10 XP</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- A 영역: 6개월 장기 목표 (토스 스타일) -->
                        <div class="krs-long-term-section" style="margin-top: 32px;">
                            <!-- 섹션 타이틀 -->
                            <div class="section-title-bar" style="margin-bottom: 20px;">
                                <div class="section-title-main">
                                    <span class="section-title-icon">🎯</span>
                                    <span class="section-title-text">나의 레벨업 여정</span>
                                </div>
                                <button onclick="openLevelUpInfoModal()" class="levelup-info-btn">
                                    <i class="fa-solid fa-circle-question"></i>
                                    어떻게 레벨업 할 수 있어요?
                                </button>
                            </div>

                            <!-- 토스 스타일 목표 카드 (컴팩트) -->
                            <div class="toss-goal-card-compact">
                                <!-- 메인 정보 영역 -->
                                <div class="compact-main">
                                    <!-- 왼쪽: 시작 메달 -->
                                    <div class="compact-badge">🚩</div>

                                    <!-- 중앙: 진행 정보 -->
                                    <div class="compact-info">
                                        <div class="compact-title">K2-2 승급 도전!</div>
                                        <div class="compact-level">Lv. K2-1 → K2-2</div>

                                        <!-- 24주차 진행 칸 -->
                                        <div class="week-progress-container">
                                            <div class="week-progress-grid">
                                                <!-- 완료된 주차 (10주) -->
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <!-- 중간 빈 칸 (2주) - 보완 필요 -->
                                                <div class="week-box empty missing">
                                                    <div class="week-tooltip">보완 필요</div>
                                                </div>
                                                <div class="week-box empty missing">
                                                    <div class="week-tooltip">보완 필요</div>
                                                </div>
                                                <!-- 다시 완료된 주차 (5주) -->
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <div class="week-box completed"></div>
                                                <!-- 미완료 주차 (7주) -->
                                                <div class="week-box empty"></div>
                                                <div class="week-box empty"></div>
                                                <div class="week-box empty"></div>
                                                <div class="week-box empty"></div>
                                                <div class="week-box empty"></div>
                                                <div class="week-box empty"></div>
                                                <div class="week-box empty"></div>
                                            </div>
                                            <div class="week-progress-info">
                                                <span class="weeks-completed">15주 완료</span>
                                                <span class="weeks-remaining">9주 남음</span>
                                            </div>
                                        </div>

                                        <div class="compact-xp">
                                            <span class="xp-current">420</span> / <span class="xp-total">600 XP</span>
                                            <span class="xp-percent">(70%)</span>
                                        </div>
                                    </div>

                                    <!-- 우측: 보상 메달 -->
                                    <div class="compact-reward-badge">
                                        <div class="reward-badge-icon">🥉</div>
                                        <div class="reward-badge-label">보상</div>
                                    </div>
                                </div>

                                <!-- 보완 필요 영역 -->
                                <div class="compact-missing-section">
                                    <div class="missing-header">
                                        <span class="missing-icon">🔥</span>
                                        <span class="missing-title">보완 필요</span>
                                    </div>
                                    <div class="missing-list">
                                        <div class="missing-item">
                                            <span class="missing-week">[11주차]</span>
                                            <span class="missing-text">독서 퀴즈 정답률이 <span class="highlight-emphasis">10%</span>예요 다시 풀어서 승급 점수를 올려봐요</span>
                                        </div>
                                        <div class="missing-item">
                                            <span class="missing-week">[12주차]</span>
                                            <span class="missing-text">AI 어휘 획득이 <span class="highlight-emphasis">조금 부족</span>했어요! 다시 풀어서 어휘를 더 수집해봐요</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- KRS 로드맵 -->
                                <div class="krs-roadmap" data-current-score="420" data-next-milestone="600">
                                    <!-- 현재 위치 배지 (동적 위치) -->
                                    <div class="roadmap-current-badge" style="left: 17.5%;">내 위치: 420</div>

                                    <div class="roadmap-step active">
                                        <div class="roadmap-icon-wrapper">
                                            <div class="roadmap-icon">🚩</div>
                                        </div>
                                        <div class="roadmap-info">
                                            <div class="roadmap-score">0점</div>
                                            <div class="roadmap-label">시작</div>
                                        </div>
                                    </div>
                                    <div class="roadmap-line-container">
                                        <div class="roadmap-line-bg"></div>
                                        <div class="roadmap-line-progress" style="width: 70%;"></div>
                                    </div>
                                    <div class="roadmap-step">
                                        <div class="roadmap-icon-wrapper">
                                            <div class="roadmap-icon">🥉</div>
                                        </div>
                                        <div class="roadmap-info">
                                            <div class="roadmap-score">600점</div>
                                            <div class="roadmap-label">브론즈</div>
                                            <div class="roadmap-badge">K2-2 달성</div>
                                        </div>
                                    </div>
                                    <div class="roadmap-line-container">
                                        <div class="roadmap-line-bg"></div>
                                    </div>
                                    <div class="roadmap-step inactive">
                                        <div class="roadmap-icon-wrapper">
                                            <div class="roadmap-icon">🥈</div>
                                        </div>
                                        <div class="roadmap-info">
                                            <div class="roadmap-score">700점</div>
                                            <div class="roadmap-label">실버</div>
                                        </div>
                                    </div>
                                    <div class="roadmap-line-container">
                                        <div class="roadmap-line-bg"></div>
                                    </div>
                                    <div class="roadmap-step inactive">
                                        <div class="roadmap-icon-wrapper">
                                            <div class="roadmap-icon">🏆</div>
                                        </div>
                                        <div class="roadmap-info">
                                            <div class="roadmap-score">800점</div>
                                            <div class="roadmap-label">골드</div>
                                        </div>
                                    </div>
                                    <div class="roadmap-line-container">
                                        <div class="roadmap-line-bg"></div>
                                    </div>
                                    <div class="roadmap-step inactive">
                                        <div class="roadmap-icon-wrapper">
                                            <div class="roadmap-icon">💎</div>
                                        </div>
                                        <div class="roadmap-info">
                                            <div class="roadmap-score">900점+</div>
                                            <div class="roadmap-label">다이아</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 보상 영역 -->
                                <div class="compact-rewards">
                                    <div class="compact-reward-title">🎁 레벨업 보상</div>
                                    <div class="compact-reward-list">
                                        <span class="compact-reward-item">🏆 K2-2 레벨</span>
                                        <span class="compact-reward-divider">•</span>
                                        <span class="compact-reward-item">📜 K2-1 수료증</span>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- 나도 한마디 (오늘의 도전에 배치) -->
                        <div class="tc-comment-section" style="margin-top: 24px;">
                            <div class="tc-comment-header">
                                <h3 class="tc-comment-title">💬 나도 한마디 💬</h3>
                                <button class="tc-write-btn" onclick="openCommentModal()">✏️ 작성</button>
                            </div>
                            <div class="tc-marquee-wrap">
                                <div class="tc-marquee-track" id="comment-track">
                                    <!-- 세트 1 -->
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">코딩마스터</p>
                                        <p class="tc-comment-info">3학년 · (서울)서울초등학교</p>
                                        <p class="tc-comment-text">"우리 팀 화이팅!"</p>
                                        <span class="tc-comment-team" style="background:#FF6B6B;">🌟 꿈나무탐험대</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">영어천재</p>
                                        <p class="tc-comment-info">6학년 · (서울)한강초등학교</p>
                                        <p class="tc-comment-text">"모두 힘내세요!"</p>
                                        <span class="tc-comment-team" style="background:#845EF7;">✨ 별빛정원</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">과학왕</p>
                                        <p class="tc-comment-info">5학년 · (인천)미래초등학교</p>
                                        <p class="tc-comment-text">"파이팅!"</p>
                                        <span class="tc-comment-team" style="background:#20C997;">🚀 용감한탐험가</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">수학마법사</p>
                                        <p class="tc-comment-info">6학년 · (부산)푸른초등학교</p>
                                        <p class="tc-comment-text">"함께 해요!"</p>
                                        <span class="tc-comment-team" style="background:#51CF66;">🍀 행운의숲</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">독서왕</p>
                                        <p class="tc-comment-info">5학년 · (대전)햇살초등학교</p>
                                        <p class="tc-comment-text">"우리 모두 최고!"</p>
                                        <span class="tc-comment-team" style="background:#FCC419;">💡 스마트탐험단</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">그림요정</p>
                                        <p class="tc-comment-info">4학년 · (경기)별빛초등학교</p>
                                        <p class="tc-comment-text">"오늘도 열심히!"</p>
                                        <span class="tc-comment-team" style="background:#FF922B;">🎨 창작공방</span>
                                    </div>
                                    <!-- 세트 2 (무한루프용 복제) -->
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">코딩마스터</p>
                                        <p class="tc-comment-info">3학년 · (서울)서울초등학교</p>
                                        <p class="tc-comment-text">"우리 팀 화이팅!"</p>
                                        <span class="tc-comment-team" style="background:#FF6B6B;">🌟 꿈나무탐험대</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">영어천재</p>
                                        <p class="tc-comment-info">6학년 · (서울)한강초등학교</p>
                                        <p class="tc-comment-text">"모두 힘내세요!"</p>
                                        <span class="tc-comment-team" style="background:#845EF7;">✨ 별빛정원</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">과학왕</p>
                                        <p class="tc-comment-info">5학년 · (인천)미래초등학교</p>
                                        <p class="tc-comment-text">"파이팅!"</p>
                                        <span class="tc-comment-team" style="background:#20C997;">🚀 용감한탐험가</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-1">
                                        <p class="tc-comment-name">수학마법사</p>
                                        <p class="tc-comment-info">6학년 · (부산)푸른초등학교</p>
                                        <p class="tc-comment-text">"함께 해요!"</p>
                                        <span class="tc-comment-team" style="background:#51CF66;">🍀 행운의숲</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-2">
                                        <p class="tc-comment-name">독서왕</p>
                                        <p class="tc-comment-info">5학년 · (대전)햇살초등학교</p>
                                        <p class="tc-comment-text">"우리 모두 최고!"</p>
                                        <span class="tc-comment-team" style="background:#FCC419;">💡 스마트탐험단</span>
                                    </div>
                                    <div class="tc-comment-card tc-float-3">
                                        <p class="tc-comment-name">그림요정</p>
                                        <p class="tc-comment-info">4학년 · (경기)별빛초등학교</p>
                                        <p class="tc-comment-text">"오늘도 열심히!"</p>
                                        <span class="tc-comment-team" style="background:#FF922B;">🎨 창작공방</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 팀 도전 -->
                <div id="ctab-team" class="challenge-content hidden">
                    <!-- 팀 미션 & 우리팀 -->
                    <div class="tc-group">
                        <!-- 왼쪽: 팀 미션 -->
                        <div class="tc-mission-card">
                            <span class="tc-mission-badge">✨ 이번 주 팀 미션</span>
                            <div class="tc-mission-icon">👥</div>
                            <h3 class="tc-mission-title">책 10권 읽기</h3>
                            <div class="tc-mission-reward">⭐ 별 2개 + xp 100</div>
                            <!-- 다음 주 미션 미리보기 -->
                            <div class="tc-next-preview" id="next-mission-preview">
                                <p class="tc-next-preview-label">📅 다음 주 미션</p>
                                <div class="tc-next-preview-empty" id="next-mission-empty">
                                    👇 미션을 골라주세요!
                                </div>
                                <div class="tc-next-preview-content" id="next-mission-content" style="display:none;">
                                    <span id="next-mission-icon"></span>
                                    <span id="next-mission-title"></span>
                                </div>
                            </div>
                        </div>

                        <!-- 오른쪽: 우리팀 -->
                        <div class="tc-team-right">
                            <div class="tc-team-header">
                                <h3 class="tc-team-header-title">이번 주 우리팀 : <strong>지식의숲</strong></h3>
                                <span class="tc-team-dday">⏱ D-3</span>
                            </div>

                            <!-- 대표 팀원 카드 -->
                            <div class="tc-featured-card">
                                <span class="tc-rank-badge">🏅 올랭 1등급</span>
                                <div class="tc-featured-avatar">🐱</div>
                                <p class="tc-featured-name">달콤한딸기 🍓</p>
                                <p class="tc-featured-info">5학년 · 서울초등학교</p>
                                <p class="tc-featured-quote">"뭘 해도 믿음만한 친구예요. 같은 팀이 된건 행운입니다."</p>
                                <div class="tc-featured-result">
                                    <span class="tc-result-success">미션 성공</span>
                                </div>
                                <p class="tc-featured-reward">⭐ 별 2개 + xp 10</p>
                            </div>

                            <!-- 팀원 그리드 -->
                            <div class="tc-members-grid">
                                <div class="tc-member-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">🐰</div>
                                        <div>
                                            <p class="tc-member-name">별빛탐험가</p>
                                            <p class="tc-member-info">5학년 · (서울)강초등학교</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-progress">🔄 진행중</span>
                                        <div class="tc-progress-bar"><div class="tc-progress-fill" style="width:65%"></div></div>
                                        <span class="tc-progress-text">65%</span>
                                    </div>
                                </div>
                                <div class="tc-member-card" id="science-doctor-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">🐻</div>
                                        <div>
                                            <p class="tc-member-name">과학박사</p>
                                            <p class="tc-member-info">5학년 · (인천)미래초등학교</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-fail">❌ 미션 실패</span>
                                        <span class="tc-status-helped">✅ 도움 받아 성공!</span>
                                        <button class="tc-help-btn" onclick="openHelpModal()">친구 도와주기 🎟️1</button>
                                    </div>
                                </div>
                                <div class="tc-member-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">🐻</div>
                                        <div>
                                            <p class="tc-member-name">책읽는곰</p>
                                            <p class="tc-member-info">5학년 · (서울)푸른초등학교</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-ready">⏳ 준비중</span>
                                    </div>
                                </div>
                                <div class="tc-member-card">
                                    <div class="tc-member-top">
                                        <div class="tc-member-avatar">🦊</div>
                                        <div>
                                            <p class="tc-member-name">나는우희</p>
                                            <p class="tc-member-info">5학년 · (서울)해맑은초등학교</p>
                                        </div>
                                    </div>
                                    <div class="tc-member-status">
                                        <span class="tc-status-progress">🔄 진행중</span>
                                        <div class="tc-progress-bar"><div class="tc-progress-fill" style="width:40%"></div></div>
                                        <span class="tc-progress-text">40%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4. 다음 주 미션 고르기 -->
                    <div class="tc-next-section">
                        <div class="tc-next-header">
                            <div class="tc-next-header-left">
                                <h3 class="tc-next-title">⚡ 다음 주 미션 고르기</h3>
                                <p class="tc-next-notice">일요일 밤 11시까지만 변경할 수 있고, 신청하지 않으면 랜덤 미션이 제공돼요.</p>
                            </div>
                            <button class="tc-refresh-btn" onclick="refreshMissions()">
                                <i class="fa-solid fa-rotate"></i>
                                <span>새로 불러오기</span>
                                <span style="color:#92400E;">xp 50</span>
                            </button>
                        </div>
                        <div class="tc-next-grid" id="mission-grid">
                            <!-- 미션 1 -->
                            <div class="tc-next-card" data-mission="mission1" data-icon="📖" data-title="초등 필독서 3권 읽고 독후감 쓰기">
                                <div class="tc-next-icon" style="color:#7C3AED;">📖</div>
                                <p class="tc-next-card-title">초등 필독서 3권 읽고 독후감 쓰기</p>
                                <span class="tc-next-ai">🤖 AI 예상 성공률 100%</span>
                                <div class="tc-next-meta">
                                    <span>⭐ 별 1개</span>
                                    <span>👥 2,897팀</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">도전 예약하기</button>
                            </div>
                            <!-- 미션 2 -->
                            <div class="tc-next-card" data-mission="mission2" data-icon="🛒" data-title="스타샵에서 1000원 이상 사용해보기">
                                <div class="tc-next-icon" style="color:#059669;">🛒</div>
                                <p class="tc-next-card-title">스타샵에서 1000원 이상 사용해보기</p>
                                <span class="tc-next-ai">🤖 AI 예상 성공률 70%</span>
                                <div class="tc-next-meta">
                                    <span>⭐ 별 5개</span>
                                    <span>👥 1,842팀</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">도전 예약하기</button>
                            </div>
                            <!-- 미션 3 -->
                            <div class="tc-next-card" data-mission="mission3" data-icon="🤖" data-title="AI챗봇과 구구단 게임 해보기">
                                <div class="tc-next-icon" style="color:#DC2626;">🤖</div>
                                <p class="tc-next-card-title">AI챗봇과 구구단 게임 해보기</p>
                                <span class="tc-next-ai">🤖 AI 예상 성공률 50%</span>
                                <div class="tc-next-meta">
                                    <span>⭐ 별 3개</span>
                                    <span>👥 3,521팀</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">도전 예약하기</button>
                            </div>
                            <!-- 랜덤 미션 (컬러 통일) -->
                            <div class="tc-next-card" data-mission="random" data-icon="❓" data-title="랜덤미션">
                                <div class="tc-next-icon" style="color:#7C3AED;">❓</div>
                                <p class="tc-next-card-title">랜덤미션</p>
                                <span class="tc-next-ai">🎲 신비로운 미션!</span>
                                <div class="tc-next-meta">
                                    <span>⭐ ???</span>
                                    <span>👥 892팀</span>
                                </div>
                                <button class="tc-next-btn" onclick="selectTeamMission(this)">도전 예약하기</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 로그아웃 모달 컨테이너 -->
    <div id="logout-modal-container"></div>

    <!-- 한마디 작성 팝업 -->
    <div class="comment-modal-overlay" id="comment-modal-overlay" onclick="closeCommentModal(event)">
        <div class="comment-modal" onclick="event.stopPropagation()">
            <div class="comment-modal-header">
                <h3 class="comment-modal-title">✏️ 나도 한마디</h3>
                <button class="comment-modal-close" onclick="closeCommentModal()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <textarea class="comment-textarea" id="comment-textarea" placeholder="친구들에게 응원의 한마디를 남겨보세요!" maxlength="30" oninput="updateCharCount()"></textarea>
            <div class="comment-char-count"><span id="char-count">0</span>/30</div>
            <button class="comment-submit-btn" id="comment-submit-btn" onclick="submitComment()" disabled>한마디 등록하기</button>
        </div>
    </div>

    <!-- 친구 도와주기 팝업 -->
    <div class="help-modal-overlay" id="help-modal-overlay" onclick="closeHelpModal(event)">
        <div class="help-modal" onclick="event.stopPropagation()">
            <div class="help-modal-icon">🤝</div>
            <h3 class="help-modal-title">친구 도와주기</h3>
            <p class="help-modal-desc">티켓을 사용하여 친구의 미션을<br>성공으로 바꿔줄 수 있어요!</p>
            <div class="help-modal-friend">
                <div class="help-modal-avatar">🐻</div>
                <div class="help-modal-friend-info">
                    <p class="help-modal-friend-name">과학박사</p>
                    <p class="help-modal-friend-status">❌ 미션 실패</p>
                </div>
            </div>
            <div class="help-modal-cost">
                <p class="help-modal-cost-label">사용 티켓</p>
                <p class="help-modal-cost-value">🎟️ 1장</p>
            </div>
            <div class="help-modal-btns">
                <button class="help-modal-cancel" onclick="closeHelpModal()">취소</button>
                <button class="help-modal-confirm" onclick="confirmHelp()">도와주기</button>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="../js/common.js"></script>
    <script src="../js/sidebar.js"></script>
    <script>
    // === 도전 탭 전환 ===
    function switchChallengeTab(tab) {
        // 탭 버튼 상태 변경
        document.querySelectorAll('.challenge-tab').forEach(t => {
            t.classList.toggle('active', t.dataset.ctab === tab);
        });

        // 콘텐츠 표시/숨김
        document.querySelectorAll('.challenge-content').forEach(c => {
            c.classList.add('hidden');
        });
        document.getElementById('ctab-' + tab).classList.remove('hidden');
    }

    // === 팀 미션 선택 ===
    function selectTeamMission(btn) {
        // 모든 버튼 및 카드 초기화
        document.querySelectorAll('.tc-next-btn').forEach(b => {
            b.classList.remove('selected');
            b.textContent = '도전 예약하기';
        });
        document.querySelectorAll('.tc-next-card').forEach(c => {
            c.classList.remove('selected-card');
        });

        // 선택한 버튼 활성화
        btn.classList.add('selected');
        btn.textContent = '✓ 예약 완료';

        // 카드 선택 상태
        const card = btn.closest('.tc-next-card');
        card.classList.add('selected-card');

        // 다음 주 미션 미리보기 업데이트
        const icon = card.dataset.icon;
        const title = card.dataset.title;

        document.getElementById('next-mission-empty').style.display = 'none';
        document.getElementById('next-mission-content').style.display = 'flex';
        document.getElementById('next-mission-icon').textContent = icon;
        document.getElementById('next-mission-title').textContent = title;

        // localStorage에 저장
        localStorage.setItem('selectedNextMission', JSON.stringify({ icon, title }));
    }

    // === 미션 새로 불러오기 ===
    const missionPool = [
        { icon: '📖', title: '초등 필독서 3권 읽고 독후감 쓰기', color: '#7C3AED', ai: '100%', stars: '1개', teams: '2,897' },
        { icon: '🛒', title: '스타샵에서 1000원 이상 사용해보기', color: '#059669', ai: '70%', stars: '5개', teams: '1,842' },
        { icon: '🤖', title: 'AI챗봇과 구구단 게임 해보기', color: '#DC2626', ai: '50%', stars: '3개', teams: '3,521' },
        { icon: '📚', title: '일주일간 매일 책 1권씩 읽기', color: '#2563EB', ai: '85%', stars: '4개', teams: '1,523' },
        { icon: '✏️', title: '독서 일기 5일 연속 쓰기', color: '#7C3AED', ai: '90%', stars: '2개', teams: '2,145' },
        { icon: '🎯', title: '어휘 퀴즈 만점 3회 달성하기', color: '#EA580C', ai: '65%', stars: '3개', teams: '1,876' },
        { icon: '🏆', title: '독서왕 랭킹 50위 안에 들기', color: '#D97706', ai: '40%', stars: '7개', teams: '987' },
        { icon: '🌟', title: '친구 3명 이상 독서 도와주기', color: '#059669', ai: '80%', stars: '4개', teams: '1,654' },
        { icon: '📝', title: '책 추천 리뷰 2개 작성하기', color: '#7C3AED', ai: '95%', stars: '2개', teams: '3,012' },
        { icon: '🎮', title: 'AI 독서 게임 5판 클리어하기', color: '#DC2626', ai: '75%', stars: '3개', teams: '2,341' }
    ];

    function refreshMissions() {
        // XP 확인 및 차감
        let xp = parseInt(localStorage.getItem('userXP') || '500');
        if (xp < 50) {
            showRefreshToast('XP가 부족합니다!', 'error');
            return;
        }
        xp -= 50;
        localStorage.setItem('userXP', xp);

        // 미션 선택 초기화
        document.getElementById('next-mission-empty').style.display = 'block';
        document.getElementById('next-mission-content').style.display = 'none';
        localStorage.removeItem('selectedNextMission');

        // 랜덤 미션 3개 선택
        const shuffled = [...missionPool].sort(() => Math.random() - 0.5);
        const selectedMissions = shuffled.slice(0, 3);

        // 그리드 렌더링
        const grid = document.getElementById('mission-grid');
        let html = '';

        selectedMissions.forEach((m, i) => {
            html += `
            <div class="tc-next-card" data-mission="mission${i+1}" data-icon="${m.icon}" data-title="${m.title}">
                <div class="tc-next-icon" style="color:${m.color};">${m.icon}</div>
                <p class="tc-next-card-title">${m.title}</p>
                <span class="tc-next-ai">🤖 AI 예상 성공률 ${m.ai}</span>
                <div class="tc-next-meta">
                    <span>⭐ 별 ${m.stars}</span>
                    <span>👥 ${m.teams}팀</span>
                </div>
                <button class="tc-next-btn" onclick="selectTeamMission(this)">도전 예약하기</button>
            </div>`;
        });

        // 랜덤 미션 추가
        html += `
            <div class="tc-next-card" data-mission="random" data-icon="❓" data-title="랜덤미션">
                <div class="tc-next-icon" style="color:#7C3AED;">❓</div>
                <p class="tc-next-card-title">랜덤미션</p>
                <span class="tc-next-ai">🎲 신비로운 미션!</span>
                <div class="tc-next-meta">
                    <span>⭐ ???</span>
                    <span>👥 892팀</span>
                </div>
                <button class="tc-next-btn" onclick="selectTeamMission(this)">도전 예약하기</button>
            </div>`;

        grid.innerHTML = html;

        showRefreshToast('새로운 미션을 불러왔어요! (xp -50)', 'success');
    }

    function showRefreshToast(message, type) {
        const toast = document.createElement('div');
        const bgColor = type === 'error'
            ? 'linear-gradient(135deg, #EF4444, #DC2626)'
            : 'linear-gradient(135deg, #F59E0B, #D97706)';
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: ${bgColor};
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            z-index: 2000;
            animation: toastIn 0.3s ease-out;
        `;
        toast.innerHTML = message;
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.style.animation = 'toastOut 0.3s ease-out forwards';
            setTimeout(() => toast.remove(), 300);
        }, 2000);
    }

    // === 한마디 작성 팝업 ===
    function openCommentModal() {
        document.getElementById('comment-modal-overlay').classList.add('active');
        document.getElementById('comment-textarea').value = '';
        document.getElementById('char-count').textContent = '0';
        document.getElementById('comment-submit-btn').disabled = true;
    }

    function closeCommentModal(event) {
        if (event && event.target !== event.currentTarget) return;
        document.getElementById('comment-modal-overlay').classList.remove('active');
    }

    function updateCharCount() {
        const textarea = document.getElementById('comment-textarea');
        const count = textarea.value.length;
        document.getElementById('char-count').textContent = count;
        document.getElementById('comment-submit-btn').disabled = count === 0;
    }

    function submitComment() {
        const textarea = document.getElementById('comment-textarea');
        const message = textarea.value.trim();
        if (!message) return;

        // 내 메시지 카드 생성
        const myCard = document.createElement('div');
        myCard.className = 'tc-comment-card my-message tc-float-1';
        myCard.innerHTML = `
            <p class="tc-comment-name">나는우희</p>
            <p class="tc-comment-info">5학년 · (서울)해맑은초등학교</p>
            <p class="tc-comment-text">"${message}"</p>
            <span class="tc-comment-team" style="background:#F59E0B;">🦊 지식의숲</span>
        `;

        // 트랙 맨 앞에 추가
        const track = document.getElementById('comment-track');
        track.insertBefore(myCard, track.firstChild);

        // localStorage에 저장
        localStorage.setItem('myComment', message);

        // 팝업 닫기
        closeCommentModal();

        // 성공 알림
        showCommentToast();
    }

    function showCommentToast() {
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 8px 24px rgba(16,185,129,0.4);
            z-index: 2000;
            animation: toastIn 0.3s ease-out;
        `;
        toast.innerHTML = '✨ 한마디가 등록되었어요!';
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.style.animation = 'toastOut 0.3s ease-out forwards';
            setTimeout(() => toast.remove(), 300);
        }, 2000);
    }

    // === 친구 도와주기 팝업 ===
    function openHelpModal() {
        document.getElementById('help-modal-overlay').classList.add('active');
    }

    function closeHelpModal(event) {
        if (event && event.target !== event.currentTarget) return;
        document.getElementById('help-modal-overlay').classList.remove('active');
    }

    function confirmHelp() {
        // 티켓 차감 (localStorage)
        let tickets = parseInt(localStorage.getItem('tickets') || '10');
        if (tickets < 1) {
            alert('티켓이 부족합니다!');
            return;
        }
        tickets -= 1;
        localStorage.setItem('tickets', tickets);

        // 과학박사 카드 상태 변경
        const card = document.getElementById('science-doctor-card');
        card.classList.add('helped');

        // 상태 저장
        localStorage.setItem('scienceDoctorHelped', 'true');

        // 팝업 닫기
        closeHelpModal();

        // 성공 알림
        showHelpToast();
    }

    function showHelpToast() {
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #7C3AED, #8B5CF6);
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 8px 24px rgba(124,58,237,0.4);
            z-index: 2000;
            animation: toastIn 0.3s ease-out;
        `;
        toast.innerHTML = '🎉 과학박사를 도와줬어요! 🎟️-1';
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.style.animation = 'toastOut 0.3s ease-out forwards';
            setTimeout(() => toast.remove(), 300);
        }, 2000);
    }

    // === Init ===
    document.addEventListener('DOMContentLoaded', () => {
        loadSidebar('all-challenge');
        loadLogoutModal();

        // 저장된 내 메시지가 있으면 복원
        const savedComment = localStorage.getItem('myComment');
        if (savedComment) {
            const myCard = document.createElement('div');
            myCard.className = 'tc-comment-card my-message tc-float-1';
            myCard.innerHTML = `
                <p class="tc-comment-name">나는우희</p>
                <p class="tc-comment-info">5학년 · (서울)해맑은초등학교</p>
                <p class="tc-comment-text">"${savedComment}"</p>
                <span class="tc-comment-team" style="background:#F59E0B;">🦊 지식의숲</span>
            `;
            const track = document.getElementById('comment-track');
            track.insertBefore(myCard, track.firstChild);
        }

        // 도움 상태 복원
        const helped = localStorage.getItem('scienceDoctorHelped');
        if (helped === 'true') {
            document.getElementById('science-doctor-card').classList.add('helped');
        }

        // 저장된 다음 주 미션 선택 복원
        const savedMission = localStorage.getItem('selectedNextMission');
        if (savedMission) {
            const { icon, title } = JSON.parse(savedMission);
            document.getElementById('next-mission-empty').style.display = 'none';
            document.getElementById('next-mission-content').style.display = 'flex';
            document.getElementById('next-mission-icon').textContent = icon;
            document.getElementById('next-mission-title').textContent = title;

            // 해당 카드 선택 상태로 표시
            document.querySelectorAll('.tc-next-card').forEach(card => {
                if (card.dataset.title === title) {
                    card.classList.add('selected-card');
                    const btn = card.querySelector('.tc-next-btn');
                    btn.classList.add('selected');
                    btn.textContent = '✓ 예약 완료';
                }
            });
        }
    });
    </script>

<!-- 레벨업 정보 모달 -->
<div id="levelup-info-modal" class="levelup-modal" style="display: none;">
    <div class="levelup-modal-overlay" onclick="closeLevelUpInfoModal()"></div>
    <div class="levelup-modal-content">
        <div class="levelup-modal-header">
            <h3>어떻게 레벨업 할 수 있어요?</h3>
            <button onclick="closeLevelUpInfoModal()" class="levelup-modal-close">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="levelup-modal-body">
            <!-- 승급 티어표 -->
            <div class="levelup-tier-section">
                <h4 class="levelup-section-title">📊 승급 점수 기준</h4>
                <div class="levelup-tier-table">
                    <div class="tier-row">
                        <div class="tier-icon">🥉</div>
                        <div class="tier-name">브론즈</div>
                        <div class="tier-score">600점</div>
                    </div>
                    <div class="tier-row">
                        <div class="tier-icon">🥈</div>
                        <div class="tier-name">실버</div>
                        <div class="tier-score">700점</div>
                    </div>
                    <div class="tier-row">
                        <div class="tier-icon">🥇</div>
                        <div class="tier-name">골드</div>
                        <div class="tier-score">800점</div>
                    </div>
                    <div class="tier-row">
                        <div class="tier-icon">💎</div>
                        <div class="tier-name">다이아몬드</div>
                        <div class="tier-score">900점+</div>
                    </div>
                </div>
            </div>

            <!-- 점수 얻는 방법 (접기/펼치기) -->
            <div class="levelup-points-section">
                <button onclick="togglePointsDetail()" class="levelup-points-toggle">
                    <span class="toggle-icon" id="points-toggle-icon">
                        <i class="fa-solid fa-chevron-right"></i>
                    </span>
                    <span class="toggle-text">점수 얻는 방법</span>
                </button>
                <div id="points-detail-content" class="levelup-points-detail" style="display: none;">
                    <div class="points-week-group">
                        <div class="points-week-title">1주차 / 3주차</div>
                        <div class="points-item">
                            <span class="points-activity">코어북 읽기</span>
                            <span class="points-value">10점</span>
                        </div>
                        <div class="points-item">
                            <span class="points-activity">독서퀴즈</span>
                            <span class="points-value">10점</span>
                        </div>
                        <div class="points-item">
                            <span class="points-activity">독서 활동</span>
                            <span class="points-value">10점</span>
                        </div>
                    </div>
                    <div class="points-week-group">
                        <div class="points-week-title">2주차 / 4주차</div>
                        <div class="points-item">
                            <span class="points-activity">관리이북 읽기</span>
                            <span class="points-value">10점</span>
                        </div>
                        <div class="points-item">
                            <span class="points-activity">독서퀴즈</span>
                            <span class="points-value">10점</span>
                        </div>
                        <div class="points-item">
                            <span class="points-activity">리텔링 활동</span>
                            <span class="points-value">10점</span>
                        </div>
                    </div>
                    <div class="points-summary">
                        <div class="summary-item">
                            <i class="fa-solid fa-calendar-check"></i>
                            <span>24주차(6개월) 총 필수 학습 완료 시 <strong>720점</strong></span>
                        </div>
                        <div class="summary-item">
                            <i class="fa-solid fa-trophy"></i>
                            <span>승급 점수 조건: 독서퀴즈 50% 맞췄을 때 총 <strong>600점</strong></span>
                        </div>
                        <div class="points-notice">
                            <i class="fa-solid fa-circle-exclamation"></i>
                            <span>단, 600점을 채워도 코어북/관리이북 학습 종료가 되지 않았다면 승급할 수 없습니다.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function openLevelUpInfoModal() {
        document.getElementById('levelup-info-modal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    function closeLevelUpInfoModal() {
        document.getElementById('levelup-info-modal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    function togglePointsDetail() {
        const content = document.getElementById('points-detail-content');
        const icon = document.getElementById('points-toggle-icon');

        if (content.style.display === 'none') {
            content.style.display = 'block';
            icon.innerHTML = '<i class="fa-solid fa-chevron-down"></i>';
        } else {
            content.style.display = 'none';
            icon.innerHTML = '<i class="fa-solid fa-chevron-right"></i>';
        }
    }
</script>

<!-- Proto Navigation (공통 Dev Tool) -->
<link rel="stylesheet" href="../css/proto-nav.css">
<script src="../js/proto-nav.js"></script>
</body>
</html>
