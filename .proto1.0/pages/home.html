<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶í´ëŸ½ 3.0 - í™ˆ</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#FEF3C7', primary: '#FF9F43', dark: '#F368E0', secondary: '#54a0ff', green: '#1dd1a1', paper: '#FDFBF7',
                            report: { bg: '#F8FAFC', accent: '#4F46E5', dark: '#1E293B' },
                            tech: { dark: '#1e293b', purple: '#8b5cf6', blue: '#3b82f6', cyan: '#06b6d4' }
                        }
                    },
                    boxShadow: {
                        'soft': '0 10px 25px -5px rgba(0, 0, 0, 0.05)',
                        'floating': '0 20px 25px -5px rgba(255, 159, 67, 0.3)',
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/responsive.css">

    <style>
        .font-jua { font-family: 'Jua', sans-serif; }

        .week-nav-btn {
            transition: all 0.2s ease;
        }
        .week-nav-btn:hover {
            background: rgba(255, 159, 67, 0.1);
        }
        .week-nav-btn:active {
            transform: scale(0.95);
        }

        .main-book-card {
            transition: all 0.3s ease;
        }
        .main-book-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(255, 159, 67, 0.2);
        }

        .step-item {
            transition: all 0.2s ease;
        }
        .step-item.active {
            background: linear-gradient(135deg, #FF9F43 0%, #F368E0 100%);
            color: white;
        }
        .step-item.completed {
            background: #1dd1a1;
            color: white;
        }
        .step-item.locked {
            opacity: 0.4;
        }

        .book-card:hover {
            transform: translateY(-4px);
        }

        .level-badge {
            font-size: 10px;
            padding: 2px 8px;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        .week-dot {
            transition: all 0.3s ease;
        }
        .week-dot.bg-brand-primary {
            transform: scale(1.2);
        }

        #week-label {
            transition: all 0.2s ease;
        }

        .step-item {
            transition: all 0.2s ease;
        }
        .step-item.active {
            background: linear-gradient(135deg, #FF9F43 0%, #F368E0 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 159, 67, 0.3);
        }
        .step-item.completed {
            background: linear-gradient(135deg, #1dd1a1 0%, #10b981 100%);
            color: white;
        }
        .step-item.locked {
            opacity: 0.6;
        }
        .step-item:not(.locked):not(.active):hover {
            background: rgba(255, 159, 67, 0.1);
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-brand-bg font-sans text-gray-800 h-screen overflow-hidden">
    <div class="flex w-full h-full">
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="flex-1 h-full overflow-y-auto px-6 py-8 md:px-12">
            <!-- Header -->
            <header class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="font-jua text-2xl md:text-3xl text-gray-800">
                        <span data-user-name>ì§€í›ˆ</span>ë‹˜, ì•ˆë…•! ğŸ‘‹
                    </h2>
                    <p class="text-gray-500 mt-1">ì˜¤ëŠ˜ë„ ì¦ê±°ìš´ ë…ì„œ íƒí—˜ì„ ì‹œì‘í•´ë³¼ê¹Œìš”?</p>
                </div>
                <div class="flex items-center gap-3">
                    <div class="relative">
                        <input type="text" placeholder="ì±… ì œëª©, ì‘ê°€ ê²€ìƒ‰..." class="w-64 h-12 bg-white/80 border border-gray-200 rounded-2xl px-5 pr-12 outline-none focus:border-brand-primary focus:bg-white transition-all text-sm">
                        <i class="fa-solid fa-search absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <button onclick="window.location.href='diagnosis.html'" class="w-12 h-12 bg-gradient-to-br from-brand-primary to-orange-500 rounded-2xl border-2 border-orange-300 flex items-center justify-center text-white hover:shadow-lg hover:scale-105 transition-all shadow-md" title="ì§„ë‹¨ í…ŒìŠ¤íŠ¸">
                        <i class="fa-solid fa-compass text-lg"></i>
                    </button>
                </div>
            </header>

            <!-- Weekly Curriculum Section -->
            <section class="mb-8">
                <div class="bg-gradient-to-br from-white via-orange-50/30 to-yellow-50/50 rounded-[2rem] p-6 shadow-lg border border-orange-100/50">
                    <!-- Week Navigation (ê°„ê²°í•œ < 1ì£¼ì°¨ > í˜•íƒœ) -->
                    <div class="flex items-center justify-between mb-5">
                        <div class="flex items-center gap-3">
                            <button onclick="prevWeek()" class="week-nav-btn w-9 h-9 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-brand-primary border border-gray-200 hover:border-brand-primary transition-all">
                                <i class="fa-solid fa-chevron-left"></i>
                            </button>
                            <div class="text-center min-w-[100px]">
                                <span id="week-label" class="font-jua text-xl text-gray-800">1ì£¼ì°¨</span>
                                <p id="week-date" class="text-[11px] text-gray-400">1/6 ~ 1/12</p>
                            </div>
                            <button onclick="nextWeek()" class="week-nav-btn w-9 h-9 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-brand-primary border border-gray-200 hover:border-brand-primary transition-all">
                                <i class="fa-solid fa-chevron-right"></i>
                            </button>
                        </div>
                        <!-- Week Indicator Dots -->
                        <div class="flex items-center gap-1.5">
                            <span class="week-dot w-2.5 h-2.5 rounded-full bg-brand-primary" data-week="1"></span>
                            <span class="week-dot w-2.5 h-2.5 rounded-full bg-gray-200" data-week="2"></span>
                            <span class="week-dot w-2.5 h-2.5 rounded-full bg-gray-200" data-week="3"></span>
                            <span class="week-dot w-2.5 h-2.5 rounded-full bg-gray-200" data-week="4"></span>
                        </div>
                    </div>

                    <!-- Main Content: ì½”ì–´ë¶/ê´€ë¦¬ì´ë¶ í¬ê²Œ + ìŠ¤í… ì‘ê²Œ -->
                    <div class="flex gap-5">
                        <!-- ë©”ì¸ ë„ì„œ ì¹´ë“œ (ì½”ì–´ë¶/ê´€ë¦¬ì´ë¶) -->
                        <div onclick="openBookViewer()" class="main-book-card flex-1 bg-white rounded-3xl p-5 shadow-md border-2 border-brand-primary relative overflow-hidden cursor-pointer group">
                            <div class="absolute -right-10 -top-10 w-32 h-32 bg-brand-primary/5 rounded-full"></div>
                            <div class="absolute -right-4 -bottom-4 w-20 h-20 bg-brand-dark/5 rounded-full"></div>

                            <div class="flex items-start gap-4 relative">
                                <!-- Book Thumbnail -->
                                <div class="w-28 h-40 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl shadow-lg flex-shrink-0 overflow-hidden relative flex items-center justify-center group-hover:scale-105 transition-transform float-animation">
                                    <img src="../images/thumbnails/book_01.png" alt="ë„ì„œ" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                                    <span class="text-white/80 text-4xl">ğŸ“–</span>
                                </div>

                                <!-- Book Info -->
                                <div class="flex-1 min-w-0 py-1">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span id="book-type-badge" class="bg-gradient-to-r from-brand-primary to-brand-dark text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm">ì½”ì–´ë¶</span>
                                        <span class="text-xs text-brand-primary font-medium">STEP 1</span>
                                    </div>
                                    <h4 id="main-book-title" class="font-jua text-xl text-gray-800 mb-1">ë§ˆë²•ì‚¬ì˜ ë¬¼ì•½</h4>
                                    <p id="main-book-desc" class="text-sm text-gray-500 mb-3 line-clamp-2">ìˆ²ì† ë§ˆë²•ì‚¬ì˜ ì‹ ë¹„ë¡œìš´ ëª¨í—˜ ì´ì•¼ê¸°</p>

                                    <div class="flex items-center gap-3 mb-4">
                                        <span id="main-book-level" class="text-xs bg-indigo-100 text-indigo-600 px-2.5 py-1 rounded-full font-bold">K2-1</span>
                                        <div class="flex items-center gap-2 flex-1">
                                            <div class="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                                                <div id="book-progress-bar" class="w-[65%] h-full bg-gradient-to-r from-brand-primary to-brand-dark rounded-full transition-all"></div>
                                            </div>
                                            <span id="book-progress-text" class="text-xs text-gray-400 font-medium">65%</span>
                                        </div>
                                    </div>

                                    <button class="w-full py-2.5 bg-gradient-to-r from-brand-primary to-orange-500 text-white rounded-xl text-sm font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2">
                                        <i class="fa-solid fa-book-open"></i>
                                        ê³„ì† ì½ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ìŠ¤í… ì§„í–‰ í‘œì‹œ (ì‘ê²Œ, ì„¸ë¡œ) -->
                        <div class="w-48 flex-shrink-0 bg-white/60 rounded-2xl p-4 border border-gray-100">
                            <p class="text-xs text-gray-400 font-medium mb-3 flex items-center gap-1.5">
                                <i class="fa-solid fa-list-check"></i>
                                í•™ìŠµ ì§„í–‰ ìƒí™©
                            </p>

                            <!-- Step Items -->
                            <div class="space-y-2" id="step-list">
                                <!-- Step 1: ë„ì„œ -->
                                <div class="step-item active flex items-center gap-2.5 px-3 py-2 rounded-xl">
                                    <div class="w-6 h-6 rounded-full bg-white/80 flex items-center justify-center text-sm">ğŸ“–</div>
                                    <div class="flex-1 min-w-0">
                                        <span id="step1-label" class="text-xs font-medium block truncate">ì½”ì–´ë¶</span>
                                    </div>
                                    <i class="fa-solid fa-play text-[10px]"></i>
                                </div>

                                <!-- Step 2: ë…í›„í€´ì¦ˆ -->
                                <div class="step-item locked flex items-center gap-2.5 px-3 py-2 rounded-xl bg-gray-50 text-gray-400">
                                    <div class="w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center text-sm">â“</div>
                                    <div class="flex-1 min-w-0">
                                        <span class="text-xs font-medium block truncate">ë…í›„í€´ì¦ˆ</span>
                                    </div>
                                    <i class="fa-solid fa-lock text-[10px]"></i>
                                </div>

                                <!-- Step 3: AIë¦¬í…”ë§ (2,4ì£¼ì°¨ë§Œ) -->
                                <div id="step-retelling" class="step-item locked hidden flex items-center gap-2.5 px-3 py-2 rounded-xl bg-gray-50 text-gray-400">
                                    <div class="w-6 h-6 rounded-full bg-pink-100 flex items-center justify-center text-sm">ğŸ¬</div>
                                    <div class="flex-1 min-w-0">
                                        <span class="text-xs font-medium block truncate">AI ë¦¬í…”ë§</span>
                                    </div>
                                    <i class="fa-solid fa-lock text-[10px]"></i>
                                </div>

                                <!-- Step 3/4: ì–´íœ˜ì±Œë¦°ì§€ -->
                                <div class="step-item locked flex items-center gap-2.5 px-3 py-2 rounded-xl bg-gray-50 text-gray-400">
                                    <div class="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-sm">ğŸ®</div>
                                    <div class="flex-1 min-w-0">
                                        <span class="text-xs font-medium block truncate">ì–´íœ˜ ì±Œë¦°ì§€</span>
                                    </div>
                                    <i class="fa-solid fa-lock text-[10px]"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recommendations Section -->
            <section class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <span class="text-2xl">âœ¨</span>
                        <h3 class="font-jua text-xl text-gray-800">ì¶”ì²œ ë„ì„œ</h3>
                        <span class="text-xs bg-brand-primary/10 text-brand-primary px-2 py-0.5 rounded-full">ë§ì¶¤ ì¶”ì²œ</span>
                    </div>
                    <button class="text-sm text-brand-primary font-medium hover:underline">ë”ë³´ê¸° â†’</button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Recommended Book 1 -->
                    <div class="book-card bg-white rounded-2xl p-4 shadow-soft border border-gray-100 flex gap-4 cursor-pointer hover:shadow-lg transition-all">
                        <div class="w-20 h-28 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-xl shadow-md flex-shrink-0 overflow-hidden relative flex items-center justify-center">
                            <img src="../images/thumbnails/book_02.png" alt="ì¶”ì²œë„ì„œ" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                            <span class="text-white/80 text-3xl">ğŸŒ³</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="font-bold text-gray-800 mb-1 truncate">ìˆ²ì† ì¹œêµ¬ë“¤</h4>
                            <p class="text-xs text-gray-500 mb-2 line-clamp-2">ë™ë¬¼ ì¹œêµ¬ë“¤ì˜ ìš°ì • ì´ì•¼ê¸°</p>
                            <div class="flex items-center gap-2">
                                <span class="level-badge bg-emerald-100 text-emerald-600 rounded-full font-bold">K1-1</span>
                                <span class="text-xs text-gray-400">ìì—°/ë™ë¬¼</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recommended Book 2 -->
                    <div class="book-card bg-white rounded-2xl p-4 shadow-soft border border-gray-100 flex gap-4 cursor-pointer hover:shadow-lg transition-all">
                        <div class="w-20 h-28 bg-gradient-to-br from-violet-400 to-purple-500 rounded-xl shadow-md flex-shrink-0 overflow-hidden relative flex items-center justify-center">
                            <img src="../images/thumbnails/book_03.png" alt="ì¶”ì²œë„ì„œ" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                            <span class="text-white/80 text-3xl">ğŸš€</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="font-bold text-gray-800 mb-1 truncate">ìš°ì£¼ íƒí—˜ëŒ€</h4>
                            <p class="text-xs text-gray-500 mb-2 line-clamp-2">ì‹ ë¹„ë¡œìš´ ìš°ì£¼ ì—¬í–‰ ëª¨í—˜</p>
                            <div class="flex items-center gap-2">
                                <span class="level-badge bg-violet-100 text-violet-600 rounded-full font-bold">K2-1</span>
                                <span class="text-xs text-gray-400">ê³¼í•™/ëª¨í—˜</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recommended Book 3 -->
                    <div class="book-card bg-white rounded-2xl p-4 shadow-soft border border-gray-100 flex gap-4 cursor-pointer hover:shadow-lg transition-all">
                        <div class="w-20 h-28 bg-gradient-to-br from-rose-400 to-pink-500 rounded-xl shadow-md flex-shrink-0 overflow-hidden relative flex items-center justify-center">
                            <img src="../images/thumbnails/book_04.png" alt="ì¶”ì²œë„ì„œ" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                            <span class="text-white/80 text-3xl">ğŸ‘¸</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="font-bold text-gray-800 mb-1 truncate">ê³µì£¼ì™€ ìš©</h4>
                            <p class="text-xs text-gray-500 mb-2 line-clamp-2">ìš©ê°í•œ ê³µì£¼ì˜ ì´ì•¼ê¸°</p>
                            <div class="flex items-center gap-2">
                                <span class="level-badge bg-rose-100 text-rose-600 rounded-full font-bold">K1-1</span>
                                <span class="text-xs text-gray-400">íŒíƒ€ì§€</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Textbook Connection Section -->
            <section class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <span class="text-2xl">ğŸ“š</span>
                        <h3 class="font-jua text-xl text-gray-800">êµê³¼ì„œ ì§ê¿</h3>
                        <span class="text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full">êµ­ì–´ 3-1 ì—°ê³„</span>
                    </div>
                    <button class="text-sm text-brand-primary font-medium hover:underline">ë”ë³´ê¸° â†’</button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Textbook Book 1 -->
                    <div class="book-card bg-white rounded-2xl p-4 shadow-soft border border-blue-100 flex gap-4 cursor-pointer hover:shadow-lg hover:border-blue-200 transition-all">
                        <div class="w-20 h-28 bg-gradient-to-br from-sky-400 to-blue-500 rounded-xl shadow-md flex-shrink-0 overflow-hidden relative flex items-center justify-center">
                            <img src="../images/thumbnails/book_05.png" alt="êµê³¼ì„œì§ê¿" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                            <span class="text-white/80 text-3xl">ğŸ¸</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-[10px] bg-blue-500 text-white px-1.5 py-0.5 rounded">1ë‹¨ì›</span>
                                <span class="text-[10px] text-blue-500 font-medium">ë…í›„í€´ì¦ˆ ì—°ê³„</span>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1 truncate">ê°œêµ¬ë¦¬ì™€ ë‘êº¼ë¹„</h4>
                            <p class="text-xs text-gray-500 mb-2">ì¹œêµ¬ ì‚¬ì´ì˜ ìš°ì • ì´ì•¼ê¸°</p>
                            <div class="flex items-center gap-2">
                                <span class="level-badge bg-sky-100 text-sky-600 rounded-full font-bold">K2-1</span>
                            </div>
                        </div>
                    </div>

                    <!-- Textbook Book 2 -->
                    <div class="book-card bg-white rounded-2xl p-4 shadow-soft border border-green-100 flex gap-4 cursor-pointer hover:shadow-lg hover:border-green-200 transition-all">
                        <div class="w-20 h-28 bg-gradient-to-br from-lime-400 to-green-500 rounded-xl shadow-md flex-shrink-0 overflow-hidden relative flex items-center justify-center">
                            <img src="../images/thumbnails/book_06.png" alt="êµê³¼ì„œì§ê¿" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                            <span class="text-white/80 text-3xl">ğŸŒ³</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-[10px] bg-green-500 text-white px-1.5 py-0.5 rounded">2ë‹¨ì›</span>
                                <span class="text-[10px] text-green-500 font-medium">ë…í›„í€´ì¦ˆ ì—°ê³„</span>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1 truncate">ë‚˜ë¬´ë¥¼ ì‹¬ì€ ì‚¬ëŒ</h4>
                            <p class="text-xs text-gray-500 mb-2">ìì—°ì„ ì‚¬ë‘í•˜ëŠ” ë§ˆìŒ</p>
                            <div class="flex items-center gap-2">
                                <span class="level-badge bg-lime-100 text-lime-600 rounded-full font-bold">K3-1</span>
                            </div>
                        </div>
                    </div>

                    <!-- Textbook Book 3 -->
                    <div class="book-card bg-white rounded-2xl p-4 shadow-soft border border-amber-100 flex gap-4 cursor-pointer hover:shadow-lg hover:border-amber-200 transition-all">
                        <div class="w-20 h-28 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl shadow-md flex-shrink-0 overflow-hidden relative flex items-center justify-center">
                            <img src="../images/thumbnails/book_07.png" alt="êµê³¼ì„œì§ê¿" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                            <span class="text-white/80 text-3xl">â­</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-[10px] bg-amber-500 text-white px-1.5 py-0.5 rounded">3ë‹¨ì›</span>
                                <span class="text-[10px] text-amber-500 font-medium">ë…í›„í€´ì¦ˆ ì—°ê³„</span>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1 truncate">ë³„ì„ í—¤ì•„ë¦¬ë©°</h4>
                            <p class="text-xs text-gray-500 mb-2">ê¿ˆê³¼ í¬ë§ì˜ ì´ì•¼ê¸°</p>
                            <div class="flex items-center gap-2">
                                <span class="level-badge bg-amber-100 text-amber-600 rounded-full font-bold">K2-1</span>
                            </div>
                        </div>
                    </div>

                    <!-- Textbook Book 4 -->
                    <div class="book-card bg-white rounded-2xl p-4 shadow-soft border border-pink-100 flex gap-4 cursor-pointer hover:shadow-lg hover:border-pink-200 transition-all">
                        <div class="w-20 h-28 bg-gradient-to-br from-pink-400 to-rose-500 rounded-xl shadow-md flex-shrink-0 overflow-hidden relative flex items-center justify-center">
                            <img src="../images/thumbnails/book_08.png" alt="êµê³¼ì„œì§ê¿" class="absolute inset-0 w-full h-full object-cover" onerror="this.style.display='none';">
                            <span class="text-white/80 text-3xl">ğŸ’</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-[10px] bg-pink-500 text-white px-1.5 py-0.5 rounded">4ë‹¨ì›</span>
                                <span class="text-[10px] text-pink-500 font-medium">ë…í›„í€´ì¦ˆ ì—°ê³„</span>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1 truncate">ì‚¬ë‘ì˜ ì„ ë¬¼</h4>
                            <p class="text-xs text-gray-500 mb-2">ê°€ì¡± ì‚¬ë‘ ì´ì•¼ê¸°</p>
                            <div class="flex items-center gap-2">
                                <span class="level-badge bg-pink-100 text-pink-600 rounded-full font-bold">K1-1</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Logout Modal Container -->
    <div id="logout-modal-container"></div>

    <!-- Scripts -->
    <script src="../js/common.js"></script>
    <script src="../js/sidebar.js"></script>
    <script>
        // ì£¼ì°¨ë³„ ì»¤ë¦¬í˜ëŸ¼ ë°ì´í„°
        const weeklyData = {
            1: {
                type: 'core', // ì½”ì–´ë¶
                bookType: 'ì½”ì–´ë¶',
                book: { title: 'ë§ˆë²•ì‚¬ì˜ ë¬¼ì•½', desc: 'ìˆ²ì† ë§ˆë²•ì‚¬ì˜ ì‹ ë¹„ë¡œìš´ ëª¨í—˜ ì´ì•¼ê¸°', level: 'K2-1' },
                steps: ['ì½”ì–´ë¶', 'ë…í›„í€´ì¦ˆ', 'ì–´íœ˜ì±Œë¦°ì§€'],
                hasRetelling: false
            },
            2: {
                type: 'managed', // ê´€ë¦¬ì´ë¶
                bookType: 'ê´€ë¦¬ì´ë¶',
                book: { title: 'ë°”ë‹¤ ì† ì¹œêµ¬ë“¤', desc: 'ê¹Šì€ ë°”ë‹¤ì˜ ì‹ ë¹„ë¡œìš´ ì„¸ê³„ íƒí—˜', level: 'K4' },
                steps: ['ê´€ë¦¬ì´ë¶', 'ë…í›„í€´ì¦ˆ', 'AIë¦¬í…”ë§', 'ì–´íœ˜ì±Œë¦°ì§€'],
                hasRetelling: true
            },
            3: {
                type: 'core',
                bookType: 'ì½”ì–´ë¶',
                book: { title: 'í•˜ëŠ˜ì„ ë‚˜ëŠ” ì½”ë¼ë¦¬', desc: 'ìƒìƒë ¥ ê°€ë“í•œ íŒíƒ€ì§€ ë™í™”', level: 'K3-1' },
                steps: ['ì½”ì–´ë¶', 'ë…í›„í€´ì¦ˆ', 'ì–´íœ˜ì±Œë¦°ì§€'],
                hasRetelling: false
            },
            4: {
                type: 'managed',
                bookType: 'ê´€ë¦¬ì´ë¶',
                book: { title: 'ê³µë£¡ ì‹œëŒ€ ì—¬í–‰', desc: 'ì‹ ê¸°í•œ ê³µë£¡ë“¤ì˜ ì„¸ê³„ë¡œ ë– ë‚˜ìš”', level: 'K5' },
                steps: ['ê´€ë¦¬ì´ë¶', 'ë…í›„í€´ì¦ˆ', 'AIë¦¬í…”ë§', 'ì–´íœ˜ì±Œë¦°ì§€'],
                hasRetelling: true
            }
        };

        let currentWeek = 1;
        const weekDates = ['1/6 ~ 1/12', '1/13 ~ 1/19', '1/20 ~ 1/26', '1/27 ~ 2/2'];

        function openBookViewer() {
            const data = weeklyData[currentWeek];
            sessionStorage.setItem('currentBook', JSON.stringify({
                title: data.book.title,
                type: data.bookType,
                level: data.book.level
            }));
            window.location.href = 'book-viewer.html';
        }

        function prevWeek() {
            if (currentWeek > 1) {
                selectWeek(currentWeek - 1);
            }
        }

        function nextWeek() {
            if (currentWeek < 4) {
                selectWeek(currentWeek + 1);
            }
        }

        function selectWeek(week) {
            currentWeek = week;
            const data = weeklyData[week];

            // Update week label and date
            document.getElementById('week-label').textContent = week + 'ì£¼ì°¨';
            document.getElementById('week-date').textContent = weekDates[week - 1];

            // Update week indicator dots
            document.querySelectorAll('.week-dot').forEach((dot, i) => {
                if (i + 1 === week) {
                    dot.classList.remove('bg-gray-200');
                    dot.classList.add('bg-brand-primary');
                } else {
                    dot.classList.remove('bg-brand-primary');
                    dot.classList.add('bg-gray-200');
                }
            });

            // Update book type badge
            const typeBadge = document.getElementById('book-type-badge');
            typeBadge.textContent = data.bookType;
            if (data.type === 'core') {
                typeBadge.className = 'bg-gradient-to-r from-brand-primary to-brand-dark text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm';
            } else {
                typeBadge.className = 'bg-gradient-to-r from-teal-400 to-cyan-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm';
            }

            // Update book info
            document.getElementById('main-book-title').textContent = data.book.title;
            document.getElementById('main-book-desc').textContent = data.book.desc;
            document.getElementById('main-book-level').textContent = data.book.level;

            // Update level badge color based on type
            const levelBadge = document.getElementById('main-book-level');
            if (data.type === 'core') {
                levelBadge.className = 'text-xs bg-indigo-100 text-indigo-600 px-2.5 py-1 rounded-full font-bold';
            } else {
                levelBadge.className = 'text-xs bg-teal-100 text-teal-600 px-2.5 py-1 rounded-full font-bold';
            }

            // Update step 1 label
            document.getElementById('step1-label').textContent = data.bookType;

            // Show/hide AIë¦¬í…”ë§ step
            const retellingStep = document.getElementById('step-retelling');
            if (data.hasRetelling) {
                retellingStep.classList.remove('hidden');
            } else {
                retellingStep.classList.add('hidden');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadSidebar('home');
            loadLogoutModal();
            selectWeek(1); // ì´ˆê¸° 1ì£¼ì°¨ ì„ íƒ
        });
    </script>
</body>
</html>
