<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
<title>ë¶í´ëŸ½ 3.0 ë…ì„œì•¨ë²” - ìƒê° ê°¤ëŸ¬ë¦¬</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}
html,body,#root{width:100%;height:100%;overflow:hidden;background:#fff}
@keyframes float-slow {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}
.animate-float-slow { animation: float-slow 6s ease-in-out infinite; }
@keyframes sticker-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}
.animate-sticker-pop { animation: sticker-pop 0.3s ease-out; }
@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-10deg); }
  75% { transform: rotate(10deg); }
}
.animate-wiggle { animation: wiggle 0.5s ease-in-out; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState} = React;

// ìŠ¤í‹°ì»¤ ë¦¬ì•¡ì…˜ ì¢…ë¥˜
const STICKER_REACTIONS = [
  { id: 'thumb', emoji: 'ğŸ‘', label: 'ìµœê³ !', color: 'from-amber-400 to-orange-400' },
  { id: 'heart', emoji: 'â¤ï¸', label: 'ì‚¬ë‘í•´!', color: 'from-pink-400 to-rose-400' },
  { id: 'sparkle', emoji: 'âœ¨', label: 'ë°˜ì§!', color: 'from-yellow-400 to-amber-400' },
  { id: 'hand', emoji: 'âœ‹', label: 'ë‚˜ë„!', color: 'from-purple-400 to-indigo-400' },
];

// ì¹´í…Œê³ ë¦¬ íƒ­ ì„¤ì •
const ALBUM_TABS = {
  all: { icon: 'ğŸ“š', label: 'ì „ì²´', filter: () => true },
  feeling: { icon: 'ğŸ’­', label: 'ë‚´ ë§ˆìŒ', filter: (item) => item.type === 'feeling' },
  character: { icon: 'ğŸ­', label: 'ì£¼ì¸ê³µ', filter: (item) => item.type === 'character' },
  question: { icon: 'â“', label: 'ê¶ê¸ˆí•´', filter: (item) => item.type === 'question' },
  doodle: { icon: 'ğŸ¨', label: 'ììœ  ê·¸ë¦¼', filter: (item) => item.type === 'doodle' },
};

function ThoughtGallery() {
  // ì•¨ë²” ì•„ì´í…œ ìƒ˜í”Œ ë°ì´í„°
  const [albumItems, setAlbumItems] = useState([
    {
      id: 1,
      type: 'feeling',
      bookTitle: 'ìˆ²ì† ì¹œêµ¬ë“¤ì˜ ëª¨í—˜',
      bookEmoji: 'ğŸ¦Š',
      bookColor: '#FFE4C4',
      content: 'ì¹œêµ¬ë“¤ì´ë‘ ëª¨í—˜í•˜ë‹ˆê¹Œ ì‹ ë‚¬ì–´ìš”! ë‚˜ë„ ì—¬ìš°ì²˜ëŸ¼ ìš©ê°í•´ì§€ê³  ì‹¶ì–´ìš”.',
      drawing: 'ğŸŒ²ğŸ¦ŠğŸ°ğŸŒˆ',
      createdAt: '2026.01.25',
      likes: { thumb: 3, heart: 2, sparkle: 1, hand: 2 },
    },
    {
      id: 2,
      type: 'character',
      bookTitle: 'ë§ˆë²•ì‚¬ì˜ ë¹„ë°€ ì±…',
      bookEmoji: 'ğŸ§™',
      bookColor: '#E6E6FA',
      content: 'ë‚´ê°€ ë§ˆë²•ì‚¬ê°€ ë˜ë©´ í•˜ëŠ˜ì„ ë‚ ê³  ì‹¶ì–´ìš”! ê·¸ë¦¬ê³  ì¹œêµ¬ë“¤í•œí…Œ ë§›ìˆëŠ” ê³¼ìë¥¼ ë§Œë“¤ì–´ ì¤„ ê±°ì˜ˆìš”.',
      drawing: 'âœ¨ğŸ§™â€â™‚ï¸ğŸª„â­',
      createdAt: '2026.01.24',
      likes: { thumb: 5, heart: 6, sparkle: 3, hand: 1 },
    },
    {
      id: 3,
      type: 'question',
      bookTitle: 'ê³µë£¡ì€ ì™œ ì‚¬ë¼ì¡Œì„ê¹Œ?',
      bookEmoji: 'ğŸ¦•',
      bookColor: '#98FB98',
      content: 'ê³µë£¡ì´ ë‹¤ì‹œ ì‚´ì•„ë‚˜ë©´ ì–´ë–¨ê¹Œ? ë¬´ì„­ì§€ë§Œ ë³´ê³  ì‹¶ì–´ìš”!',
      drawing: 'ğŸ¦–ğŸŒ‹â“ğŸ¤”',
      createdAt: '2026.01.23',
      likes: { thumb: 1, heart: 0, sparkle: 2, hand: 0 },
    },
    {
      id: 4,
      type: 'doodle',
      bookTitle: 'ë¬´ì§€ê°œ ë‚˜ë¼ ì—¬í–‰',
      bookEmoji: 'ğŸŒˆ',
      bookColor: '#FFB6C1',
      content: 'ë¬´ì§€ê°œ ë‚˜ë¼ëŠ” ì •ë§ ì˜ˆë»¤ì–´ìš”. ë¹¨ì£¼ë…¸ì´ˆíŒŒë‚¨ë³´ ìƒ‰ê¹”ì´ ë‹¤ ìˆì–´ìš”!',
      drawing: 'ğŸŒˆâ˜ï¸ğŸ¦„ğŸ¨',
      createdAt: '2026.01.22',
      likes: { thumb: 2, heart: 3, sparkle: 4, hand: 1 },
    },
    {
      id: 5,
      type: 'feeling',
      bookTitle: 'ë°”ë‹¤ ì† ì¹œêµ¬ë“¤',
      bookEmoji: 'ğŸ ',
      bookColor: '#87CEEB',
      content: 'ë¬¼ê³ ê¸°ë“¤ì´ ì‹ ë‚˜ê²Œ í—¤ì—„ì¹˜ëŠ” ê±¸ ë³´ë‹ˆê¹Œ ë‚˜ë„ ìˆ˜ì˜í•˜ê³  ì‹¶ì–´ìš”!',
      drawing: 'ğŸŒŠğŸ ğŸ¡ğŸ¦€',
      createdAt: '2026.01.21',
      likes: { thumb: 4, heart: 2, sparkle: 2, hand: 3 },
    },
    {
      id: 6,
      type: 'character',
      bookTitle: 'ìŠˆí¼ íˆì–´ë¡œì˜ í•˜ë£¨',
      bookEmoji: 'ğŸ¦¸',
      bookColor: '#FFD700',
      content: 'ë‚˜ë„ íˆì–´ë¡œê°€ ë˜ë©´ ë‚˜ìœ ì‚¬ëŒë“¤ì„ í˜¼ë‚´ì£¼ê³  ì‹¶ì–´ìš”!',
      drawing: 'âš¡ğŸ¦¸â€â™‚ï¸ğŸ’ªâœ¨',
      createdAt: '2026.01.20',
      likes: { thumb: 6, heart: 4, sparkle: 3, hand: 2 },
    },
  ]);

  const [albumTab, setAlbumTab] = useState('all');
  const [reactionMap, setReactionMap] = useState(new Map());

  const filteredItems = albumItems.filter(ALBUM_TABS[albumTab].filter);

  return (
    <div className="w-full h-full flex flex-col bg-gradient-to-br from-purple-50 via-pink-50 to-amber-50">
      {/* ìƒë‹¨ í—¤ë” */}
      <div className="shrink-0 px-6 py-4 bg-white/80 backdrop-blur-sm">
        <h3 className="font-black text-xl flex items-center gap-2 text-slate-700">
          ğŸ¨ ìƒê° ê°¤ëŸ¬ë¦¬
        </h3>
        <span className="text-sm font-bold text-slate-600 mt-1 block">
          ë‚´ ìƒê°ì¹´ë“œ {albumItems.length}ê°œ
        </span>
      </div>

      {/* ì¹´í…Œê³ ë¦¬ íƒ­ */}
      <div className="shrink-0 px-6 py-3 bg-white/50">
        <div className="flex gap-2 overflow-x-auto pb-1">
          {Object.entries(ALBUM_TABS).map(([key, config]) => (
            <button
              key={key}
              onClick={() => setAlbumTab(key)}
              className={`px-4 py-2.5 rounded-xl flex items-center gap-2 whitespace-nowrap transition-all ${
                albumTab === key
                  ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg'
                  : 'bg-white text-slate-600 shadow'
              }`}
            >
              <span className="text-lg">{config.icon}</span>
              <span className="font-bold">{config.label}</span>
            </button>
          ))}
        </div>
      </div>

      {/* í´ë¼ë¡œì´ë“œ ì¹´ë“œ ê·¸ë¦¬ë“œ */}
      <div className="flex-1 overflow-y-auto p-6 relative">
        {/* ë°°ê²½ ì¥ì‹ */}
        {['â­','â˜ï¸','âœ¨','ğŸ“–','ğŸŒŸ','ğŸ¿ï¸','ğŸŒˆ','ğŸ’«'].map((ico, i) => (
          <span key={`bg-${i}`} className="absolute text-2xl pointer-events-none animate-float-slow"
            style={{ left: `${3 + (i * 13) % 90}%`, top: `${5 + (i * 17) % 80}%`, opacity: 0.08, animationDelay: `${i * 0.5}s`, zIndex: 0 }}>
            {ico}
          </span>
        ))}

        {filteredItems.length > 0 ? (
          <>
            <div className="grid grid-cols-3 gap-6 relative z-10">
              {filteredItems.map((item) => {
                const rotation = ((item.id % 5) - 2) * 1.8;
                const totalLikes = item.likes ? Object.values(item.likes).reduce((a, b) => a + b, 0) : 0;
                return (
                  <div
                    key={item.id}
                    className="relative cursor-pointer transition-all duration-300 group"
                    style={{ transform: `rotate(${rotation}deg)` }}
                    onMouseEnter={e => e.currentTarget.style.transform = 'rotate(0deg) translateY(-8px)'}
                    onMouseLeave={e => e.currentTarget.style.transform = `rotate(${rotation}deg)`}
                  >
                    {/* í´ë¼ë¡œì´ë“œ í”„ë ˆì„ */}
                    <div className="rounded-xl overflow-hidden shadow-xl transition-shadow group-hover:shadow-2xl bg-white"
                      style={{ padding: '10px 10px 12px 10px' }}>
                      {/* ì‚¬ì§„ ì˜ì—­ */}
                      <div className="aspect-[4/3] rounded-lg overflow-hidden relative"
                        style={{ background: `linear-gradient(135deg, ${item.bookColor}80, ${item.bookColor}30)` }}>
                        <div className="w-full h-full flex flex-col items-center justify-center p-4">
                          <span className="text-5xl drop-shadow-lg mb-2">{item.drawing}</span>
                          <p className="text-sm font-bold text-center leading-snug line-clamp-3 text-slate-800">
                            {item.content}
                          </p>
                        </div>
                        {/* íƒ€ì… ë±ƒì§€ */}
                        <div className="absolute top-2 left-2 px-2 py-1 rounded-lg text-sm shadow-sm bg-white/90">
                          {ALBUM_TABS[item.type]?.icon}
                        </div>
                      </div>

                      {/* í•˜ë‹¨: ë‚ ì§œ + ì±… ì œëª© */}
                      <div className="pt-2 px-1">
                        <div className="flex items-center gap-1.5 mb-1.5">
                          <div className="w-5 h-5 rounded flex items-center justify-center flex-shrink-0"
                            style={{ backgroundColor: item.bookColor }}>
                            <span className="text-xs">{item.bookEmoji}</span>
                          </div>
                          <span className="text-xs font-bold truncate text-slate-600">
                            {item.bookTitle}
                          </span>
                        </div>
                        <div className="flex items-center justify-between">
                          <span className="text-[10px] text-slate-400">{item.createdAt}</span>
                          {totalLikes > 0 && (
                            <span className="text-[10px] font-bold text-pink-400">
                              ğŸ‘{item.likes?.thumb || 0} â¤ï¸{item.likes?.heart || 0} âœ¨{item.likes?.sparkle || 0} âœ‹{item.likes?.hand || 0}
                            </span>
                          )}
                        </div>
                      </div>

                      {/* ìŠ¤í‹°ì»¤ ë¦¬ì•¡ì…˜ ë²„íŠ¼ 4ì¢… */}
                      <div className="flex gap-1.5 mt-2 justify-center">
                        {STICKER_REACTIONS.map(reaction => {
                          const myReaction = reactionMap.get(`album-${item.id}`);
                          const isSelected = myReaction === reaction.id;
                          const count = item.likes?.[reaction.id] || 0;
                          return (
                            <button
                              key={reaction.id}
                              onClick={(e) => {
                                e.stopPropagation();
                                setReactionMap(prev => {
                                  const next = new Map(prev);
                                  const key = `album-${item.id}`;
                                  if (next.get(key) === reaction.id) {
                                    next.delete(key);
                                    setAlbumItems(items => items.map(it =>
                                      it.id === item.id ? { ...it, likes: { ...it.likes, [reaction.id]: Math.max(0, (it.likes?.[reaction.id] || 0) - 1) } } : it
                                    ));
                                  } else {
                                    const prevReaction = next.get(key);
                                    next.set(key, reaction.id);
                                    setAlbumItems(items => items.map(it => {
                                      if (it.id !== item.id) return it;
                                      const newLikes = { ...it.likes };
                                      if (prevReaction) newLikes[prevReaction] = Math.max(0, (newLikes[prevReaction] || 0) - 1);
                                      newLikes[reaction.id] = (newLikes[reaction.id] || 0) + 1;
                                      return { ...it, likes: newLikes };
                                    }));
                                  }
                                  return next;
                                });
                              }}
                              className={`flex flex-col items-center p-2 rounded-xl transition-all duration-300 ${
                                isSelected
                                  ? `bg-gradient-to-b ${reaction.color} text-white shadow-lg animate-sticker-pop`
                                  : 'bg-slate-50 text-slate-500 hover:bg-slate-100'
                              }`}
                              style={{ minWidth: '52px' }}
                            >
                              <span className={`text-2xl ${isSelected ? 'animate-wiggle' : ''}`}>{reaction.emoji}</span>
                              <span className="text-[10px] font-bold mt-0.5">{isSelected ? count + 1 : count}</span>
                            </button>
                          );
                        })}
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>

            {/* ê°€ì´ë“œ ë¬¸êµ¬ */}
            <div className="flex items-center justify-center gap-3 mt-6 mb-2 relative z-10 text-slate-400">
              <span className="text-3xl">ğŸ¿ï¸</span>
              <p className="text-sm font-bold">ìƒê°ì¹´ë“œì— ìŠ¤í‹°ì»¤ë¥¼ ë¶™ì—¬ë´!</p>
            </div>
          </>
        ) : (
          <div className="text-center py-20 text-slate-400">
            <span className="text-7xl block mb-4">ğŸ“·</span>
            <p className="text-2xl font-bold mb-2">ì•„ì§ ì•¨ë²”ì´ ë¹„ì–´ìˆì–´ìš”!</p>
            <p className="text-lg">ì±…ì„ ì½ê³  ë‚˜ë§Œì˜ ì•¨ë²”ì„ ì±„ì›Œë³´ì„¸ìš”</p>
          </div>
        )}
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<ThoughtGallery />);
</script>
</body>
</html>
